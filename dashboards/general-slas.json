{"meta":{"type":"db","canSave":false,"canEdit":false,"canAdmin":false,"canStar":true,"slug":"general-slas","url":"/d/general-slas/general-slas","expires":"0001-01-01T00:00:00Z","created":"2019-07-29T13:28:51Z","updated":"2019-09-22T19:42:25Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":204,"hasAcl":false,"isFolder":false,"folderId":699,"folderTitle":"General Metrics","folderUrl":"/dashboards/f/general/general-metrics","provisioned":false,"provisionedExternalId":""},"dashboard":{"__inputs":[],"__requires":[],"annotations":{"list":[]},"editable":false,"gnetId":null,"graphTooltip":1,"hideControls":false,"id":null,"links":[{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"api service","type":"link","url":"https://dashboards.gitlab.net/d/api-main/api-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"ci-runners service","type":"link","url":"https://dashboards.gitlab.net/d/general-service/service-platform-metrics?orgId=1\u0026var-type=ci-runners"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"frontend service","type":"link","url":"https://dashboards.gitlab.net/d/general-service/service-platform-metrics?orgId=1\u0026var-type=frontend"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"git service","type":"link","url":"https://dashboards.gitlab.net/d/general-service/service-platform-metrics?orgId=1\u0026var-type=git"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"gitaly service","type":"link","url":"https://dashboards.gitlab.net/d/general-service/service-platform-metrics?orgId=1\u0026var-type=gitaly"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"pages (haproxy) service","type":"link","url":"https://dashboards.gitlab.net/d/general-service/service-platform-metrics?orgId=1\u0026var-type=pages"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"patroni service","type":"link","url":"https://dashboards.gitlab.net/d/patroni-main/patroni-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":true,"keepTime":true,"tags":"","targetBlank":false,"title":"pgbouncer service","type":"link","url":"https://dashboards.gitlab.net/d/pgbouncer-main/pgbouncer-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":true,"keepTime":true,"tags":"","targetBlank":false,"title":"redis service","type":"link","url":"https://dashboards.gitlab.net/d/redis-main/redis-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"redis-cache service","type":"link","url":"https://dashboards.gitlab.net/d/redis-cache-main/redis-cache-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":true,"keepTime":true,"tags":"","targetBlank":false,"title":"redis-sidekiq service","type":"link","url":"https://dashboards.gitlab.net/d/redis-sidekiq-main/redis-sidekiq-overview"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"registry service","type":"link","url":"https://dashboards.gitlab.net/d/general-service/service-platform-metrics?orgId=1\u0026var-type=registry"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"sidekiq service","type":"link","url":"https://dashboards.gitlab.net/d/sidekiq-main/sidekiq-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"web service","type":"link","url":"https://dashboards.gitlab.net/d/web-main/web-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"web-pages (pages) service","type":"link","url":"https://dashboards.gitlab.net/d/general-service/service-platform-metrics?orgId=1\u0026var-type=web-pages"},{"asDropdown":true,"icon":"external link","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"Platform Triage","type":"link","url":"https://dashboards.gitlab.net/d/general-triage/platform-triage?orgId=1"}],"panels":[{"collapse":false,"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":2,"panels":[],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"Headline","titleSize":"h6","type":"row"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"$PROMETHEUS_DS","format":"percentunit","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":5,"w":4,"x":0,"y":1},"id":3,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sort(\n          avg(\n            avg_over_time(slo_observation_status{environment=\"$environment\", stage=~\"main|\", type=~\"api|web|git|web-pages|registry|sidekiq\"}[$__range])\n          )\n        )","format":"time_series","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":"","title":"SLA Status","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":2,"description":"1w rolling average SLO adherence across all primary services. Higher is better.","fill":0,"gridPos":{"h":10,"w":24,"x":0,"y":1001},"id":4,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"clamp_min(clamp_max(\n        avg(avg_over_time(slo_observation_status{environment=\"gprd\", stage=~\"main|\", type=~\"api|web|git|web-pages|registry|sidekiq\"}[7d]))\n      ,1),0)","format":"time_series","interval":"1m","intervalFactor":5,"legendFormat":"gitlab.com SLA","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"SLA Trends - Aggregated","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":"SLA","logBase":1,"max":1,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"collapse":false,"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":2000},"id":5,"panels":[],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"Primary Services","titleSize":"h6","type":"row"},{"gridPos":{"h":10,"w":24,"x":0,"y":2001},"id":6,"options":{"displayMode":"gradient","fieldOptions":{"calcs":["last"],"defaults":{"decimals":1,"max":1,"min":0,"unit":"percentunit"},"mappings":[],"override":{},"thresholds":[{"color":"green","index":0,"value":null}],"values":false},"orientation":"horizontal"},"targets":[{"expr":"\n        sort(avg(avg_over_time(slo_observation_status{environment=\"$environment\", stage=~\"main|\", type=~\"api|web|git|web-pages|registry|sidekiq\"}[$__range])) by (type))\n      ","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"{{ type }}","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Primary Services Average Availability for Period","type":"bargauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":2,"description":"1w rolling average SLO adherence for primary services. Higher is better.","fill":0,"gridPos":{"h":10,"w":24,"x":0,"y":2011},"id":7,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"clamp_min(clamp_max(\n        avg(avg_over_time(slo_observation_status{environment=\"gprd\", stage=~\"main|\", type=~\"api|web|git|web-pages|registry|sidekiq\"}[7d])) by (type)\n      ,1),0)","format":"time_series","interval":"1m","intervalFactor":5,"legendFormat":"{{ type }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"SLA Trends - Primary Services","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":"SLA","logBase":1,"max":1,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]}],"refresh":"","rows":[],"schemaVersion":16,"style":"dark","tags":["managed","general","overview"],"templating":{"list":[{"current":{"text":"Prometheus","value":"Prometheus"},"hide":0,"label":null,"name":"PROMETHEUS_DS","options":[],"query":"prometheus","refresh":1,"regex":"/(.*-gprd|Global)/","type":"datasource"},{"allValue":null,"current":{"text":"gprd","value":"gprd"},"datasource":"$PROMETHEUS_DS","hide":0,"includeAll":false,"label":null,"multi":false,"name":"environment","options":[],"query":"label_values(gitlab_service_ops:rate, environment)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-30d","to":"now"},"timepicker":{"refresh_intervals":[],"time_options":["7d","14d","30d","45d","60d","90d","120d","180d"]},"timezone":"utc","title":"general: SLAs","uid":"general-slas","version":204}}