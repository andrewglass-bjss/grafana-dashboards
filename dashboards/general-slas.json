{"meta":{"type":"db","canSave":false,"canEdit":false,"canAdmin":false,"canStar":true,"slug":"general-slas","url":"/d/general-slas/general-slas","expires":"0001-01-01T00:00:00Z","created":"2019-07-29T13:28:51Z","updated":"2020-01-22T19:21:54Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":527,"hasAcl":false,"isFolder":false,"folderId":699,"folderTitle":"General Metrics","folderUrl":"/dashboards/f/general/general-metrics","provisioned":false,"provisionedExternalId":""},"dashboard":{"__inputs":[],"__requires":[],"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":false,"iconColor":"#96D98D","name":"deploy","showIn":0,"tags":["deploy","$environment"],"type":"tags"},{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":false,"iconColor":"#FFEE52","name":"canary-deploy","showIn":0,"tags":["deploy","${environment}-cny"],"type":"tags"},{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":false,"iconColor":"#CA95E5","name":"feature-flags","showIn":0,"tags":["feature-flag","${environment}"],"type":"tags"}]},"description":"Uploaded by https://gitlab.com/gitlab-com/runbooks/-/jobs/411949442 at Wed Jan 22 19:21:54 UTC 2020","editable":false,"gnetId":null,"graphTooltip":1,"hideControls":false,"id":null,"links":[{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"api service","type":"link","url":"https://dashboards.gitlab.net/d/api-main/api-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"ci-runners service","type":"link","url":"https://dashboards.gitlab.net/d/ci-runners-main/ci-runners-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"frontend service","type":"link","url":"https://dashboards.gitlab.net/d/frontend-main/frontend-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"git service","type":"link","url":"https://dashboards.gitlab.net/d/git-main/git-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"gitaly service","type":"link","url":"https://dashboards.gitlab.net/d/gitaly-main/gitaly-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"monitoring service","type":"link","url":"https://dashboards.gitlab.net/d/monitoring-main/monitoring-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"pages service","type":"link","url":"https://dashboards.gitlab.net/d/general-service/service-platform-metrics?orgId=1\u0026var-type=pages"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"patroni service","type":"link","url":"https://dashboards.gitlab.net/d/patroni-main/patroni-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"pgbouncer service","type":"link","url":"https://dashboards.gitlab.net/d/pgbouncer-main/pgbouncer-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"redis service","type":"link","url":"https://dashboards.gitlab.net/d/redis-main/redis-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"redis-cache service","type":"link","url":"https://dashboards.gitlab.net/d/redis-cache-main/redis-cache-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"redis-sidekiq service","type":"link","url":"https://dashboards.gitlab.net/d/redis-sidekiq-main/redis-sidekiq-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"registry service","type":"link","url":"https://dashboards.gitlab.net/d/registry-main/registry-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"sidekiq service","type":"link","url":"https://dashboards.gitlab.net/d/sidekiq-main/sidekiq-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"web service","type":"link","url":"https://dashboards.gitlab.net/d/web-main/web-overview??orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"web-pages service","type":"link","url":"https://dashboards.gitlab.net/d/general-service/service-platform-metrics?orgId=1\u0026var-type=web-pages"},{"asDropdown":true,"icon":"external link","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"Platform Triage","type":"link","url":"https://dashboards.gitlab.net/d/general-triage/platform-triage?orgId=1"},{"asDropdown":true,"icon":"external link","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"Capacity Planning","type":"link","url":"https://dashboards.gitlab.net/d/general-capacity-planning/general-capacity-planning?orgId=1"}],"panels":[{"collapse":false,"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":2,"panels":[],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"Headline","titleSize":"h6","type":"row"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"$PROMETHEUS_DS","format":"percentunit","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":4,"x":0,"y":0},"id":3,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sort(\n  avg(\n    avg_over_time(slo_observation_status{environment=\"$environment\", stage=~\"main|\", type=~\"api|web|git|web-pages|registry|sidekiq|ci-runners\"}[$__range])\n  )\n)\n","format":"time_series","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":"","title":"SLA - GitLab.com","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"content":"This dashboard shows the SLA trends for each of the _primary_ services in the GitLab fleet (\"primary\" services are those which are directly user-facing).\n\n* For each service we measure two key metrics/SLIs (Service Level Indicators): error-rate and apdex score\n* For each service, for each SLI, we have an SLO target\n  * For error-rate, the SLI should remain _below_ the SLO\n  * For apdex score, the SLI should remain _above_ the SLO\n* The SLA for each service is the percentage of time that the _both_ SLOs are being met\n* The SLA for GitLab.com is the average SLO across each primary service\n\n_To see instanteous SLI values for these services, visit the [`general-public-splashscreen`](d/general-public-splashscreen) dashboard._\n","datasource":null,"gridPos":{"h":6,"w":20,"x":4,"y":0},"id":4,"mode":"markdown","title":"GitLab SLA Dashboard Explainer","type":"text"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":2,"description":"Rolling average SLO adherence across all primary services. Higher is better.","fill":0,"gridPos":{"h":10,"w":24,"x":0,"y":1001},"id":5,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":3,"points":true,"renderer":"flot","repeat":null,"seriesOverrides":[{"alias":"gitlab.com SLA","color":"#E7D551"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"clamp_min(clamp_max(avg(avg_over_time(slo_observation_status{environment=\"gprd\", stage=~\"main|\", type=~\"api|web|git|web-pages|registry|sidekiq|ci-runners\"}[$__interval]))\n,1),0)\n","format":"time_series","interval":"1d","intervalFactor":50,"legendFormat":"gitlab.com SLA","refId":"A"}],"thresholds":[{"colorMode":"custom","fill":true,"fillColor":"rgba(242, 73, 92, 0.5)","line":false,"op":"lt","value":0.995,"yaxis":"left"}],"timeFrom":null,"timeRegions":[{"colorMode":"gray","fill":false,"from":"00:00","line":true,"lineColor":"rgba(237, 46, 24, 0.10)","op":"time","to":"00:00"},{"colorMode":"gray","fill":true,"fillColor":"rgba(237, 46, 24, 0.80)","from":"00:00","fromDayOfWeek":1,"line":false,"op":"time","to":"23:59","toDayOfWeek":1}],"timeShift":null,"title":"Overall SLA over time period - gitlab.com","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":"SLA","logBase":1,"max":1,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"collapse":false,"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":2000},"id":6,"panels":[],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"SLA Trends - Per Primary Service","titleSize":"h6","type":"row"},{"gridPos":{"h":10,"w":24,"x":0,"y":2001},"id":7,"options":{"displayMode":"gradient","fieldOptions":{"calcs":["last"],"defaults":{"decimals":1,"max":1,"min":0,"unit":"percentunit"},"mappings":[],"override":{},"thresholds":[{"color":"green","index":0,"value":null}],"values":false},"orientation":"horizontal"},"targets":[{"expr":"sort(avg(avg_over_time(slo_observation_status{environment=\"$environment\", stage=~\"main|\", type=~\"api|web|git|web-pages|registry|sidekiq|ci-runners\"}[$__range])) by (type))\n","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"{{ type }}","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Primary Services Average Availability for Period","type":"bargauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":2,"description":"Rolling average SLO adherence for primary services. Higher is better.","fill":0,"gridPos":{"h":10,"w":24,"x":0,"y":2011},"id":8,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":3,"points":true,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"clamp_min(clamp_max(avg(avg_over_time(slo_observation_status{environment=\"gprd\", stage=~\"main|\", type=~\"api|web|git|web-pages|registry|sidekiq|ci-runners\"}[$__interval])) by (type)\n,1),0)\n","format":"time_series","interval":"1d","intervalFactor":50,"legendFormat":"{{ type }}","refId":"A"}],"thresholds":[{"colorMode":"custom","fill":true,"fillColor":"rgba(242, 73, 92, 0.5)","line":false,"op":"lt","value":0.995,"yaxis":"left"}],"timeFrom":null,"timeRegions":[{"colorMode":"gray","fill":false,"from":"00:00","line":true,"lineColor":"rgba(237, 46, 24, 0.10)","op":"time","to":"00:00"},{"colorMode":"gray","fill":true,"fillColor":"rgba(237, 46, 24, 0.80)","from":"00:00","fromDayOfWeek":1,"line":false,"op":"time","to":"23:59","toDayOfWeek":1}],"timeShift":null,"title":"SLA Trends - Primary Services","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":"SLA","logBase":1,"max":1,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]}],"refresh":"","rows":[],"schemaVersion":16,"style":"light","tags":["managed","general","general"],"templating":{"list":[{"current":{"text":"Prometheus","value":"Prometheus"},"hide":0,"label":null,"name":"PROMETHEUS_DS","options":[],"query":"prometheus","refresh":1,"regex":"/(.*-gprd|Global)/","type":"datasource"},{"allValue":null,"current":{"text":"gprd","value":"gprd"},"datasource":"$PROMETHEUS_DS","hide":0,"includeAll":false,"label":null,"multi":false,"name":"environment","options":[],"query":"label_values(gitlab_service_ops:rate, environment)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-6h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"utc","title":"general: SLAs","uid":"general-slas","version":527}}