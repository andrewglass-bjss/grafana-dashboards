{"meta":{"type":"db","canSave":false,"canEdit":false,"canAdmin":false,"canStar":true,"slug":"sidekiq-stats","url":"/d/9GOIu9Siz/sidekiq-stats","expires":"0001-01-01T00:00:00Z","created":"2018-06-12T13:29:04Z","updated":"2019-11-27T17:36:17Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":65,"hasAcl":false,"isFolder":false,"folderId":0,"folderTitle":"General","folderUrl":"","provisioned":false,"provisionedExternalId":""},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":1,"id":null,"iteration":1574876089112,"links":[],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":60,"panels":[],"title":"Exceptions","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":1},"height":"300px","id":58,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":true,"hideZero":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"max","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(gitlab_transaction_event_sidekiq_exception_total{environment=\"$environment\"}[1m])) by (controller)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":1,"legendFormat":"{{ controller }}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":1,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Sidekiq Exceptions Rate by Controller","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":1},"height":"300px","id":61,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":true,"hideZero":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(gitlab_transaction_event_sidekiq_exception_total{environment=\"$environment\"}[1m])) by (priority)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":1,"legendFormat":"{{ priority  }}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Sidekiq Exceptions Rate by Priority","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":10},"height":"300px","id":66,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":true,"hideZero":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(gitlab_transaction_event_sidekiq_exception_total{environment=\"$environment\"}) by (controller)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":1,"legendFormat":"{{ controller }}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[{"colorMode":"warning","fill":true,"line":true,"op":"gt","value":1000,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Sidekiq Exceptions Count by Controller","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":10},"height":"300px","id":67,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":true,"hideZero":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(gitlab_transaction_event_sidekiq_exception_total{environment=\"$environment\"}) by (priority)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":1,"legendFormat":"{{ priority  }}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Sidekiq Exceptions Count by Priority","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":19},"height":"300px","id":86,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":true,"hideZero":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"max","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(gitlab_transaction_event_sidekiq_exception_total{environment=\"$environment\"}[1m])) by (fqdn)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":1,"legendFormat":"{{ fqdn }}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":1,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Sidekiq Exceptions Rate by Node","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":true,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":28},"id":48,"panels":[{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":"Global","editable":true,"error":false,"format":"none","gauge":{"maxValue":5000,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":4,"x":0,"y":2},"height":"","hideTimeOverride":true,"id":5,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(max(sidekiq_queue_size{environment=\"$environment\"}) by (name))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":240,"tags":[]}],"thresholds":"3000,4000","timeFrom":null,"timeShift":null,"title":"Total Enqueued Jobs","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":"Global","editable":true,"error":false,"format":"none","gauge":{"maxValue":300,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":4,"x":4,"y":2},"height":"","hideTimeOverride":true,"id":11,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(sidekiq_running_jobs_count{environment=\"$environment\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"instant":true,"interval":"1m","intervalFactor":2,"legendFormat":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":240,"tags":[]}],"thresholds":"200,240","timeFrom":null,"timeShift":null,"title":"Current Running Jobs","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":"Global","editable":true,"error":false,"format":"short","gauge":{"maxValue":1000,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":4,"x":8,"y":2},"height":"","hideTimeOverride":true,"id":6,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(max(sidekiq_jobs_to_be_retried_count{environment=\"$environment\"}) by (name))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":240,"tags":[]}],"thresholds":"500,800","timeFrom":null,"timeShift":null,"title":"Jobs to be retried","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":"Global","description":"","editable":true,"error":false,"format":"none","gauge":{"maxValue":5000,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":4,"x":12,"y":2},"height":"","hideTimeOverride":true,"id":19,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(max(sidekiq_dead_jobs_total{environment=\"$environment\"}) by (name))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":240,"tags":[]}],"thresholds":"3000,4000","timeFrom":null,"timeShift":null,"title":"Total Dead Jobs","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":"Global","decimals":null,"editable":true,"error":false,"format":"percentunit","gauge":{"maxValue":1,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":4,"x":16,"y":2},"height":"","hideTimeOverride":true,"id":18,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"avg(sum(instance_cpu:node_cpu_not_idle:rate5m{fqdn=~\"sidekiq.*\", environment=\"$environment\"}) without (cpu) / instance:node_cpus:count{fqdn=~\"sidekiq.*\", environment=\"$environment\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":240,"tags":[]}],"thresholds":"0.5,0.7","timeFrom":null,"timeShift":null,"title":"AVG Fleet CPU Usage","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Global","decimals":null,"editable":true,"error":false,"format":"percentunit","gauge":{"maxValue":1,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":4,"x":20,"y":2},"height":"","hideTimeOverride":true,"id":22,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"avg(up{tier=\"sv\", job=\"base-debian\",environment=\"$environment\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":240,"tags":[]}],"thresholds":"0.7,0.8","timeFrom":null,"timeShift":null,"title":"Sidekiq nodes availability","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"}],"repeat":null,"title":"Queues State","type":"row"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":29},"id":49,"panels":[],"repeat":null,"title":"CPU Usage","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":0,"y":30},"id":14,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":"priority","repeatDirection":"h","scopedVars":{"priority":{"selected":false,"text":"asap","value":"asap"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"instance:node_cpu_utilization:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0.8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":0.6}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - CPU Utilization","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":4,"y":30},"id":87,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":14,"scopedVars":{"priority":{"selected":false,"text":"besteffort","value":"besteffort"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"instance:node_cpu_utilization:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0.8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":0.6}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - CPU Utilization","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":8,"y":30},"id":88,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":14,"scopedVars":{"priority":{"selected":false,"text":"elasticsearch","value":"elasticsearch"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"instance:node_cpu_utilization:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0.8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":0.6}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - CPU Utilization","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":12,"y":30},"id":89,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":14,"scopedVars":{"priority":{"selected":false,"text":"export","value":"export"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"instance:node_cpu_utilization:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0.8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":0.6}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - CPU Utilization","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":16,"y":30},"id":90,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":14,"scopedVars":{"priority":{"selected":false,"text":"import","value":"import"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"instance:node_cpu_utilization:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0.8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":0.6}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - CPU Utilization","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":20,"y":30},"id":91,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":14,"scopedVars":{"priority":{"selected":false,"text":"pages","value":"pages"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"instance:node_cpu_utilization:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0.8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":0.6}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - CPU Utilization","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":0,"y":36},"id":92,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":14,"scopedVars":{"priority":{"selected":false,"text":"pipeline","value":"pipeline"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"instance:node_cpu_utilization:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0.8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":0.6}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - CPU Utilization","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":4,"y":36},"id":93,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":14,"scopedVars":{"priority":{"selected":false,"text":"pullmirror","value":"pullmirror"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"instance:node_cpu_utilization:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0.8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":0.6}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - CPU Utilization","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":8,"y":36},"id":94,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":14,"scopedVars":{"priority":{"selected":false,"text":"realtime","value":"realtime"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"instance:node_cpu_utilization:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0.8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":0.6}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - CPU Utilization","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":42},"id":50,"panels":[],"repeat":null,"title":"Load Average","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":0,"y":43},"id":13,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":"priority","repeatDirection":"h","scopedVars":{"priority":{"selected":false,"text":"asap","value":"asap"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]},{"dsType":"influxdb","expr":"avg(node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Average","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":4}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Load Average","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":4,"y":43},"id":95,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":13,"scopedVars":{"priority":{"selected":false,"text":"besteffort","value":"besteffort"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]},{"dsType":"influxdb","expr":"avg(node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Average","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":4}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Load Average","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":8,"y":43},"id":96,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":13,"scopedVars":{"priority":{"selected":false,"text":"elasticsearch","value":"elasticsearch"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]},{"dsType":"influxdb","expr":"avg(node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Average","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":4}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Load Average","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":12,"y":43},"id":97,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":13,"scopedVars":{"priority":{"selected":false,"text":"export","value":"export"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]},{"dsType":"influxdb","expr":"avg(node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Average","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":4}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Load Average","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":16,"y":43},"id":98,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":13,"scopedVars":{"priority":{"selected":false,"text":"import","value":"import"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]},{"dsType":"influxdb","expr":"avg(node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Average","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":4}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Load Average","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":20,"y":43},"id":99,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":13,"scopedVars":{"priority":{"selected":false,"text":"pages","value":"pages"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]},{"dsType":"influxdb","expr":"avg(node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Average","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":4}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Load Average","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":0,"y":49},"id":100,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":13,"scopedVars":{"priority":{"selected":false,"text":"pipeline","value":"pipeline"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]},{"dsType":"influxdb","expr":"avg(node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Average","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":4}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Load Average","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":4,"y":49},"id":101,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":13,"scopedVars":{"priority":{"selected":false,"text":"pullmirror","value":"pullmirror"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]},{"dsType":"influxdb","expr":"avg(node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Average","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":4}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Load Average","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":4,"x":8,"y":49},"id":102,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":13,"scopedVars":{"priority":{"selected":false,"text":"realtime","value":"realtime"}},"seriesOverrides":[{"alias":"Average","color":"#DEDAF7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{fqdn}}","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]},{"dsType":"influxdb","expr":"avg(node_load1{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Average","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":60,"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":8},{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":4}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Load Average","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":55},"id":51,"panels":[],"repeat":null,"title":"Memory usage","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":0,"y":56},"id":42,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":"priority","repeatDirection":"h","scopedVars":{"priority":{"selected":false,"text":"asap","value":"asap"}},"seriesOverrides":[{"alias":"AVG","color":"#f9d9f9","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"} ","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"avg(1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","intervalFactor":2,"legendFormat":"AVG","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Memory usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":4,"y":56},"id":103,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":42,"scopedVars":{"priority":{"selected":false,"text":"besteffort","value":"besteffort"}},"seriesOverrides":[{"alias":"AVG","color":"#f9d9f9","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"} ","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"avg(1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","intervalFactor":2,"legendFormat":"AVG","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Memory usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":8,"y":56},"id":104,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":42,"scopedVars":{"priority":{"selected":false,"text":"elasticsearch","value":"elasticsearch"}},"seriesOverrides":[{"alias":"AVG","color":"#f9d9f9","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"} ","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"avg(1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","intervalFactor":2,"legendFormat":"AVG","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Memory usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":12,"y":56},"id":105,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":42,"scopedVars":{"priority":{"selected":false,"text":"export","value":"export"}},"seriesOverrides":[{"alias":"AVG","color":"#f9d9f9","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"} ","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"avg(1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","intervalFactor":2,"legendFormat":"AVG","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Memory usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":16,"y":56},"id":106,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":42,"scopedVars":{"priority":{"selected":false,"text":"import","value":"import"}},"seriesOverrides":[{"alias":"AVG","color":"#f9d9f9","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"} ","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"avg(1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","intervalFactor":2,"legendFormat":"AVG","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Memory usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":20,"y":56},"id":107,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":42,"scopedVars":{"priority":{"selected":false,"text":"pages","value":"pages"}},"seriesOverrides":[{"alias":"AVG","color":"#f9d9f9","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"} ","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"avg(1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","intervalFactor":2,"legendFormat":"AVG","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Memory usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":0,"y":61},"id":108,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":42,"scopedVars":{"priority":{"selected":false,"text":"pipeline","value":"pipeline"}},"seriesOverrides":[{"alias":"AVG","color":"#f9d9f9","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"} ","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"avg(1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","intervalFactor":2,"legendFormat":"AVG","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Memory usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":4,"y":61},"id":109,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":42,"scopedVars":{"priority":{"selected":false,"text":"pullmirror","value":"pullmirror"}},"seriesOverrides":[{"alias":"AVG","color":"#f9d9f9","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"} ","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"avg(1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","intervalFactor":2,"legendFormat":"AVG","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Memory usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":5,"w":4,"x":8,"y":61},"id":110,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"maxPerRow":6,"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"h","repeatIteration":1574876089112,"repeatPanelId":42,"scopedVars":{"priority":{"selected":false,"text":"realtime","value":"realtime"}},"seriesOverrides":[{"alias":"AVG","color":"#f9d9f9","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"} ","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"avg(1 - instance:node_memory_available:ratio{environment=\"$environment\", tier=\"sv\", priority=\"$priority\"})","format":"time_series","intervalFactor":2,"legendFormat":"AVG","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"$priority - Memory usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":66},"id":52,"panels":[],"repeat":null,"title":"Totals \u0026 Queue Size","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"editable":true,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":8,"x":0,"y":67},"height":"300px","id":9,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(sidekiq_queue_size{environment=\"$environment\"} and on (fqdn) gitlab:redis_master)","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"Total","metric":"sidekiq_enqueued_jobs_count","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":120,"tags":[]}],"thresholds":[{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":3000},{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":4000}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total Enqueued Jobs","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"editable":true,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":8,"x":8,"y":67},"height":"300px","id":12,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(sidekiq_running_jobs_count{name!~\"(ActiveJob|Devise).*\", environment=\"$environment\"} and on (fqdn) gitlab:redis_master)","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"Total","metric":"sidekiq_enqueued_jobs_count","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":120,"tags":[]}],"thresholds":[{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":150},{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":250}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total Running Jobs","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","decimals":null,"editable":true,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":8,"x":16,"y":67},"height":"300px","id":3,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"max","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sidekiq_queue_size{environment=\"$environment\"} and on (fqdn) gitlab:redis_master","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{name}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":120,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Sidekiq Queue Size","tooltip":{"msResolution":false,"shared":false,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"editable":true,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":24,"x":0,"y":75},"height":"300px","id":39,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(sidekiq_running_jobs_count{name!~\"(ActiveJob|Devise).*\", environment=\"$environment\"}[1m]) and on (fqdn) gitlab:redis_master","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{name}}","metric":"sidekiq_enqueued_jobs_count","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]}],"thresholds":[{"colorMode":"warning","fill":false,"line":true,"op":"gt","value":150,"yaxis":"left"},{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":250,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Rate of Running Jobs","tooltip":{"msResolution":false,"shared":false,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":true,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":83},"id":63,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","fill":1,"gridPos":{"h":9,"w":23,"x":0,"y":60},"id":65,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":true,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node_netstat_Tcp_CurrEstab{type=\"sidekiq\",fqdn=~\".*besteffort.*\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{ fqdn }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Sidekiq TCP Connections","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"title":"Connections","type":"row"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":84},"id":53,"panels":[],"repeat":null,"title":"Jobs completion time - p99","type":"row"},{"cards":{"cardPadding":null,"cardRound":null},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateRdYlGn","exponent":0.5,"mode":"spectrum"},"dataFormat":"timeseries","datasource":null,"gridPos":{"h":7,"w":6,"x":0,"y":85},"heatmap":{},"hideZeroBuckets":false,"highlightCards":true,"id":29,"legend":{"show":false},"links":[],"options":{},"reverseYBuckets":false,"targets":[{"dsType":"influxdb","expr":"histogram_quantile(0.99, sum by (le) (rate(sidekiq_jobs_completion_seconds_bucket{priority=\"besteffort\", environment=\"$environment\"}[$__interval])))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"1m","intervalFactor":1,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":2,"tags":[]}],"timeFrom":"1h","title":"Best-effort jobs completion time -  p99","tooltip":{"show":true,"showHistogram":true},"type":"heatmap","xAxis":{"show":true},"xBucketNumber":null,"xBucketSize":"","yAxis":{"decimals":null,"format":"s","logBase":1,"max":null,"min":null,"show":true,"splitFactor":4},"yBucketBound":"auto","yBucketNumber":25,"yBucketSize":null},{"cards":{"cardPadding":null,"cardRound":null},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateRdYlGn","exponent":0.5,"mode":"spectrum"},"dataFormat":"timeseries","datasource":null,"gridPos":{"h":7,"w":6,"x":6,"y":85},"heatmap":{},"hideZeroBuckets":false,"highlightCards":true,"id":30,"legend":{"show":false},"links":[],"options":{},"reverseYBuckets":false,"targets":[{"dsType":"influxdb","expr":"histogram_quantile(0.99, rate(sidekiq_jobs_completion_time_seconds_bucket{priority=\"asap\", environment=\"$environment\"}[1m]))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":1,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":2,"tags":[]}],"timeFrom":"1h","title":"ASAP jobs completion time -  p99","tooltip":{"show":true,"showHistogram":true},"type":"heatmap","xAxis":{"show":true},"xBucketNumber":null,"xBucketSize":"","yAxis":{"decimals":null,"format":"s","logBase":1,"max":null,"min":null,"show":true,"splitFactor":4},"yBucketBound":"auto","yBucketNumber":25,"yBucketSize":null},{"cards":{"cardPadding":null,"cardRound":null},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateRdYlGn","exponent":0.5,"mode":"spectrum"},"dataFormat":"timeseries","datasource":null,"gridPos":{"h":7,"w":6,"x":12,"y":85},"heatmap":{},"hideZeroBuckets":false,"highlightCards":true,"id":31,"legend":{"show":false},"links":[],"options":{},"reverseYBuckets":false,"targets":[{"dsType":"influxdb","expr":"histogram_quantile(0.99, rate(sidekiq_jobs_completion_time_seconds_bucket{priority=\"realtime\", environment=\"$environment\"}[1m]))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":1,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":2,"tags":[]}],"timeFrom":"1h","title":"Real-time jobs completion time -  p99","tooltip":{"show":true,"showHistogram":true},"type":"heatmap","xAxis":{"show":true},"xBucketNumber":null,"xBucketSize":"","yAxis":{"decimals":null,"format":"s","logBase":1,"max":null,"min":null,"show":true,"splitFactor":4},"yBucketBound":"auto","yBucketNumber":25,"yBucketSize":null},{"cards":{"cardPadding":null,"cardRound":null},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateRdYlGn","exponent":0.5,"mode":"spectrum"},"dataFormat":"timeseries","datasource":"prometheus-01-inf-gprd","gridPos":{"h":7,"w":6,"x":18,"y":85},"heatmap":{},"hideZeroBuckets":false,"highlightCards":true,"id":34,"legend":{"show":false},"links":[],"options":{},"reverseYBuckets":false,"targets":[{"dsType":"influxdb","expr":"histogram_quantile(0.99, rate(sidekiq_jobs_completion_time_seconds_bucket{priority=\"elasticsearch\", environment=\"$environment\"}[1m]))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":1,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":2,"tags":[]}],"timeFrom":"1h","title":"Elasticsearch jobs completion time -  p99","tooltip":{"show":true,"showHistogram":true},"type":"heatmap","xAxis":{"show":true},"xBucketNumber":null,"xBucketSize":"","yAxis":{"decimals":null,"format":"s","logBase":1,"max":null,"min":null,"show":true,"splitFactor":4},"yBucketBound":"auto","yBucketNumber":25,"yBucketSize":null},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":92},"id":54,"panels":[],"repeat":null,"title":"Jobs to Retry","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"decimals":0,"editable":true,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":8,"x":0,"y":93},"height":"300px","id":10,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(max(sidekiq_jobs_to_be_retried_count{environment=\"$environment\"}) by (name))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"Total","metric":"sidekiq_enqueued_jobs_count","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":4,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total jobs to be Retried","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"decimals":0,"editable":true,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":8,"x":8,"y":93},"height":"300px","id":2,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"max(sidekiq_jobs_to_be_retried_count{environment=\"$environment\"}) by (name)","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{name}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":4,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Jobs to be Retried","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"decimals":0,"editable":true,"error":false,"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":8,"w":8,"x":16,"y":93},"height":"300px","id":1,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"sort":"max","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sidekiq_running_jobs_count{name!~\"(ActiveJob|Devise).*\", environment=\"$environment\"} and on (fqdn) gitlab:redis_master","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{name}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":4,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Running Jobs","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":101},"id":55,"panels":[],"repeat":null,"title":"Job Failures and Errors (mtail)","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":0,"y":102},"id":15,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(rate(sidekiq_jobs_returned_to_redis_total[5m]))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Jobs returned to Redis","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":4,"tags":[]},{"expr":"sum(rate(sidekiq_jobs_failed_total[5m]))","format":"time_series","intervalFactor":2,"legendFormat":"Failed jobs","refId":"B","step":4}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"rate of Job failures","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":8,"y":102},"id":16,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(rate(sidekiq_worker_ooms_total[5m]))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Worker OOMs","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":4,"tags":[]},{"expr":"sum(rate(sidekiq_workers_terminated_total[5m])) by (worker)","format":"time_series","intervalFactor":2,"legendFormat":"{{worker}} Terminated","refId":"B","step":4}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Rate of Worker Errors","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":109},"id":56,"panels":[],"repeat":null,"title":"Job completion times (mtail)","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":0,"y":110},"id":17,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"histogram_quantile(0.50, sum(rate(sidekiq_jobs_completion_time_seconds_bucket[5m])) by (le))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"50th percentile","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":4,"tags":[]},{"expr":"histogram_quantile(0.95, sum(rate(sidekiq_jobs_completion_time_seconds_bucket[5m])) by (le))","format":"time_series","intervalFactor":2,"legendFormat":"95th percentile","refId":"B","step":4},{"expr":"histogram_quantile(0.99, sum(rate(sidekiq_jobs_completion_time_seconds_bucket[5m])) by (le))","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"99th percentile","refId":"C","step":4}],"thresholds":[],"timeFrom":"1h","timeRegions":[],"timeShift":null,"title":"Job completion times","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"cards":{"cardPadding":null,"cardRound":null},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateRdYlGn","exponent":0.5,"mode":"spectrum"},"dataFormat":"timeseries","datasource":null,"gridPos":{"h":7,"w":8,"x":8,"y":110},"heatmap":{},"hideZeroBuckets":false,"highlightCards":true,"id":27,"legend":{"show":false},"links":[],"options":{},"reverseYBuckets":false,"targets":[{"dsType":"influxdb","expr":"histogram_quantile(0.95, rate(sidekiq_jobs_completion_time_seconds_bucket[1m]))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":4,"tags":[]}],"timeFrom":"1h","title":"Job completion time -  p95","tooltip":{"show":true,"showHistogram":true},"type":"heatmap","xAxis":{"show":true},"xBucketNumber":null,"xBucketSize":"","yAxis":{"decimals":null,"format":"s","logBase":10,"max":null,"min":null,"show":true,"splitFactor":4},"yBucketBound":"auto","yBucketNumber":null,"yBucketSize":100},{"cards":{"cardPadding":null,"cardRound":null},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateRdYlGn","exponent":0.5,"mode":"spectrum"},"dataFormat":"timeseries","datasource":null,"gridPos":{"h":7,"w":8,"x":16,"y":110},"heatmap":{},"hideZeroBuckets":false,"highlightCards":true,"id":28,"legend":{"show":false},"links":[],"options":{},"reverseYBuckets":false,"targets":[{"dsType":"influxdb","expr":"histogram_quantile(0.99, rate(sidekiq_jobs_completion_time_seconds_bucket[1m]))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":4,"tags":[]}],"timeFrom":"1h","title":"Job completion time -  p99","tooltip":{"show":true,"showHistogram":true},"type":"heatmap","xAxis":{"show":true},"xBucketNumber":null,"xBucketSize":"","yAxis":{"decimals":null,"format":"s","logBase":10,"max":null,"min":null,"show":true,"splitFactor":4},"yBucketBound":"auto","yBucketNumber":null,"yBucketSize":100}],"refresh":false,"schemaVersion":20,"style":"dark","tags":["sidekiq","triage"],"templating":{"list":[{"allValue":null,"current":{"selected":true,"text":"gprd","value":"gprd"},"hide":0,"includeAll":false,"label":"Environment","multi":false,"name":"environment","options":[{"selected":false,"text":"gprd","value":"gprd"},{"selected":true,"text":"gstg","value":"gstg"}],"query":"gprd,gstg","skipUrlSync":false,"type":"custom"},{"current":{"selected":true,"text":"prometheus-01-inf-gprd","value":"prometheus-01-inf-gprd"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"prometheus","options":[],"query":"prometheus","refresh":1,"regex":"/prometheus-01-inf-[[environment]]/","skipUrlSync":false,"type":"datasource"},{"current":{"selected":true,"text":"prometheus-app-01-inf-gprd","value":"prometheus-app-01-inf-gprd"},"hide":2,"includeAll":false,"label":"","multi":false,"name":"app_prometheus","options":[],"query":"prometheus","refresh":1,"regex":"/prometheus-app-01-inf-[[environment]]/","skipUrlSync":false,"type":"datasource"},{"allValue":null,"current":{"selected":true,"text":"All","value":"$__all"},"datasource":"$prometheus","definition":"label_values(instance:node_cpus:count{environment=\"$environment\", tier=\"sv\"}, priority)","hide":2,"includeAll":true,"label":null,"multi":false,"name":"priority","options":[],"query":"label_values(instance:node_cpus:count{environment=\"$environment\", tier=\"sv\"}, priority)","refresh":2,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"utc","title":"Sidekiq Stats","uid":"9GOIu9Siz","version":65}}