{"meta":{"type":"db","canSave":false,"canEdit":false,"canAdmin":false,"canStar":true,"slug":"general-feature-category-error-budgets","url":"/d/general-error_budgets/general-feature-category-error-budgets","expires":"0001-01-01T00:00:00Z","created":"2019-11-25T21:06:31Z","updated":"2019-11-25T22:05:26Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":19,"hasAcl":false,"isFolder":false,"folderId":699,"folderTitle":"General Metrics","folderUrl":"/dashboards/f/general/general-metrics","provisioned":false,"provisionedExternalId":""},"dashboard":{"__inputs":[],"__requires":[],"annotations":{"list":[]},"description":"Uploaded by andrewn at Mon Nov 25 22:05:25 UTC 2019","editable":false,"gnetId":null,"graphTooltip":1,"hideControls":false,"id":null,"links":[{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"api service","type":"link","url":"https://dashboards.gitlab.net/d/api-main/api-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"ci-runners service","type":"link","url":"https://dashboards.gitlab.net/d/ci-runners-main/ci-runners-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"frontend service","type":"link","url":"https://dashboards.gitlab.net/d/frontend-main/frontend-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"git service","type":"link","url":"https://dashboards.gitlab.net/d/git-main/git-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"gitaly service","type":"link","url":"https://dashboards.gitlab.net/d/gitaly-main/gitaly-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"monitoring service","type":"link","url":"https://dashboards.gitlab.net/d/monitoring-main/monitoring-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"pages service","type":"link","url":"https://dashboards.gitlab.net/d/general-service/service-platform-metrics?orgId=1\u0026var-type=pages"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"patroni service","type":"link","url":"https://dashboards.gitlab.net/d/patroni-main/patroni-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"pgbouncer service","type":"link","url":"https://dashboards.gitlab.net/d/pgbouncer-main/pgbouncer-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"redis service","type":"link","url":"https://dashboards.gitlab.net/d/redis-main/redis-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"redis-cache service","type":"link","url":"https://dashboards.gitlab.net/d/redis-cache-main/redis-cache-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"redis-sidekiq service","type":"link","url":"https://dashboards.gitlab.net/d/redis-sidekiq-main/redis-sidekiq-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"registry service","type":"link","url":"https://dashboards.gitlab.net/d/registry-main/registry-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"sidekiq service","type":"link","url":"https://dashboards.gitlab.net/d/sidekiq-main/sidekiq-overview?orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"web service","type":"link","url":"https://dashboards.gitlab.net/d/web-main/web-overview??orgId=1"},{"asDropdown":true,"icon":"dashboard","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"web-pages service","type":"link","url":"https://dashboards.gitlab.net/d/general-service/service-platform-metrics?orgId=1\u0026var-type=web-pages"},{"asDropdown":true,"icon":"external link","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"Platform Triage","type":"link","url":"https://dashboards.gitlab.net/d/general-triage/platform-triage?orgId=1"},{"asDropdown":true,"icon":"external link","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"Capacity Planning","type":"link","url":"https://dashboards.gitlab.net/d/general-capacity-planning/general-capacity-planning?orgId=1"}],"panels":[{"columns":[],"datasource":"$PROMETHEUS_DS","description":"","gridPos":{"h":8,"w":24,"x":0,"y":1},"id":2,"styles":[{"mappingType":1,"pattern":"Time","type":"hidden"},{"decimals":3,"mappingType":1,"pattern":"Value","type":"number","unit":"percentunit"}],"targets":[{"expr":"sort(\n  (\n    sum by (feature_category) (\n      rate(sidekiq_jobs_completion_seconds_bucket{job=\"gitlab-sidekiq\",latency_sensitive=\"yes\", environment=\"$environment\", type=\"sidekiq\", le=\"10\"}[$__range])\n      or\n      rate(sidekiq_jobs_completion_seconds_bucket{job=\"gitlab-sidekiq\",latency_sensitive=\"no\", environment=\"$environment\", type=\"sidekiq\", le=\"300\"}[$__range])\n    )\n  )\n  /\n  sum by (feature_category) (\n    rate(sidekiq_jobs_completion_seconds_bucket{job=\"gitlab-sidekiq\",environment=\"$environment\", type=\"sidekiq\", le=\"+Inf\"}[$__range])\n  )  \u003e 0\n)\n","format":"table","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"title":"Apdex by Feature Category","transform":"table","type":"table"},{"columns":[],"datasource":"$PROMETHEUS_DS","description":"","gridPos":{"h":8,"w":24,"x":0,"y":9},"id":3,"styles":[{"mappingType":1,"pattern":"Time","type":"hidden"},{"decimals":3,"mappingType":1,"pattern":"Value","type":"number","unit":"percentunit"}],"targets":[{"expr":"sort(\n  (\n    sum by (queue, external_dependencies, latency_sensitive, feature_category, boundary) (\n      rate(sidekiq_jobs_completion_seconds_bucket{job=\"gitlab-sidekiq\",latency_sensitive=\"yes\", environment=\"$environment\", type=\"sidekiq\", le=\"10\"}[$__range])\n      or\n      rate(sidekiq_jobs_completion_seconds_bucket{job=\"gitlab-sidekiq\",latency_sensitive=\"no\", environment=\"$environment\", type=\"sidekiq\", le=\"300\"}[$__range])\n    )\n  )\n  /\n  sum by (queue, external_dependencies, latency_sensitive, feature_category, boundary) (\n    rate(sidekiq_jobs_completion_seconds_bucket{job=\"gitlab-sidekiq\",environment=\"$environment\", type=\"sidekiq\", le=\"+Inf\"}[$__range])\n  ) \u003e 0\n)\n","format":"table","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"title":"Apdex by Queue","transform":"table","type":"table"},{"columns":[],"datasource":"$PROMETHEUS_DS","description":"","gridPos":{"h":8,"w":24,"x":0,"y":17},"id":4,"styles":[{"mappingType":1,"pattern":"Time","type":"hidden"},{"decimals":3,"mappingType":1,"pattern":"Value","type":"number","unit":"percentunit"}],"targets":[{"expr":"sort(\n  sum by (feature_category) (\n    rate(sidekiq_jobs_completion_seconds_count{job_status!=\"fail\", job=\"gitlab-sidekiq\",environment=\"$environment\", type=\"sidekiq\"}[$__range])\n  )\n  /\n  sum by (feature_category) (\n    rate(sidekiq_jobs_completion_seconds_count{job=\"gitlab-sidekiq\",environment=\"$environment\", type=\"sidekiq\"}[$__range]) \u003e 0\n  )\n)\n","format":"table","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"title":"Error Rate by Feature Category","transform":"table","type":"table"},{"columns":[],"datasource":"$PROMETHEUS_DS","description":"","gridPos":{"h":8,"w":24,"x":0,"y":25},"id":5,"styles":[{"mappingType":1,"pattern":"Time","type":"hidden"},{"decimals":3,"mappingType":1,"pattern":"Value","type":"number","unit":"percentunit"}],"targets":[{"expr":"sort(\n  sum by (queue, external_dependencies, latency_sensitive, feature_category, boundary) (\n    rate(sidekiq_jobs_completion_seconds_count{job_status!=\"fail\", job=\"gitlab-sidekiq\",environment=\"$environment\", type=\"sidekiq\"}[$__range])\n  )\n  /\n  sum by (queue, external_dependencies, latency_sensitive, feature_category, boundary) (\n    rate(sidekiq_jobs_completion_seconds_count{job=\"gitlab-sidekiq\",environment=\"$environment\", type=\"sidekiq\"}[$__range]) \u003e 0\n  )\n)\n","format":"table","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"title":"Error Rate by Feature Category","transform":"table","type":"table"}],"refresh":"","rows":[],"schemaVersion":16,"style":"dark","tags":["managed","general","feature_category"],"templating":{"list":[{"current":{"text":"Prometheus","value":"Prometheus"},"hide":0,"label":null,"name":"PROMETHEUS_DS","options":[],"query":"prometheus","refresh":1,"regex":"/(.*-gprd|Global)/","type":"datasource"},{"allValue":null,"current":{"text":"gprd","value":"gprd"},"datasource":"$PROMETHEUS_DS","hide":0,"includeAll":false,"label":null,"multi":false,"name":"environment","options":[],"query":"label_values(gitlab_service_ops:rate, environment)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-7d","to":"now"},"timepicker":{"refresh_intervals":[]},"timezone":"utc","title":"general: Feature Category Error Budgets","uid":"general-error_budgets","version":19}}