{"meta":{"type":"db","canSave":false,"canEdit":false,"canAdmin":false,"canStar":true,"slug":"general-feature-category-error-budgets","url":"/d/general-error-budgets/general-feature-category-error-budgets","expires":"0001-01-01T00:00:00Z","created":"2019-11-26T06:19:44Z","updated":"2020-04-29T13:15:41Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":22,"hasAcl":false,"isFolder":false,"folderId":699,"folderTitle":"General Metrics","folderUrl":"/dashboards/f/general/general-metrics","provisioned":false,"provisionedExternalId":""},"dashboard":{"__inputs":[],"__requires":[],"annotations":{"list":[]},"description":"Uploaded by https://gitlab.com/gitlab-com/runbooks/-/jobs/531718814 at Wed Apr 29 13:15:41 UTC 2020","editable":false,"gnetId":null,"graphTooltip":1,"hideControls":false,"id":null,"links":[{"asDropdown":true,"icon":"external link","includeVars":true,"keepTime":true,"tags":["managed","service overview"],"targetBlank":false,"title":"Service Overview Dashboards","type":"dashboards","url":""},{"asDropdown":true,"icon":"external link","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"Platform Triage","type":"link","url":"https://dashboards.gitlab.net/d/general-triage/platform-triage?orgId=1"},{"asDropdown":true,"icon":"external link","includeVars":false,"keepTime":true,"tags":"","targetBlank":false,"title":"Capacity Planning","type":"link","url":"https://dashboards.gitlab.net/d/general-capacity-planning/general-capacity-planning?orgId=1"}],"panels":[{"columns":[],"datasource":"$PROMETHEUS_DS","description":"","gridPos":{"h":12,"w":12,"x":0,"y":1},"id":2,"styles":[{"mappingType":1,"pattern":"Time","type":"hidden"},{"decimals":3,"mappingType":1,"pattern":"Value","type":"number","unit":"percentunit"},{"alias":"Queue","decimals":2,"link":true,"linkTooltip":"View queue details","linkUrl":"/d/sidekiq-queue-detail/sidekiq-queue-detail?orgId=1\u0026var-environment=$environment\u0026var-queue=${__cell}","mappingType":2,"pattern":"queue","type":"string","unit":"short"}],"targets":[{"expr":"sort_desc(\n  clamp_max(\n    sum by (feature_category) (\n      avg_over_time(gitlab_background_jobs:execution:apdex:ratio_6h{environment=\"$environment\", env=\"$environment\"}[$__range])\n      *\n      avg_over_time(gitlab_background_jobs:execution:ops:rate_6h{environment=\"$environment\", env=\"$environment\"}[$__range])\n    )\n    /\n      (\n      sum by(feature_category) (\n        avg_over_time(gitlab_background_jobs:execution:ops:rate_6h{environment=\"$environment\", env=\"$environment\"}[$__range])\n      )\n    ) \u003e 0,\n    1\n  )\n)\n","format":"table","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"title":"Apdex by Feature Category","type":"table"},{"columns":[],"datasource":"$PROMETHEUS_DS","description":"","gridPos":{"h":12,"w":12,"x":12,"y":1},"id":3,"styles":[{"mappingType":1,"pattern":"Time","type":"hidden"},{"decimals":3,"mappingType":1,"pattern":"Value","type":"number","unit":"percentunit"},{"alias":"Queue","decimals":2,"link":true,"linkTooltip":"View queue details","linkUrl":"/d/sidekiq-queue-detail/sidekiq-queue-detail?orgId=1\u0026var-environment=$environment\u0026var-queue=${__cell}","mappingType":2,"pattern":"queue","type":"string","unit":"short"}],"targets":[{"expr":"sort(\n  clamp_max(\n    sum by (feature_category) (\n      avg_over_time(gitlab_background_jobs:execution:error:rate_6h{environment=\"$environment\", env=\"$environment\"}[$__range])\n    )\n    /\n      (\n      sum by(feature_category) (\n        avg_over_time(gitlab_background_jobs:execution:ops:rate_6h{environment=\"$environment\", env=\"$environment\"}[$__range])\n      ) \u003e 0\n    ),\n    1\n  )\n)\n","format":"table","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"title":"Error Rate by Feature Category","type":"table"},{"columns":[],"datasource":"$PROMETHEUS_DS","description":"","gridPos":{"h":12,"w":12,"x":0,"y":13},"id":4,"styles":[{"mappingType":1,"pattern":"Time","type":"hidden"},{"decimals":3,"mappingType":1,"pattern":"Value","type":"number","unit":"percentunit"},{"alias":"Queue","decimals":2,"link":true,"linkTooltip":"View queue details","linkUrl":"/d/sidekiq-queue-detail/sidekiq-queue-detail?orgId=1\u0026var-environment=$environment\u0026var-queue=${__cell}","mappingType":2,"pattern":"queue","type":"string","unit":"short"}],"targets":[{"expr":"sort_desc(\n  clamp_max(\n    sum by (queue, feature_category) (\n      avg_over_time(gitlab_background_jobs:execution:apdex:ratio_6h{environment=\"$environment\", env=\"$environment\"}[$__range])\n      *\n      avg_over_time(gitlab_background_jobs:execution:ops:rate_6h{environment=\"$environment\", env=\"$environment\"}[$__range])\n    )\n    /\n      (\n      sum by(queue, feature_category) (\n        avg_over_time(gitlab_background_jobs:execution:ops:rate_6h{environment=\"$environment\", env=\"$environment\"}[$__range])\n      )\n    ) \u003e 0,\n    1\n  )\n)\n","format":"table","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"title":"Apdex by Queue","type":"table"},{"columns":[],"datasource":"$PROMETHEUS_DS","description":"","gridPos":{"h":12,"w":12,"x":12,"y":13},"id":5,"styles":[{"mappingType":1,"pattern":"Time","type":"hidden"},{"decimals":3,"mappingType":1,"pattern":"Value","type":"number","unit":"percentunit"},{"alias":"Queue","decimals":2,"link":true,"linkTooltip":"View queue details","linkUrl":"/d/sidekiq-queue-detail/sidekiq-queue-detail?orgId=1\u0026var-environment=$environment\u0026var-queue=${__cell}","mappingType":2,"pattern":"queue","type":"string","unit":"short"}],"targets":[{"expr":"sort(\n  clamp_max(\n    sum by (queue, feature_category) (\n      avg_over_time(gitlab_background_jobs:execution:error:rate_6h{environment=\"$environment\", env=\"$environment\"}[$__range])\n    )\n    /\n    (\n      sum by(queue, feature_category) (\n        avg_over_time(gitlab_background_jobs:execution:ops:rate_6h{environment=\"$environment\", env=\"$environment\"}[$__range])\n      )\n    ) \u003e 0,\n    1\n  )\n)\n","format":"table","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"title":"Error Rate by Queue","type":"table"}],"refresh":"","rows":[],"schemaVersion":16,"style":"dark","tags":["managed","general","feature_category"],"templating":{"list":[{"current":{"text":"Prometheus","value":"Prometheus"},"hide":0,"label":null,"name":"PROMETHEUS_DS","options":[],"query":"prometheus","refresh":1,"regex":"/(.*-gprd|Global|gprd-.*)/","type":"datasource"},{"allValue":null,"current":{"text":"gprd","value":"gprd"},"datasource":"$PROMETHEUS_DS","hide":0,"includeAll":false,"label":null,"multi":false,"name":"environment","options":[],"query":"label_values(gitlab_service_ops:rate, environment)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-7d","to":"now"},"timepicker":{"refresh_intervals":[]},"timezone":"utc","title":"general: Feature Category Error Budgets","uid":"general-error-budgets","version":22}}