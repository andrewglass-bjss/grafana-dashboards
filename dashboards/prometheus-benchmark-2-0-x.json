{"meta":{"type":"db","canSave":true,"canEdit":true,"canStar":true,"slug":"prometheus-benchmark-2-0-x","expires":"0001-01-01T00:00:00Z","created":"2018-04-24T10:55:54Z","updated":"2018-05-03T09:17:12Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":2},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"description":"Metrics useful for benchmarking and loadtesting Prometheus itself. Designed primarily for Prometheus 2.0.x","editable":true,"gnetId":3834,"graphTooltip":0,"hideControls":false,"id":null,"links":[],"refresh":"1m","rows":[{"collapse":false,"height":250,"panels":[{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833","Time series":"#70dbed"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"min_over_time(prometheus_tsdb_head_series{job=\"prometheus\",instance=\"$Prometheus:9090\"}[$__interval])","format":"time_series","intervalFactor":2,"legendFormat":"Min","metric":"prometheus_local_storage_memory_series","refId":"A","step":10},{"expr":"max_over_time(prometheus_tsdb_head_series{job=\"prometheus\",instance=\"$Prometheus:9090\"}[$__interval])","format":"time_series","intervalFactor":2,"legendFormat":"Max","refId":"B"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Head Time series","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":26,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"prometheus_tsdb_head_active_appenders{job=\"prometheus\",instance=\"$Prometheus:9090\"}","format":"time_series","intervalFactor":2,"legendFormat":"","metric":"prometheus_local_storage_memory_series","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Head Active Appenders","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"samples/s":"#e5a8e2"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_head_samples_appended_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"samples/s","metric":"prometheus_local_storage_ingested_samples_total","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Samples Appended/s","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Maintenance","titleSize":"h6"},{"collapse":false,"height":"250","panels":[{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833","To persist":"#9AC48A"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":0,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/Max.*/","fill":0}],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"prometheus_tsdb_head_chunks{job=\"prometheus\",instance=\"$Prometheus:9090\"}","format":"time_series","intervalFactor":2,"legendFormat":"Chunks","metric":"prometheus_local_storage_memory_chunks","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Head Chunks","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":4,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_head_chunks_created_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"Created","metric":"prometheus_local_storage_chunk_ops_total","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Head Chunks Created","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833","Removed":"#e5ac0e"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":25,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_head_chunks_removed_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"Removed","metric":"prometheus_local_storage_chunk_ops_total","refId":"B","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Head Chunks Removed","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Chunks","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max":"#447ebc","Max chunks":"#052B51","Max to persist":"#3F6833","Min":"#447ebc","Now":"#7eb26d"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":0,"id":28,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"Max","fillBelowTo":"Min","lines":false}],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"prometheus_tsdb_head_min_time{job=\"prometheus\",instance=\"$Prometheus:9090\"}","format":"time_series","intervalFactor":2,"legendFormat":"Min","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"A","step":10},{"expr":"time() * 1000","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"Now","refId":"C"},{"expr":"prometheus_tsdb_head_max_time{job=\"prometheus\",instance=\"$Prometheus:9090\"}","format":"time_series","intervalFactor":2,"legendFormat":"Max","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"B","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Head Time Range","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"dateTimeAsIso","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":29,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_head_gc_duration_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Head GC Time/s","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":14,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"Queue length","yaxis":2}],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"prometheus_tsdb_blocks_loaded{job=\"prometheus\",instance=\"$Prometheus:9090\"}","format":"time_series","intervalFactor":2,"legendFormat":"","metric":"prometheus_local_storage_indexing_batch_sizes_sum","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Blocks Loaded","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Dashboard Row","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Failed Compactions":"#bf1b00","Failed Reloads":"#bf1b00","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":30,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_reloads_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"Reloads","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"A","step":10},{"expr":"rate(prometheus_tsdb_reloads_failures_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])","format":"time_series","intervalFactor":2,"legendFormat":"Failed Reloads","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"B","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"TSDB Reloads/s","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Failed Compactions":"#bf1b00","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":31,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(tsdb_wal_fsync_duration_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m]) / rate(tsdb_wal_fsync_duration_seconds_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"WAL Fsync Latency","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Failed Compactions":"#bf1b00","Max chunks":"#052B51","Max to persist":"#3F6833","{instance=\"demo.robustperception.io:9090\",job=\"prometheus\"}":"#bf1b00"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":32,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(tsdb_wal_corruptions_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"WAL Corruptions/s","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Checkpoints","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Failed Compactions":"#bf1b00","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":19,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_compactions_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"Compactions","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"A","step":10},{"expr":"rate(prometheus_tsdb_compactions_failed_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])","format":"time_series","intervalFactor":2,"legendFormat":"Failed Compactions","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"B","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Compactions/s","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Allocated bytes":"#F9BA8F","Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833","RSS":"#890F02"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":8,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_compactions_triggered_total[10m])","format":"time_series","intervalFactor":2,"legendFormat":"Checkpoint duration","metric":"last","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Compactions Triggered/s","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":33,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_compaction_duration_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])","format":"time_series","intervalFactor":2,"legendFormat":"","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Compaction Time/s","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Dashboard Row","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":27,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_compaction_chunk_range_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m]) / rate(prometheus_tsdb_compaction_chunk_range_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])","format":"time_series","intervalFactor":2,"legendFormat":"","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"First Compaction, Avg Chunk Time Range","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"ms","label":"","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":34,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_compaction_chunk_samples_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m]) / rate(prometheus_tsdb_compaction_chunk_samples_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])","format":"time_series","intervalFactor":2,"legendFormat":"","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"First Compaction, Avg Chunk Samples","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":35,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_tsdb_compaction_chunk_size_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m]) / rate(prometheus_tsdb_compaction_chunk_samples_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])","format":"time_series","intervalFactor":2,"legendFormat":"","metric":"prometheus_local_storage_series_chunks_persisted_count","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"First Compaction, Avg Bytes/Sample","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Dashboard Row","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{"Allocated bytes":"#7EB26D","Allocated bytes - 1m max":"#BF1B00","Allocated bytes - 1m min":"#BF1B00","Allocated bytes - 5m max":"#BF1B00","Allocated bytes - 5m min":"#BF1B00","Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833","RSS":"#447EBC"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","decimals":null,"editable":true,"error":false,"fill":0,"id":6,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/-/","fill":0}],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"process_resident_memory_bytes{job=\"prometheus\",instance=\"$Prometheus:9090\"}","intervalFactor":2,"legendFormat":"RSS","metric":"process_resident_memory_bytes","refId":"B","step":10},{"expr":"prometheus_local_storage_target_heap_size_bytes{job=\"prometheus\",instance=\"$Prometheus:9090\"}","intervalFactor":2,"legendFormat":"Target heap size","metric":"go_memstats_alloc_bytes","refId":"D","step":10},{"expr":"go_memstats_next_gc_bytes{job=\"prometheus\",instance=\"$Prometheus:9090\"}","intervalFactor":2,"legendFormat":"Next GC","metric":"go_memstats_next_gc_bytes","refId":"C","step":10},{"expr":"go_memstats_alloc_bytes{job=\"prometheus\",instance=\"$Prometheus:9090\"}","intervalFactor":2,"legendFormat":"Allocated","metric":"go_memstats_alloc_bytes","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Memory","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Allocated bytes":"#F9BA8F","Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833","RSS":"#890F02"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":7,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(go_memstats_alloc_bytes_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])","intervalFactor":2,"legendFormat":"Allocated Bytes/s","metric":"go_memstats_alloc_bytes","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Allocations","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","decimals":2,"editable":true,"error":false,"fill":1,"id":9,"legend":{"alignAsTable":false,"avg":false,"current":false,"hideEmpty":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(process_cpu_seconds_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])","intervalFactor":2,"legendFormat":"Irate","metric":"prometheus_local_storage_ingested_samples_total","refId":"A","step":10},{"expr":"rate(process_cpu_seconds_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[5m])","intervalFactor":2,"legendFormat":"5m rate","metric":"prometheus_local_storage_ingested_samples_total","refId":"B","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"CPU","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":["avg"]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"RAM\u0026CPU","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":22,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":true,"steppedLine":false,"targets":[{"expr":"rate(prometheus_evaluator_iterations_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m]) - rate(prometheus_evaluator_iterations_skipped_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m]) - rate(prometheus_evaluator_iterations_missed_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"Iterations performed/s","metric":"prometheus_local_storage_memory_chunkdescs","refId":"A","step":10},{"expr":"rate(prometheus_evaluator_iterations_skipped_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])  ","format":"time_series","intervalFactor":2,"legendFormat":"Iterations missed/s","metric":"prometheus_local_storage_memory_chunkdescs","refId":"B","step":10},{"expr":"rate(prometheus_evaluator_iterations_missed_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"Iterations skipped/s","metric":"prometheus_local_storage_memory_chunkdescs","refId":"C","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Rule evaulation iterations","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":23,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(prometheus_evaluator_duration_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m]) / rate(prometheus_evaluator_duration_seconds_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"Rule evaluation duration","metric":"prometheus_local_storage_memory_chunkdescs","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Rule evaluation duration","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{"Chunks":"#1F78C1","Chunks to persist":"#508642","Max chunks":"#052B51","Max to persist":"#3F6833"},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","description":"Time spent in each mode, per second","editable":true,"error":false,"fill":1,"id":24,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":true,"steppedLine":false,"targets":[{"expr":"rate(prometheus_engine_query_duration_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"{{slice}}","metric":"prometheus_local_storage_memory_chunkdescs","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Query engine timings/s","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Dashboard Row","titleSize":"h6"},{"collapse":false,"height":250,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":10,"legend":{"alignAsTable":false,"avg":true,"current":false,"hideEmpty":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(node_disk_io_time_ms{job=\"node\",instance=\"$Prometheus:9100\"}[1m]) / 1000","intervalFactor":2,"legendFormat":"{{device}}","metric":"prometheus_local_storage_ingested_samples_total","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Disk Utilisation","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":["avg"]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":11,"legend":{"alignAsTable":false,"avg":false,"current":false,"hideEmpty":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"512 * (irate(node_disk_sectors_read{job=\"node\",instance=\"$Prometheus:9100\"}[1m]) + irate(node_disk_sectors_written{job=\"node\",instance=\"$Prometheus:9100\"}[1m]))","intervalFactor":2,"legendFormat":"{{device}}","metric":"prometheus_local_storage_ingested_samples_total","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Disk Throughput","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":["avg"]},"yaxes":[{"format":"Bps","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":1,"id":12,"legend":{"alignAsTable":false,"avg":false,"current":false,"hideEmpty":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"expr":"(irate(node_disk_writes_completed{job=\"node\",instance=\"$Prometheus:9100\"}[1m]) + irate(node_disk_reads_completed{job=\"node\",instance=\"$Prometheus:9100\"}[1m]))","format":"time_series","intervalFactor":2,"legendFormat":"{{device}}","metric":"prometheus_local_storage_ingested_samples_total","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Disk IOPS","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":["avg"]},"yaxes":[{"format":"iops","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Node","titleSize":"h6"}],"schemaVersion":14,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"tags":[],"text":"prometheus.gitlab.com","value":"prometheus.gitlab.com"},"datasource":"Prometheus in Azure","hide":0,"includeAll":false,"label":null,"multi":false,"name":"Prometheus","options":[],"query":"query_result(up{job=\"prometheus\"} == 1)","refresh":1,"regex":".*instance=\"([^\"]+):9090\".*","sort":0,"tagValuesQuery":null,"tags":[],"tagsQuery":null,"type":"query","useTags":false}]},"time":{"from":"now-24h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Prometheus Benchmark - 2.0.x","version":2}}