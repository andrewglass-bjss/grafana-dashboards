{"meta":{"type":"db","canSave":false,"canEdit":true,"canAdmin":false,"canStar":true,"slug":"gitaly-feature-status","url":"/d/000000199/gitaly-feature-status","expires":"0001-01-01T00:00:00Z","created":"2018-07-20T13:53:33Z","updated":"2021-01-27T11:39:01Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":13,"hasAcl":false,"isFolder":false,"folderId":185,"folderTitle":"Gitaly Service","folderUrl":"/dashboards/f/SRXyrrSmk/gitaly-service","provisioned":false,"provisionedExternalId":""},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":false,"iconColor":"#CA95E5","limit":100,"name":"feature-flags","showIn":0,"tags":["feature-flag","${environment}"],"type":"tags"}]},"editable":true,"gnetId":null,"graphTooltip":1,"id":null,"iteration":1611742410586,"links":[{"icon":"external link","keepTime":true,"tags":["GitalyMain"],"type":"dashboards"},{"icon":"external link","tags":[],"targetBlank":true,"title":"Kibana","type":"link","url":"https://kibana.gprd.gitlab.com/app/kibana#/discover?_a=%28index%3A'gitaly-*'%2Cquery%3A%28query_string%3A%28query%3A'grpc.method:$method'%29%29%29\u0026_g=%28refreshInterval:%28display:Off,pause:!f,value:0%29,time:%28from:now-1h,mode:quick,to:now%29%29"}],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","description":"This graph represents the percentage of requests\nthat succeed.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":0},"hiddenSeries":false,"id":10,"legend":{"avg":true,"current":false,"max":false,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"1 - (sum(gitaly:grpc_server_handled_total:error_rate1m{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}) without (grpc_code) / gitaly:grpc_server_handled_total:rate1m{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"Success Rate %","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":40,"tags":[]}],"thresholds":[{"colorMode":"warning","fill":false,"line":true,"op":"lt","value":0.999},{"colorMode":"critical","fill":true,"line":true,"op":"lt","value":0.9}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Success Ratio (SLA)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":2,"format":"percentunit","label":"","logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{"latency 2σ":"#967302","mean latency":"#1F78C1","p50 (1 week prior)":"#7EB26D"},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","decimals":2,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":7},"hiddenSeries":false,"id":13,"legend":{"avg":false,"current":false,"hideEmpty":true,"hideZero":true,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"mean latency (1 week prior)","color":"#FCE2DE","dashLength":4,"dashes":true,"linewidth":1,"spaceLength":2},{"alias":"latency 2σ","dashLength":3,"dashes":true,"linewidth":1,"spaceLength":1},{"alias":"mean latency","fill":4,"fillBelowTo":"latency 2σ"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"avg(1000 * avg(gitaly:grpc_server_handling_seconds:avg5m{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}))\n\n\n","format":"time_series","hide":false,"interval":"","intervalFactor":2,"legendFormat":"mean latency","refId":"C","step":40},{"expr":"\navg(1000 * avg(gitaly:grpc_server_handling_seconds:avg5m{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"} offset 1w))\n","format":"time_series","hide":false,"interval":"","intervalFactor":2,"legendFormat":"mean latency (1 week prior)","refId":"A","step":40},{"expr":"avg(1000 * avg(gitaly:grpc_server_handling_seconds:avg24h{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"} + 2 * gitaly:grpc_server_handling_seconds:avg5m_stddev_over_time24h{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}))\n","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"latency 2σ","refId":"B","step":40}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Mean Latency","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:285","format":"ms","label":"","logBase":10,"max":null,"min":null,"show":true},{"$$hashKey":"object:286","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":5,"w":8,"x":0,"y":14},"height":"200","hiddenSeries":false,"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(gitaly:grpc_server_handled_total:rate1m{job=\"gitaly\",environment=\"$environment\",grpc_method=\"$method\"}) by (grp_method)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{grpc_method}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":120,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total Rate (per second)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:238","format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"$$hashKey":"object:239","format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":5,"w":8,"x":8,"y":14},"height":"200","hiddenSeries":false,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"gitaly:grpc_server_handled_total:rate1m{job=\"gitaly\",environment=\"$environment\",grpc_method=\"$method\"} - sum(gitaly:grpc_server_handled_total:error_rate1m{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}) without (grpc_code)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{grpc_code}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":120,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Success Rate (per second)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","description":"","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":5,"w":8,"x":16,"y":14},"height":"200","hiddenSeries":false,"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[{"targetBlank":true,"title":"Gitaly Feature - Error Diagnostics","url":"/dashboard/db/gitaly-feature-error-diagnostics?$__url_time_range\u0026$__all_variables"}],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(gitaly:grpc_server_handled_total:error_rate1m{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}) by (grpc_code)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"{{grpc_code}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":120,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Failures Rate (per second)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{"Average":"#0a50a1"},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","decimals":2,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":19},"hiddenSeries":false,"id":6,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[{"targetBlank":true,"title":"Gitaly Feature Latency Detail","url":"/dashboard/db/gitaly-feature-latency-detail?$__url_time_range\u0026$__all_variables"}],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"Average","dashLength":2,"dashes":true,"spaceLength":1}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"histogram_quantile(0.99, sum(gitaly:grpc_server_handling_seconds_bucket:rate1m{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}) by (le)) * 1000","format":"time_series","interval":"","intervalFactor":4,"legendFormat":"p99","refId":"B","step":80},{"expr":"sum(grpc_server_handling_seconds_sum{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}) / sum(grpc_server_handling_seconds_count{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}) * 1000","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"Average","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"99th Percentile Latency","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:237","format":"ms","label":"","logBase":10,"max":null,"min":null,"show":true},{"$$hashKey":"object:238","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","decimals":2,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":25},"hiddenSeries":false,"id":8,"legend":{"avg":true,"current":false,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[{"targetBlank":true,"title":"Gitaly Feature Latency Detail","url":"/dashboard/db/gitaly-feature-latency-detail?$__url_time_range\u0026$__all_variables"}],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"histogram_quantile(0.95, sum(gitaly:grpc_server_handling_seconds_bucket:rate1m{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}) by (le)) * 1000","format":"time_series","interval":"","intervalFactor":4,"legendFormat":"p95 (File Server)","refId":"B","step":80}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"95th Percentile Latency","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ms","label":"","logBase":10,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{"p50 (1 week prior)":"#7EB26D"},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","decimals":2,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":31},"hiddenSeries":false,"id":7,"legend":{"avg":false,"current":false,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[{"targetBlank":true,"title":"Gitaly Feature Latency Detail","url":"/dashboard/db/gitaly-feature-latency-detail?$__url_time_range\u0026$__all_variables"}],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"p50 (1 week prior)","color":"#FCE2DE","dashLength":4,"dashes":true,"linewidth":1,"spaceLength":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"histogram_quantile(0.5, sum(gitaly:grpc_server_handling_seconds_bucket:rate1m{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}) by (le)) * 1000","format":"time_series","interval":"","intervalFactor":4,"legendFormat":"p50","refId":"C","step":80}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Median Latency","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ms","label":"","logBase":10,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{"last week":"#1F78C1"},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","decimals":2,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":37},"hiddenSeries":false,"id":5,"legend":{"avg":true,"current":false,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"last week","dashLength":4,"dashes":true,"linewidth":1,"spaceLength":1}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(grpc_server_handled_total{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}[1m]))","format":"time_series","interval":"","intervalFactor":4,"legendFormat":"now","refId":"B","step":80},{"expr":"sum(rate(grpc_server_handled_total{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}[1m] offset 1w))","format":"time_series","interval":"","intervalFactor":4,"legendFormat":"last week","refId":"A","step":80}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Calls per Second per Tier","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":43},"hiddenSeries":false,"id":11,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"rate (1m) -1w","color":"#3F2B5B","dashLength":3,"dashes":true,"fill":0,"spaceLength":1}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(gitaly:grpc_server_handled_total:rate1m {job=\"gitaly\", grpc_method=\"$method\"})\n","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"rate (1m)","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":40,"tags":[]},{"expr":"sum(gitaly:grpc_server_handled_total:rate1m{job=\"gitaly\", grpc_method=\"$method\"} offset 1w)","format":"time_series","intervalFactor":2,"legendFormat":"rate (1m) -1w","refId":"B","step":40}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Call Rate vs 1 week prior (log₁₀)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":10,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":5,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":50},"hiddenSeries":false,"id":12,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(rate(grpc_server_handled_total{job=\"gitaly\", environment=\"$environment\", grpc_method=\"$method\"}[10m])) BY (fqdn)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{ fqdn }}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":40,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Server Breakdown","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":2,"format":"ops","label":"","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":57},"hiddenSeries":false,"id":9,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"12 hour avg","dashLength":2,"dashes":true,"fill":0,"spaceLength":2},{"alias":"12 hour 2σ","color":"#99440A","dashLength":5,"dashes":true,"fill":0,"spaceLength":2},{"alias":"error rate","fillBelowTo":"12 hour 2σ"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"gitaly:grpc_server_handled_total:error_rate1m{job=\"gitaly\",environment=\"$environment\",grpc_method=\"$method\"}","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{ grpc_code }}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":40,"tags":[]},{"expr":"gitaly:grpc_server_handled_total:error_avg_rate12h{job=\"gitaly\",environment=\"$environment\",grpc_method=\"$method\"}","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"12 hour avg","refId":"B","step":40},{"expr":"gitaly:grpc_server_handled_total:error_avg_rate12h{job=\"gitaly\",environment=\"$environment\",grpc_method=\"$method\"} +  gitaly:grpc_server_handled_total:error_rate1m_stddev_over_time12h{environment=\"gitaly\", job=\"$job\"}","format":"time_series","intervalFactor":2,"legendFormat":"12 hour 2σ","refId":"C","step":40}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"12 hour error anomaly rates (log₁₀)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":10,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$prometheus","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":64},"hiddenSeries":false,"id":14,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(gitaly_rate_limiting_in_progress{grpc_method=\"$method\", environment=\"$environment\"}) by (fqdn)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"In Progress - {{ fqdn }}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"sum(gitaly_rate_limiting_queued{grpc_method=\"$method\", environment=\"$environment\"}) by (fqdn)","format":"time_series","intervalFactor":2,"legendFormat":"Queued - {{ fqdn }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Rate Limiting","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"30s","schemaVersion":26,"style":"dark","tags":["Gitaly"],"templating":{"list":[{"allValue":null,"current":{"text":"gprd","value":"gprd"},"hide":0,"includeAll":false,"label":null,"multi":false,"name":"environment","options":[{"selected":true,"text":"gprd","value":"gprd"},{"selected":false,"text":"gstg","value":"gstg"}],"query":"gprd,gstg","skipUrlSync":false,"type":"custom"},{"allValue":null,"current":{"selected":false,"text":"GetInfoAttributes","value":"GetInfoAttributes"},"datasource":"$prometheus","definition":"","hide":0,"includeAll":false,"label":"method","multi":false,"name":"method","options":[],"query":"grpc_server_handled_total{grpc_code=\"OK\"}","refresh":2,"regex":"/.*grpc_method=\"([^\"]*).*/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"current":{"text":"prometheus-01-inf-gprd","value":"prometheus-01-inf-gprd"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"prometheus","options":[],"query":"prometheus","refresh":1,"regex":"prometheus-01-inf-[[environment]]","skipUrlSync":false,"type":"datasource"}]},"time":{"from":"now-12h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"utc","title":"Gitaly Feature Status","uid":"000000199","version":13}}