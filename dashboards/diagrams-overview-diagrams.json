{"meta":{"type":"db","canSave":false,"canEdit":true,"canAdmin":false,"canStar":true,"slug":"diagrams-overview-diagrams","url":"/d/diagrams-main/diagrams-overview-diagrams","expires":"0001-01-01T00:00:00Z","created":"2021-09-10T09:40:54Z","updated":"2021-09-10T14:26:22Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":4,"hasAcl":false,"isFolder":false,"folderId":1821,"folderTitle":"diagrams","folderUrl":"/dashboards/f/diagrams/diagrams","provisioned":false,"provisionedExternalId":""},"dashboard":{"__inputs":[],"__requires":[],"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":false,"hide":false,"iconColor":"#96D98D","name":"deploy","showIn":0,"tags":["deploy","$environment"],"type":"tags"},{"builtIn":1,"datasource":"-- Grafana --","enable":false,"hide":false,"iconColor":"#FFEE52","name":"canary-deploy","showIn":0,"tags":["deploy","${environment}-cny"],"type":"tags"},{"builtIn":1,"datasource":"-- Grafana --","enable":false,"hide":false,"iconColor":"#CA95E5","name":"feature-flags","showIn":0,"tags":["feature-flag","${environment}"],"type":"tags"}]},"description":"Uploaded by https://gitlab.com/gitlab-com/runbooks/-/jobs/1580394839 at Fri Sep 10 14:26:22 UTC 2021","editable":false,"gnetId":null,"graphTooltip":1,"hideControls":false,"id":null,"links":[],"panels":[{"collapse":true,"collapsed":true,"id":2,"panels":[{"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"composites":[],"content":"graph LR\n  subgraph db\n  patroni\n  patroni-registry\n  pgbouncer\n  pgbouncer-registry\n  postgres-archive\n  redis\n  redis-cache\n  redis-sidekiq\n  redis-tracechunks\nend\n\nsubgraph inf\n  jaeger\n  kube\n  logging\n  monitoring\n  nat\n  search\n  sentry\nend\n\nsubgraph lb\n  frontend\n  pages\n  waf\nend\n\nsubgraph runners\n  ci-runners\nend\n\nsubgraph stor\n  gitaly\n  praefect\nend\n\nsubgraph sv\n  api\n  camoproxy\n  consul\n  git\n  kas\n  mailroom\n  nginx\n  plantuml\n  pvs\n  registry\n  sidekiq\n  web\n  web-pages\n  websockets\n  woodhouse\nend\n\n\n  api --\u003e gitaly\napi --\u003e patroni\napi --\u003e pgbouncer\napi --\u003e praefect\napi --\u003e redis\napi --\u003e redis-cache\napi --\u003e redis-sidekiq\napi --\u003e redis-tracechunks\nci-runners --\u003e api\nfrontend --\u003e api\nfrontend --\u003e git\nfrontend --\u003e registry\nfrontend --\u003e web\ngit --\u003e gitaly\ngit --\u003e patroni\ngit --\u003e pgbouncer\ngit --\u003e praefect\ngit --\u003e redis\ngit --\u003e redis-cache\ngit --\u003e redis-sidekiq\ngitaly --\u003e gitaly\nkas --\u003e api\nkas --\u003e gitaly\nkas --\u003e praefect\nkas --\u003e redis\nmailroom --\u003e patroni\nmailroom --\u003e pgbouncer\nnginx --\u003e api\nnginx --\u003e web\npgbouncer --\u003e patroni\npgbouncer-registry --\u003e patroni\npraefect --\u003e gitaly\nregistry --\u003e api\nsidekiq --\u003e gitaly\nsidekiq --\u003e patroni\nsidekiq --\u003e pgbouncer\nsidekiq --\u003e praefect\nsidekiq --\u003e redis\nsidekiq --\u003e redis-cache\nsidekiq --\u003e redis-sidekiq\nsidekiq --\u003e redis-tracechunks\nwaf --\u003e frontend\nweb --\u003e gitaly\nweb --\u003e patroni\nweb --\u003e pgbouncer\nweb --\u003e praefect\nweb --\u003e redis\nweb --\u003e redis-cache\nweb --\u003e redis-sidekiq\nwebsockets --\u003e gitaly\nwebsockets --\u003e patroni\nwebsockets --\u003e pgbouncer\nwebsockets --\u003e praefect\nwebsockets --\u003e redis\nwebsockets --\u003e redis-cache\nwebsockets --\u003e redis-sidekiq\n","datasource":"$PROMETHEUS_DS","decimals":3,"format":"percentunit","graphId":"diagram_errors","gridPos":{"h":20,"w":24,"x":0,"y":0},"id":3,"init":{"arrowMarkerAbsolute":true,"cloneCssStyles":true,"flowchart":{"htmlLabels":true,"useMaxWidth":true},"gantt":{"barGap":4,"barHeight":20,"fontFamily":"\"Open-Sans\", \"sans-serif\"","fontSize":11,"gridLineStartPadding":35,"leftPadding":75,"numberSectionStyles":3,"titleTopMargin":25,"topPadding":50},"logLevel":3,"sequenceDiagram":{"actorMargin":50,"bottomMarginAdj":1,"boxMargin":10,"boxTextMargin":5,"diagramMarginX":50,"diagramMarginY":10,"height":65,"messageMargin":35,"mirrorActors":true,"noteMargin":10,"useMaxWidth":true,"width":150},"startOnLoad":false},"interval":"","legend":{"avg":true,"current":true,"gradient":{"enabled":true,"show":true},"max":true,"min":true,"show":false,"total":true},"mappingType":1,"mappingTypes":[],"maxDataPoints":100,"maxWidth":false,"mermaidServiceUrl":"","metricCharacterReplacements":[],"moddedSeriesVal":0,"mode":"content","nullPointMode":"connected","options":{},"seriesOverrides":[],"style":"","targets":[{"expr":"clamp_max(\n  max_over_time(gitlab_service_errors:ratio_5m{environment=\"$environment\",monitor=\"global\",stage=\"$stage\"}[$__range])\n,\n  1\n)\n","format":"time_series","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"{{ type }}"}],"thresholds":"0,0.001","title":"System Diagram (Keyed by Error Rates)","type":"jdbranham-diagram-panel","valueMaps":[],"valueName":"current","valueOptions":["avg","min","max","total","current"]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"System Diagram (Keyed by Error Rates)","titleSize":"h6","type":"row"},{"collapse":true,"collapsed":true,"id":4,"panels":[{"colors":["rgba(245, 54, 54, 0.9)","#FF9830","#73BF69"],"composites":[],"content":"graph LR\n  subgraph db\n  patroni\n  patroni-registry\n  pgbouncer\n  pgbouncer-registry\n  postgres-archive\n  redis\n  redis-cache\n  redis-sidekiq\n  redis-tracechunks\nend\n\nsubgraph inf\n  jaeger\n  kube\n  logging\n  monitoring\n  nat\n  search\n  sentry\nend\n\nsubgraph lb\n  frontend\n  pages\n  waf\nend\n\nsubgraph runners\n  ci-runners\nend\n\nsubgraph stor\n  gitaly\n  praefect\nend\n\nsubgraph sv\n  api\n  camoproxy\n  consul\n  git\n  kas\n  mailroom\n  nginx\n  plantuml\n  pvs\n  registry\n  sidekiq\n  web\n  web-pages\n  websockets\n  woodhouse\nend\n\n\n  api --\u003e gitaly\napi --\u003e patroni\napi --\u003e pgbouncer\napi --\u003e praefect\napi --\u003e redis\napi --\u003e redis-cache\napi --\u003e redis-sidekiq\napi --\u003e redis-tracechunks\nci-runners --\u003e api\nfrontend --\u003e api\nfrontend --\u003e git\nfrontend --\u003e registry\nfrontend --\u003e web\ngit --\u003e gitaly\ngit --\u003e patroni\ngit --\u003e pgbouncer\ngit --\u003e praefect\ngit --\u003e redis\ngit --\u003e redis-cache\ngit --\u003e redis-sidekiq\ngitaly --\u003e gitaly\nkas --\u003e api\nkas --\u003e gitaly\nkas --\u003e praefect\nkas --\u003e redis\nmailroom --\u003e patroni\nmailroom --\u003e pgbouncer\nnginx --\u003e api\nnginx --\u003e web\npgbouncer --\u003e patroni\npgbouncer-registry --\u003e patroni\npraefect --\u003e gitaly\nregistry --\u003e api\nsidekiq --\u003e gitaly\nsidekiq --\u003e patroni\nsidekiq --\u003e pgbouncer\nsidekiq --\u003e praefect\nsidekiq --\u003e redis\nsidekiq --\u003e redis-cache\nsidekiq --\u003e redis-sidekiq\nsidekiq --\u003e redis-tracechunks\nwaf --\u003e frontend\nweb --\u003e gitaly\nweb --\u003e patroni\nweb --\u003e pgbouncer\nweb --\u003e praefect\nweb --\u003e redis\nweb --\u003e redis-cache\nweb --\u003e redis-sidekiq\nwebsockets --\u003e gitaly\nwebsockets --\u003e patroni\nwebsockets --\u003e pgbouncer\nwebsockets --\u003e praefect\nwebsockets --\u003e redis\nwebsockets --\u003e redis-cache\nwebsockets --\u003e redis-sidekiq\n","datasource":"$PROMETHEUS_DS","decimals":3,"format":"percentunit","graphId":"diagram_apdex","gridPos":{"h":20,"w":24,"x":0,"y":1000},"id":5,"init":{"arrowMarkerAbsolute":true,"cloneCssStyles":true,"flowchart":{"htmlLabels":true,"useMaxWidth":true},"gantt":{"barGap":4,"barHeight":20,"fontFamily":"\"Open-Sans\", \"sans-serif\"","fontSize":11,"gridLineStartPadding":35,"leftPadding":75,"numberSectionStyles":3,"titleTopMargin":25,"topPadding":50},"logLevel":3,"sequenceDiagram":{"actorMargin":50,"bottomMarginAdj":1,"boxMargin":10,"boxTextMargin":5,"diagramMarginX":50,"diagramMarginY":10,"height":65,"messageMargin":35,"mirrorActors":true,"noteMargin":10,"useMaxWidth":true,"width":150},"startOnLoad":false},"interval":"","legend":{"avg":true,"current":true,"gradient":{"enabled":true,"show":true},"max":true,"min":true,"show":false,"total":true},"mappingType":1,"mappingTypes":[],"maxDataPoints":100,"maxWidth":false,"mermaidServiceUrl":"","metricCharacterReplacements":[],"moddedSeriesVal":0,"mode":"content","nullPointMode":"connected","options":{},"seriesOverrides":[],"style":"","targets":[{"expr":"min_over_time(gitlab_service_apdex:ratio_5m{environment=\"$environment\",monitor=\"global\",stage=\"$stage\"}[$__range])\n","format":"time_series","instant":true,"interval":"1m","intervalFactor":3,"legendFormat":"{{ type }}"}],"thresholds":"0.99,0.995,0.999","title":"System Diagram (Keyed by Apdex/Latency Scores)","type":"jdbranham-diagram-panel","valueMaps":[],"valueName":"current","valueOptions":["avg","min","max","total","current"]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"System Diagram (Keyed by Apdex/Latency Scores)","titleSize":"h6","type":"row"},{"collapse":true,"collapsed":true,"id":6,"panels":[{"colors":[],"composites":[],"content":"graph LR\n  subgraph db\n  patroni-registry[\"patroni-registry (Level 1)\"]\n  patroni[\"patroni (Level 3)\"]\n  pgbouncer-registry[\"pgbouncer-registry (Level 1)\"]\n  pgbouncer[\"pgbouncer (Level 1)\"]\n  postgres-archive[\"postgres-archive (Level 0)\"]\n  redis-cache[\"redis-cache (Level 3)\"]\n  redis-sidekiq[\"redis-sidekiq (Level 2)\"]\n  redis-tracechunks[\"redis-tracechunks (Level 2)\"]\n  redis[\"redis (Level 2)\"]\nend\n\nsubgraph inf\n  jaeger[\"jaeger (Level 3)\"]\n  kube[\"kube (Level 0)\"]\n  logging[\"logging (Level 0)\"]\n  monitoring[\"monitoring (Level 3)\"]\n  nat[\"nat (Level 0)\"]\n  search[\"search (Level 0)\"]\n  sentry[\"sentry (Level 0)\"]\nend\n\nsubgraph lb\n  frontend[\"frontend (Level 3)\"]\n  pages[\"pages (Level 0)\"]\n  waf[\"waf (Level 0)\"]\nend\n\nsubgraph runners\n  ci-runners[\"ci-runners (Level 2)\"]\nend\n\nsubgraph stor\n  gitaly[\"gitaly (Level 3)\"]\n  praefect[\"praefect (Level 3)\"]\nend\n\nsubgraph sv\n  api[\"api (Level 3)\"]\n  camoproxy[\"camoproxy (Level 1)\"]\n  consul[\"consul (Level 0)\"]\n  git[\"git (Level 3)\"]\n  kas[\"kas (Level 1)\"]\n  mailroom[\"mailroom (Level 0)\"]\n  nginx[\"nginx (Level 0)\"]\n  plantuml[\"plantuml (Level 0)\"]\n  pvs[\"pvs (Level 3)\"]\n  registry[\"registry (Level 3)\"]\n  sidekiq[\"sidekiq (Level 3)\"]\n  web-pages[\"web-pages (Level 3)\"]\n  web[\"web (Level 3)\"]\n  websockets[\"websockets (Level 1)\"]\n  woodhouse[\"woodhouse (Level 3)\"]\nend\n\n\n  api[\"api (Level 3)\"] --\u003e gitaly\napi[\"api (Level 3)\"] --\u003e patroni\napi[\"api (Level 3)\"] --\u003e pgbouncer\napi[\"api (Level 3)\"] --\u003e praefect\napi[\"api (Level 3)\"] --\u003e redis\napi[\"api (Level 3)\"] --\u003e redis-cache\napi[\"api (Level 3)\"] --\u003e redis-sidekiq\napi[\"api (Level 3)\"] --\u003e redis-tracechunks\nci-runners[\"ci-runners (Level 2)\"] --\u003e api\nfrontend[\"frontend (Level 3)\"] --\u003e api\nfrontend[\"frontend (Level 3)\"] --\u003e git\nfrontend[\"frontend (Level 3)\"] --\u003e registry\nfrontend[\"frontend (Level 3)\"] --\u003e web\ngit[\"git (Level 3)\"] --\u003e gitaly\ngit[\"git (Level 3)\"] --\u003e patroni\ngit[\"git (Level 3)\"] --\u003e pgbouncer\ngit[\"git (Level 3)\"] --\u003e praefect\ngit[\"git (Level 3)\"] --\u003e redis\ngit[\"git (Level 3)\"] --\u003e redis-cache\ngit[\"git (Level 3)\"] --\u003e redis-sidekiq\ngitaly[\"gitaly (Level 3)\"] --\u003e gitaly\nkas[\"kas (Level 1)\"] --\u003e api\nkas[\"kas (Level 1)\"] --\u003e gitaly\nkas[\"kas (Level 1)\"] --\u003e praefect\nkas[\"kas (Level 1)\"] --\u003e redis\nmailroom[\"mailroom (Level 0)\"] --\u003e patroni\nmailroom[\"mailroom (Level 0)\"] --\u003e pgbouncer\nnginx[\"nginx (Level 0)\"] --\u003e api\nnginx[\"nginx (Level 0)\"] --\u003e web\npgbouncer[\"pgbouncer (Level 1)\"] --\u003e patroni\npgbouncer-registry[\"pgbouncer-registry (Level 1)\"] --\u003e patroni\npraefect[\"praefect (Level 3)\"] --\u003e gitaly\nregistry[\"registry (Level 3)\"] --\u003e api\nsidekiq[\"sidekiq (Level 3)\"] --\u003e gitaly\nsidekiq[\"sidekiq (Level 3)\"] --\u003e patroni\nsidekiq[\"sidekiq (Level 3)\"] --\u003e pgbouncer\nsidekiq[\"sidekiq (Level 3)\"] --\u003e praefect\nsidekiq[\"sidekiq (Level 3)\"] --\u003e redis\nsidekiq[\"sidekiq (Level 3)\"] --\u003e redis-cache\nsidekiq[\"sidekiq (Level 3)\"] --\u003e redis-sidekiq\nsidekiq[\"sidekiq (Level 3)\"] --\u003e redis-tracechunks\nwaf[\"waf (Level 0)\"] --\u003e frontend\nweb[\"web (Level 3)\"] --\u003e gitaly\nweb[\"web (Level 3)\"] --\u003e patroni\nweb[\"web (Level 3)\"] --\u003e pgbouncer\nweb[\"web (Level 3)\"] --\u003e praefect\nweb[\"web (Level 3)\"] --\u003e redis\nweb[\"web (Level 3)\"] --\u003e redis-cache\nweb[\"web (Level 3)\"] --\u003e redis-sidekiq\nwebsockets[\"websockets (Level 1)\"] --\u003e gitaly\nwebsockets[\"websockets (Level 1)\"] --\u003e patroni\nwebsockets[\"websockets (Level 1)\"] --\u003e pgbouncer\nwebsockets[\"websockets (Level 1)\"] --\u003e praefect\nwebsockets[\"websockets (Level 1)\"] --\u003e redis\nwebsockets[\"websockets (Level 1)\"] --\u003e redis-cache\nwebsockets[\"websockets (Level 1)\"] --\u003e redis-sidekiq\n","datasource":"$PROMETHEUS_DS","decimals":3,"format":"percentunit","graphId":"diagram_maturity","gridPos":{"h":20,"w":24,"x":0,"y":2000},"id":7,"init":{"arrowMarkerAbsolute":true,"cloneCssStyles":true,"flowchart":{"htmlLabels":true,"useMaxWidth":true},"gantt":{"barGap":4,"barHeight":20,"fontFamily":"\"Open-Sans\", \"sans-serif\"","fontSize":11,"gridLineStartPadding":35,"leftPadding":75,"numberSectionStyles":3,"titleTopMargin":25,"topPadding":50},"logLevel":3,"sequenceDiagram":{"actorMargin":50,"bottomMarginAdj":1,"boxMargin":10,"boxTextMargin":5,"diagramMarginX":50,"diagramMarginY":10,"height":65,"messageMargin":35,"mirrorActors":true,"noteMargin":10,"useMaxWidth":true,"width":150},"startOnLoad":false},"interval":"","legend":{"avg":true,"current":true,"gradient":{"enabled":true,"show":true},"max":true,"min":true,"show":false,"total":true},"mappingType":1,"mappingTypes":[],"maxDataPoints":100,"maxWidth":false,"mermaidServiceUrl":"","metricCharacterReplacements":[],"moddedSeriesVal":0,"mode":"content","nullPointMode":"connected","options":{},"seriesOverrides":[],"style":"","targets":[],"thresholds":"","title":"System Diagram (Keyed by Maturity Model)","type":"jdbranham-diagram-panel","valueMaps":[],"valueName":"current","valueOptions":["avg","min","max","total","current"]},{"content":"| Service | Maturity level | Outward | Inward |\n | --- | --- | --- | --- |\n | [api](https://dashboards.gitlab.net/d/api-main) | Level 3 | [gitaly (Level 3)](https://dashboards.gitlab.net/d/gitaly-main), [patroni (Level 3)](https://dashboards.gitlab.net/d/patroni-main), [pgbouncer (Level 1)](https://dashboards.gitlab.net/d/pgbouncer-main), [praefect (Level 3)](https://dashboards.gitlab.net/d/praefect-main), [redis (Level 2)](https://dashboards.gitlab.net/d/redis-main), [redis-cache (Level 3)](https://dashboards.gitlab.net/d/redis-cache-main), [redis-sidekiq (Level 2)](https://dashboards.gitlab.net/d/redis-sidekiq-main), [redis-tracechunks (Level 2)](https://dashboards.gitlab.net/d/redis-tracechunks-main) | [ci-runners (Level 2)](https://dashboards.gitlab.net/d/ci-runners-main), [frontend (Level 3)](https://dashboards.gitlab.net/d/frontend-main), [kas (Level 1)](https://dashboards.gitlab.net/d/kas-main), [nginx (Level 0)](https://dashboards.gitlab.net/d/nginx-main), [registry (Level 3)](https://dashboards.gitlab.net/d/registry-main) |\n | [camoproxy](https://dashboards.gitlab.net/d/camoproxy-main) | Level 1 |  |  |\n | [ci-runners](https://dashboards.gitlab.net/d/ci-runners-main) | Level 2 | [api (Level 3)](https://dashboards.gitlab.net/d/api-main) |  |\n | [consul](https://dashboards.gitlab.net/d/consul-main) | Level 0 |  |  |\n | [frontend](https://dashboards.gitlab.net/d/frontend-main) | Level 3 | [api (Level 3)](https://dashboards.gitlab.net/d/api-main), [git (Level 3)](https://dashboards.gitlab.net/d/git-main), [registry (Level 3)](https://dashboards.gitlab.net/d/registry-main), [web (Level 3)](https://dashboards.gitlab.net/d/web-main) | [waf (Level 0)](https://dashboards.gitlab.net/d/waf-main) |\n | [git](https://dashboards.gitlab.net/d/git-main) | Level 3 | [gitaly (Level 3)](https://dashboards.gitlab.net/d/gitaly-main), [patroni (Level 3)](https://dashboards.gitlab.net/d/patroni-main), [pgbouncer (Level 1)](https://dashboards.gitlab.net/d/pgbouncer-main), [praefect (Level 3)](https://dashboards.gitlab.net/d/praefect-main), [redis (Level 2)](https://dashboards.gitlab.net/d/redis-main), [redis-cache (Level 3)](https://dashboards.gitlab.net/d/redis-cache-main), [redis-sidekiq (Level 2)](https://dashboards.gitlab.net/d/redis-sidekiq-main) | [frontend (Level 3)](https://dashboards.gitlab.net/d/frontend-main) |\n | [gitaly](https://dashboards.gitlab.net/d/gitaly-main) | Level 3 |  | [api (Level 3)](https://dashboards.gitlab.net/d/api-main), [git (Level 3)](https://dashboards.gitlab.net/d/git-main), [kas (Level 1)](https://dashboards.gitlab.net/d/kas-main), [praefect (Level 3)](https://dashboards.gitlab.net/d/praefect-main), [sidekiq (Level 3)](https://dashboards.gitlab.net/d/sidekiq-main), [web (Level 3)](https://dashboards.gitlab.net/d/web-main), [websockets (Level 1)](https://dashboards.gitlab.net/d/websockets-main) |\n | [jaeger](https://dashboards.gitlab.net/d/jaeger-main) | Level 3 |  |  |\n | [kas](https://dashboards.gitlab.net/d/kas-main) | Level 1 | [api (Level 3)](https://dashboards.gitlab.net/d/api-main), [gitaly (Level 3)](https://dashboards.gitlab.net/d/gitaly-main), [praefect (Level 3)](https://dashboards.gitlab.net/d/praefect-main), [redis (Level 2)](https://dashboards.gitlab.net/d/redis-main) |  |\n | [kube](https://dashboards.gitlab.net/d/kube-main) | Level 0 |  |  |\n | [logging](https://dashboards.gitlab.net/d/logging-main) | Level 0 |  |  |\n | [mailroom](https://dashboards.gitlab.net/d/mailroom-main) | Level 0 | [patroni (Level 3)](https://dashboards.gitlab.net/d/patroni-main), [pgbouncer (Level 1)](https://dashboards.gitlab.net/d/pgbouncer-main) |  |\n | [monitoring](https://dashboards.gitlab.net/d/monitoring-main) | Level 3 |  |  |\n | [nat](https://dashboards.gitlab.net/d/nat-main) | Level 0 |  |  |\n | [nginx](https://dashboards.gitlab.net/d/nginx-main) | Level 0 | [api (Level 3)](https://dashboards.gitlab.net/d/api-main), [web (Level 3)](https://dashboards.gitlab.net/d/web-main) |  |\n | [pages](https://dashboards.gitlab.net/d/pages-main) | Level 0 |  |  |\n | [patroni](https://dashboards.gitlab.net/d/patroni-main) | Level 3 |  | [api (Level 3)](https://dashboards.gitlab.net/d/api-main), [git (Level 3)](https://dashboards.gitlab.net/d/git-main), [mailroom (Level 0)](https://dashboards.gitlab.net/d/mailroom-main), [pgbouncer (Level 1)](https://dashboards.gitlab.net/d/pgbouncer-main), [pgbouncer-registry (Level 1)](https://dashboards.gitlab.net/d/pgbouncer-registry-main), [sidekiq (Level 3)](https://dashboards.gitlab.net/d/sidekiq-main), [web (Level 3)](https://dashboards.gitlab.net/d/web-main), [websockets (Level 1)](https://dashboards.gitlab.net/d/websockets-main) |\n | [patroni-registry](https://dashboards.gitlab.net/d/patroni-registry-main) | Level 1 |  |  |\n | [pgbouncer](https://dashboards.gitlab.net/d/pgbouncer-main) | Level 1 | [patroni (Level 3)](https://dashboards.gitlab.net/d/patroni-main) | [api (Level 3)](https://dashboards.gitlab.net/d/api-main), [git (Level 3)](https://dashboards.gitlab.net/d/git-main), [mailroom (Level 0)](https://dashboards.gitlab.net/d/mailroom-main), [sidekiq (Level 3)](https://dashboards.gitlab.net/d/sidekiq-main), [web (Level 3)](https://dashboards.gitlab.net/d/web-main), [websockets (Level 1)](https://dashboards.gitlab.net/d/websockets-main) |\n | [pgbouncer-registry](https://dashboards.gitlab.net/d/pgbouncer-registry-main) | Level 1 | [patroni (Level 3)](https://dashboards.gitlab.net/d/patroni-main) |  |\n | [plantuml](https://dashboards.gitlab.net/d/plantuml-main) | Level 0 |  |  |\n | [postgres-archive](https://dashboards.gitlab.net/d/postgres-archive-main) | Level 0 |  |  |\n | [praefect](https://dashboards.gitlab.net/d/praefect-main) | Level 3 | [gitaly (Level 3)](https://dashboards.gitlab.net/d/gitaly-main) | [api (Level 3)](https://dashboards.gitlab.net/d/api-main), [git (Level 3)](https://dashboards.gitlab.net/d/git-main), [kas (Level 1)](https://dashboards.gitlab.net/d/kas-main), [sidekiq (Level 3)](https://dashboards.gitlab.net/d/sidekiq-main), [web (Level 3)](https://dashboards.gitlab.net/d/web-main), [websockets (Level 1)](https://dashboards.gitlab.net/d/websockets-main) |\n | [pvs](https://dashboards.gitlab.net/d/pvs-main) | Level 3 |  |  |\n | [redis](https://dashboards.gitlab.net/d/redis-main) | Level 2 |  | [api (Level 3)](https://dashboards.gitlab.net/d/api-main), [git (Level 3)](https://dashboards.gitlab.net/d/git-main), [kas (Level 1)](https://dashboards.gitlab.net/d/kas-main), [sidekiq (Level 3)](https://dashboards.gitlab.net/d/sidekiq-main), [web (Level 3)](https://dashboards.gitlab.net/d/web-main), [websockets (Level 1)](https://dashboards.gitlab.net/d/websockets-main) |\n | [redis-cache](https://dashboards.gitlab.net/d/redis-cache-main) | Level 3 |  | [api (Level 3)](https://dashboards.gitlab.net/d/api-main), [git (Level 3)](https://dashboards.gitlab.net/d/git-main), [sidekiq (Level 3)](https://dashboards.gitlab.net/d/sidekiq-main), [web (Level 3)](https://dashboards.gitlab.net/d/web-main), [websockets (Level 1)](https://dashboards.gitlab.net/d/websockets-main) |\n | [redis-sidekiq](https://dashboards.gitlab.net/d/redis-sidekiq-main) | Level 2 |  | [api (Level 3)](https://dashboards.gitlab.net/d/api-main), [git (Level 3)](https://dashboards.gitlab.net/d/git-main), [sidekiq (Level 3)](https://dashboards.gitlab.net/d/sidekiq-main), [web (Level 3)](https://dashboards.gitlab.net/d/web-main), [websockets (Level 1)](https://dashboards.gitlab.net/d/websockets-main) |\n | [redis-tracechunks](https://dashboards.gitlab.net/d/redis-tracechunks-main) | Level 2 |  | [api (Level 3)](https://dashboards.gitlab.net/d/api-main), [sidekiq (Level 3)](https://dashboards.gitlab.net/d/sidekiq-main) |\n | [registry](https://dashboards.gitlab.net/d/registry-main) | Level 3 | [api (Level 3)](https://dashboards.gitlab.net/d/api-main) | [frontend (Level 3)](https://dashboards.gitlab.net/d/frontend-main) |\n | [search](https://dashboards.gitlab.net/d/search-main) | Level 0 |  |  |\n | [sentry](https://dashboards.gitlab.net/d/sentry-main) | Level 0 |  |  |\n | [sidekiq](https://dashboards.gitlab.net/d/sidekiq-main) | Level 3 | [gitaly (Level 3)](https://dashboards.gitlab.net/d/gitaly-main), [patroni (Level 3)](https://dashboards.gitlab.net/d/patroni-main), [pgbouncer (Level 1)](https://dashboards.gitlab.net/d/pgbouncer-main), [praefect (Level 3)](https://dashboards.gitlab.net/d/praefect-main), [redis (Level 2)](https://dashboards.gitlab.net/d/redis-main), [redis-cache (Level 3)](https://dashboards.gitlab.net/d/redis-cache-main), [redis-sidekiq (Level 2)](https://dashboards.gitlab.net/d/redis-sidekiq-main), [redis-tracechunks (Level 2)](https://dashboards.gitlab.net/d/redis-tracechunks-main) |  |\n | [waf](https://dashboards.gitlab.net/d/waf-main) | Level 0 | [frontend (Level 3)](https://dashboards.gitlab.net/d/frontend-main) |  |\n | [web](https://dashboards.gitlab.net/d/web-main) | Level 3 | [gitaly (Level 3)](https://dashboards.gitlab.net/d/gitaly-main), [patroni (Level 3)](https://dashboards.gitlab.net/d/patroni-main), [pgbouncer (Level 1)](https://dashboards.gitlab.net/d/pgbouncer-main), [praefect (Level 3)](https://dashboards.gitlab.net/d/praefect-main), [redis (Level 2)](https://dashboards.gitlab.net/d/redis-main), [redis-cache (Level 3)](https://dashboards.gitlab.net/d/redis-cache-main), [redis-sidekiq (Level 2)](https://dashboards.gitlab.net/d/redis-sidekiq-main) | [frontend (Level 3)](https://dashboards.gitlab.net/d/frontend-main), [nginx (Level 0)](https://dashboards.gitlab.net/d/nginx-main) |\n | [web-pages](https://dashboards.gitlab.net/d/web-pages-main) | Level 3 |  |  |\n | [websockets](https://dashboards.gitlab.net/d/websockets-main) | Level 1 | [gitaly (Level 3)](https://dashboards.gitlab.net/d/gitaly-main), [patroni (Level 3)](https://dashboards.gitlab.net/d/patroni-main), [pgbouncer (Level 1)](https://dashboards.gitlab.net/d/pgbouncer-main), [praefect (Level 3)](https://dashboards.gitlab.net/d/praefect-main), [redis (Level 2)](https://dashboards.gitlab.net/d/redis-main), [redis-cache (Level 3)](https://dashboards.gitlab.net/d/redis-cache-main), [redis-sidekiq (Level 2)](https://dashboards.gitlab.net/d/redis-sidekiq-main) |  |\n | [woodhouse](https://dashboards.gitlab.net/d/woodhouse-main) | Level 3 |  |  |","datasource":null,"gridPos":{"h":20,"w":24,"x":0,"y":3000},"id":8,"mode":"markdown","title":"","type":"text"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"System Diagram (Keyed by Maturity Model)","titleSize":"h6","type":"row"},{"content":"Made with ❤️ and [Grafonnet](https://github.com/grafana/grafonnet-lib). [Contribute to this dashboard on GitLab.com](https://gitlab.com/gitlab-com/runbooks/blob/master/dashboards)\n","datasource":null,"gridPos":{"h":2,"w":24,"x":0,"y":110000},"id":9,"mode":"markdown","title":"Source","type":"text"}],"refresh":"","rows":[],"schemaVersion":16,"style":"light","tags":["managed","diagrams"],"templating":{"list":[{"current":{"text":"Global","value":"Global"},"hide":0,"label":null,"name":"PROMETHEUS_DS","options":[],"query":"prometheus","refresh":1,"regex":"","type":"datasource"},{"allValue":null,"current":{"text":"gprd","value":"gprd"},"datasource":"$PROMETHEUS_DS","hide":0,"includeAll":false,"label":null,"multi":false,"name":"environment","options":[],"query":"label_values(gitlab_service_ops:rate, environment)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"text":"main","value":"main"},"hide":0,"includeAll":false,"label":"","multi":false,"name":"stage","options":[{"text":"main","value":"main"},{"text":"cny","value":"cny"},{"text":"","value":""}],"query":"main,cny,","refresh":0,"type":"custom"}]},"time":{"from":"now-6h/m","to":"now/m"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"utc","title":"diagrams: Overview diagrams","uid":"diagrams-main","version":4}}