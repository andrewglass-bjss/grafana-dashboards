{"meta":{"type":"db","canSave":true,"canEdit":true,"canAdmin":false,"canStar":true,"slug":"product-intelligence-redis-monitoring","url":"/d/SuOQjYJGz/product-intelligence-redis-monitoring","expires":"0001-01-01T00:00:00Z","created":"2020-12-15T12:20:46Z","updated":"2020-12-15T12:32:12Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":3,"hasAcl":false,"isFolder":false,"folderId":980,"folderTitle":"Playground - FOR TESTING PURPOSES ONLY","folderUrl":"/dashboards/f/playground-FOR-TESTING-ONLY/playground-for-testing-purposes-only","provisioned":false,"provisionedExternalId":""},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"links":[],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":9,"panels":[],"title":"Memory saturation","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":1},"hiddenSeries":false,"id":11,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"clamp_min(clamp_max(max(\n  label_replace(redis_memory_used_rss_bytes{environment=\"gprd\", type=\"redis\"}, \"memtype\", \"rss\",\"\",\"\")\n  or\n  label_replace(redis_memory_used_bytes{environment=\"gprd\", type=\"redis\"}, \"memtype\", \"used\",\"\",\"\")\n) by (type, tier, stage, environment, fqdn)\n/ on(fqdn) group_left\nnode_memory_MemTotal_bytes{environment=\"gprd\", type=\"redis\"}\n,1),0)\n","interval":"","legendFormat":"{{ fqdn }}","refId":"A"},{"expr":"max(slo:max:soft:gitlab_component_saturation:ratio{component=\"redis_memory\", environment=\"gprd\"})","interval":"","legendFormat":"Degradation SLO","refId":"B"},{"expr":"max(slo:max:hard:gitlab_component_saturation:ratio{component=\"redis_memory\", environment=\"gprd\"})","interval":"","legendFormat":"Outage SLO","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":"7d","title":"7 days ago","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:952","format":"percentunit","label":"Saturation","logBase":1,"max":"1","min":"0","show":true},{"$$hashKey":"object:953","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":1},"hiddenSeries":false,"id":12,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"clamp_min(clamp_max(max(\n  label_replace(redis_memory_used_rss_bytes{environment=\"gprd\", type=\"redis\"}, \"memtype\", \"rss\",\"\",\"\")\n  or\n  label_replace(redis_memory_used_bytes{environment=\"gprd\", type=\"redis\"}, \"memtype\", \"used\",\"\",\"\")\n) by (type, tier, stage, environment, fqdn)\n/ on(fqdn) group_left\nnode_memory_MemTotal_bytes{environment=\"gprd\", type=\"redis\"}\n,1),0)\n","interval":"","legendFormat":"{{ fqdn }}","refId":"A"},{"expr":"max(slo:max:soft:gitlab_component_saturation:ratio{component=\"redis_memory\", environment=\"gprd\"})","interval":"","legendFormat":"Degradation SLO","refId":"B"},{"expr":"max(slo:max:hard:gitlab_component_saturation:ratio{component=\"redis_memory\", environment=\"gprd\"})","interval":"","legendFormat":"Outage SLO","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Current","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:952","format":"percentunit","label":"Saturation","logBase":1,"max":"1","min":"0","show":true},{"$$hashKey":"object:953","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":9},"id":2,"panels":[],"title":"Redis CPU per Node - Primary","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":10},"hiddenSeries":false,"id":6,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"clamp_min(clamp_max(max(\n  max_over_time(instance:redis_cpu_usage:rate1m{environment=\"gprd\", type=\"redis\", fqdn=~\"redis-\\\\d\\\\d.*\"}[$__interval])\n    and on (instance) redis_instance_info{role=\"master\"}\n) by (fqdn)\n,1),0)","interval":"","legendFormat":"{{fqdn}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":"7d","title":"7 days ago","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:750","decimals":null,"format":"percentunit","label":"Saturation","logBase":1,"max":"1","min":"0","show":true},{"$$hashKey":"object:751","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":10},"hiddenSeries":false,"id":7,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"clamp_min(clamp_max(max(\n  max_over_time(instance:redis_cpu_usage:rate1m{environment=\"gprd\", type=\"redis\", fqdn=~\"redis-\\\\d\\\\d.*\"}[$__interval])\n    and on (instance) redis_instance_info{role=\"master\"}\n) by (fqdn)\n,1),0)","interval":"","legendFormat":"{{fqdn}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Current","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:750","decimals":null,"format":"percentunit","label":"Saturation","logBase":1,"max":"1","min":"0","show":true},{"$$hashKey":"object:751","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":false,"schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-2d","to":"now"},"timepicker":{},"timezone":"","title":"Product Intelligence - Redis Monitoring","uid":"SuOQjYJGz","version":3}}