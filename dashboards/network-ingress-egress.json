{"meta":{"type":"db","canSave":false,"canEdit":false,"canAdmin":false,"canStar":true,"slug":"network-ingress-egress","url":"/d/Bt0BXyeZk/network-ingress-egress","expires":"0001-01-01T00:00:00Z","created":"2020-05-06T13:39:07Z","updated":"2020-05-14T06:56:59Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":4,"hasAcl":false,"isFolder":false,"folderId":184,"folderTitle":".ONCE OFF","folderUrl":"/dashboards/f/kGgx9rIiz/once-off","provisioned":false,"provisionedExternalId":""},"dashboard":{"annotations":{"list":[{"$$hashKey":"object:2371","builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"links":[],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":6,"x":0,"y":0},"hiddenSeries":false,"id":6,"legend":{"avg":true,"current":false,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", fqdn=~\"^fe-registry-[0-9].*\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", fqdn=~\"^fe-registry-[0-9].*\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Fe (HAProxy) Registry Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","description":"","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":6,"x":6,"y":0},"hiddenSeries":false,"id":5,"legend":{"avg":true,"current":false,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", fqdn=~\"^fe-[0-9].*\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", fqdn=~\"^fe-[0-9].*\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Fe (HAProxy) Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","description":"","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":6,"x":12,"y":0},"hiddenSeries":false,"id":9,"legend":{"avg":true,"current":false,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", fqdn=~\"^fe-pages-[0-9].*\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", fqdn=~\"^fe-pages-[0-9].*\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Fe Pages (HAProxy) Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","description":"","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":6,"x":18,"y":0},"hiddenSeries":false,"id":10,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", fqdn=~\"^fe-registry-[0-9].*\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", fqdn=~\"^fe-registry-[0-9].*\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Fe Registry (HAProxy) Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":7,"x":0,"y":9},"hiddenSeries":false,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", fqdn=~\"^git-.*\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", fqdn=~\"^git-.*\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Git Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":5,"x":7,"y":9},"hiddenSeries":false,"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", fqdn=~\"^api-.*\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", fqdn=~\"^api-.*\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"API Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":6,"x":12,"y":9},"hiddenSeries":false,"id":4,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", fqdn=~\"^web-[0-9]+.*\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", fqdn=~\"^web-[0-9]+.*\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Web Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":6,"x":18,"y":9},"hiddenSeries":false,"id":8,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", fqdn=~\"^web-pages.*\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", fqdn=~\"^web-pages.*\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Web-Pages Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":18},"hiddenSeries":false,"id":7,"legend":{"avg":true,"current":false,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", fqdn=~\"^file-.*\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", fqdn=~\"^file-.*\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"File (Gitaly) Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":18},"hiddenSeries":false,"id":11,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", fqdn=~\"^pages-.*\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", fqdn=~\"^pages-.*\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Pages Storage (NFS) Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":27},"hiddenSeries":false,"id":13,"legend":{"alignAsTable":true,"avg":true,"current":false,"hideEmpty":true,"hideZero":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"max","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum by (bucket_name) (stackdriver_gcs_bucket_storage_googleapis_com_network_sent_bytes_count) * 1440","interval":"1d","legendFormat":"{{ bucket_name }}","refId":"A"},{"expr":"sum by (bucket_name) (stackdriver_gcs_bucket_storage_googleapis_com_network_received_bytes_count) * 1440 * -1","hide":false,"interval":"1d","legendFormat":"{{ bucket_name }}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Object storage  Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":27},"hiddenSeries":false,"id":12,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", fqdn=~\"^share-.*\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", fqdn=~\"^share-.*\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Share Cache Storage (Traces / Artifacts) Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":36},"hiddenSeries":false,"id":14,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pluginVersion":"6.7.3","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(increase(node_network_transmit_bytes_total{device!=\"lo\", type=\"patroni\", env=\"gprd\"}[1d]))","interval":"","legendFormat":"egress","refId":"A"},{"expr":"sum(increase(node_network_receive_bytes_total{device!=\"lo\", type=\"patroni\", env=\"gprd\"}[1d])) * -1","interval":"","legendFormat":"ingress","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Share Cache Storage (Traces / Artifacts) Data Transfer / 24h","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2422","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2423","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":false,"schemaVersion":22,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-120d","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"Network Ingress / Egress","uid":"Bt0BXyeZk","variables":{"list":[]},"version":4}}