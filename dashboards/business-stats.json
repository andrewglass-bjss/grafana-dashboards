{"meta":{"type":"db","canSave":true,"canEdit":true,"canStar":true,"slug":"business-stats","expires":"0001-01-01T00:00:00Z","created":"2016-09-20T21:24:27Z","updated":"2017-10-04T09:42:05Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":81},"dashboard":{"annotations":{"list":[]},"editable":true,"gnetId":null,"graphTooltip":0,"hideControls":false,"id":null,"links":[],"refresh":"1h","rows":[{"collapse":false,"height":218,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Production","editable":true,"error":false,"fill":0,"grid":{},"id":1,"legend":{"avg":true,"current":false,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"alias":"Created","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"policy":"default","query":"SELECT sum(count) AS \"Amount\" FROM year.events_per_hour WHERE event = 'create_repository' AND $timeFilter GROUP BY time(1h)","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"alias":"Imported","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"policy":"default","query":"SELECT sum(count) AS \"Amount\" FROM year.events_per_hour WHERE event = 'import_repository' AND $timeFilter GROUP BY time(1h)","rawQuery":true,"refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"alias":"Forked","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"policy":"default","query":"SELECT sum(count) AS \"Amount\" FROM year.events_per_hour WHERE event = 'fork_repository' AND $timeFilter GROUP BY time(1h)","rawQuery":true,"refId":"C","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"New Repos Source","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Production","editable":true,"error":false,"fill":0,"grid":{},"id":3,"legend":{"avg":false,"current":false,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":6,"stack":false,"steppedLine":false,"targets":[{"alias":"Commits","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"policy":"default","query":"SELECT sum(count) AS \"Amount\" FROM year.events_per_hour WHERE event = 'push_commit' AND $timeFilter GROUP BY time(1h)","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"alias":"Branch","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"policy":"default","query":"SELECT sum(count) AS \"Amount\" FROM year.events_per_hour WHERE event = 'push_branch' AND $timeFilter GROUP BY time(1h)","rawQuery":true,"refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"alias":"Tag","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"policy":"default","query":"SELECT sum(count) AS \"Amount\" FROM year.events_per_hour WHERE event = 'push_tag' AND $timeFilter GROUP BY time(1h)","rawQuery":true,"refId":"C","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Pushes","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Production","editable":true,"error":false,"fill":0,"grid":{},"id":2,"legend":{"avg":false,"current":false,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"Not Found","yaxis":2}],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"alias":"Found new build","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"policy":"default","query":"SELECT sum(count) AS \"Amount\" FROM year.events_per_hour WHERE event = 'build_found' AND $timeFilter GROUP BY time(1h)","rawQuery":true,"refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"alias":"Update","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"policy":"default","query":"SELECT sum(count) AS \"Amount\" FROM year.events_per_hour WHERE event = 'update_build' AND $timeFilter GROUP BY time(1h)","rawQuery":true,"refId":"C","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"alias":"Not Found (Redis Hit)","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"policy":"default","query":"SELECT sum(count) AS \"Amount\" FROM year.events_per_hour WHERE event = 'build_not_found_cached' AND $timeFilter GROUP BY time(1h)","rawQuery":true,"refId":"D","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"alias":"Not Found","dsType":"influxdb","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":true,"measurement":"events_per_hour","policy":"year","refId":"A","resultFormat":"time_series","select":[[{"params":["count"],"type":"field"},{"params":[],"type":"sum"}]],"tags":[{"key":"event","operator":"=","value":"build_not_found"}]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"CI Builds","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Production","fill":1,"id":12,"legend":{"alignAsTable":false,"avg":false,"current":true,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"etag_caching_cache_hit","yaxis":1}],"spaceLength":10,"span":4,"stack":true,"steppedLine":false,"targets":[{"alias":"$tag_event","dsType":"influxdb","expr":"","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["event"],"type":"tag"},{"params":["none"],"type":"fill"}],"intervalFactor":2,"measurement":"events_per_hour","policy":"year","query":"SELECT sum(count) AS \"Amount\" FROM year.events_per_hour WHERE event = '$event' AND $timeFilter GROUP BY time($interval)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["count"],"type":"field"},{"params":[],"type":"sum"}]],"tags":[{"key":"event","operator":"=~","value":"/etag/"},{"condition":"AND","key":"event","operator":"!=","value":"etag_caching_middleware_used"},{"condition":"AND","key":"event","operator":"!=","value":"etag_caching_cache_hit"}]},{"alias":"$tag_event","dsType":"influxdb","expr":"","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["event"],"type":"tag"},{"params":["none"],"type":"fill"}],"intervalFactor":2,"measurement":"events_per_hour","policy":"year","query":"SELECT sum(count) AS \"Amount\" FROM year.events_per_hour WHERE event = '$event' AND $timeFilter GROUP BY time($interval)","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["count"],"type":"field"},{"params":[],"type":"sum"}]],"tags":[{"key":"event","operator":"=","value":"etag_caching_cache_hit"}]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Etags","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":["total"]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Row","titleSize":"h6"},{"collapse":false,"height":233,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","editable":true,"error":false,"fill":0,"grid":{},"id":6,"legend":{"avg":false,"current":true,"max":false,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"gitlab_database_rows{query_name=~\"(orphaned_projects|soft_deleted_projects)\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"1m","intervalFactor":2,"legendFormat":"{{query_name}}","metric":"db_rows_count","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":120,"tags":[]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Orphans and Soft-deleted","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"","fill":1,"id":8,"interval":"1h","legend":{"alignAsTable":false,"avg":false,"current":true,"max":false,"min":false,"rightSide":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","percentage":true,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"alias":"Projects","dsType":"influxdb","groupBy":[{"params":["auto"],"type":"time"},{"params":["none"],"type":"fill"}],"hide":false,"measurement":"rails_method_calls","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["call_count"],"type":"field"},{"params":[],"type":"sum"}]],"tags":[{"key":"action","operator":"=","value":"ProjectsController#create"}]},{"alias":"Groups","dsType":"influxdb","groupBy":[{"params":["auto"],"type":"time"},{"params":["none"],"type":"fill"}],"hide":false,"measurement":"rails_method_calls","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["call_count"],"type":"field"},{"params":[],"type":"sum"}]],"tags":[{"key":"action","operator":"=","value":"GroupsController#create"}]},{"alias":"Snippets","dsType":"influxdb","groupBy":[{"params":["auto"],"type":"time"},{"params":["none"],"type":"fill"}],"hide":false,"measurement":"rails_method_calls","policy":"default","refId":"C","resultFormat":"time_series","select":[[{"params":["call_count"],"type":"field"},{"params":[],"type":"sum"}]],"tags":[{"key":"action","operator":"=","value":"SnippetsController#create"},{"condition":"OR","key":"action","operator":"=","value":"Projects::SnippetsController#create"}]},{"alias":"Issues","dsType":"influxdb","groupBy":[{"params":["auto"],"type":"time"},{"params":["none"],"type":"fill"}],"hide":false,"measurement":"rails_method_calls","policy":"default","refId":"D","resultFormat":"time_series","select":[[{"params":["call_count"],"type":"field"},{"params":[],"type":"sum"}]],"tags":[{"key":"action","operator":"=","value":"Projects::IssuesController#create"}]},{"alias":"Merge requests","dsType":"influxdb","groupBy":[{"params":["auto"],"type":"time"},{"params":["none"],"type":"fill"}],"hide":false,"measurement":"rails_method_calls","policy":"default","query":"SELECT count(\"call_count\") FROM \"rails_method_calls\" WHERE \"action\" = 'Projects::MergeRequestsController#create' AND $timeFilter GROUP BY time($__interval) fill(none)","rawQuery":false,"refId":"E","resultFormat":"time_series","select":[[{"params":["call_count"],"type":"field"},{"params":[],"type":"sum"}]],"tags":[{"key":"action","operator":"=","value":"Projects::MergeRequestsController#create"}]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Object creations","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":["total"]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Prometheus in Azure","decimals":null,"description":"Number of Upload records in the database","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":10,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":4,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"max(gitlab_database_rows{query_name=\"uploads\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"","intervalFactor":1,"legendFormat":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":900,"tags":[]}],"thresholds":"","title":"Uploads","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"max"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Dashboard Row","titleSize":"h6"}],"schemaVersion":14,"style":"dark","tags":["events"],"templating":{"list":[]},"time":{"from":"now-24h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"utc","title":"Business Stats","version":81}}