{"meta":{"type":"db","canSave":false,"canEdit":true,"canAdmin":false,"canStar":true,"slug":"hendrik-haproxy-test","url":"/d/ZLB3HtFMk/hendrik-haproxy-test","expires":"0001-01-01T00:00:00Z","created":"2020-09-28T14:08:33Z","updated":"2020-09-28T14:42:35Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":9,"hasAcl":false,"isFolder":false,"folderId":1299,"folderTitle":"SRE Personal Dashboards","folderUrl":"/dashboards/f/K8JDABmGk/sre-personal-dashboards","provisioned":false,"provisionedExternalId":""},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1601303723096,"links":[],"panels":[{"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"composites":[],"content":"graph TD\nfrontend_1xx[frontend 1xx] ==\u003e HAProxy\nfrontend_2xx[frontend 2xx] ==\u003e HAProxy\nfrontend_3xx[frontend 3xx] ==\u003e HAProxy\nfrontend_4xx[frontend 4xx] ==\u003e HAProxy\nfrontend_5xx[frontend 5xx] ==\u003e HAProxy\nfrontend_other[frontend other] ==\u003e HAProxy\n\nHAProxy ==\u003e backend_1xx\nHAProxy ==\u003e backend_2xx\nHAProxy ==\u003e backend_3xx\nHAProxy ==\u003e backend_4xx\nHAProxy ==\u003e backend_5xx\nHAProxy ==\u003e backend_other","datasource":null,"decimals":2,"description":"","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","graphId":"diagram_23763571993","gridPos":{"h":12,"w":24,"x":0,"y":0},"id":2,"init":{"arrowMarkerAbsolute":true,"cloneCssStyles":true,"flowchart":{"htmlLabels":true,"useMaxWidth":true},"gantt":{"barGap":4,"barHeight":20,"fontFamily":"\"Open-Sans\", \"sans-serif\"","fontSize":11,"gridLineStartPadding":35,"leftPadding":75,"numberSectionStyles":3,"titleTopMargin":25,"topPadding":50},"logLevel":3,"sequenceDiagram":{"actorMargin":50,"bottomMarginAdj":1,"boxMargin":10,"boxTextMargin":5,"diagramMarginX":50,"diagramMarginY":10,"height":65,"messageMargin":35,"mirrorActors":true,"noteMargin":10,"useMaxWidth":true,"width":150},"startOnLoad":false},"legend":{"avg":true,"current":true,"gradient":{"enabled":true,"show":true},"max":true,"min":true,"show":false,"total":true},"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"maxWidth":false,"mermaidServiceUrl":"","metricCharacterReplacements":[],"moddedSeriesVal":0,"mode":"content","nullPointMode":"connected","repeat":"backend","repeatDirection":"v","scopedVars":{"backend":{"selected":true,"text":"api","value":"api"}},"seriesOverrides":[{"$$hashKey":"object:127","alias":"/5xx$/","invertColors":"Invert Colors","thresholds":"50,250,500"},{"$$hashKey":"object:344","alias":"/1xx$/","invertColors":"Invert Colors","thresholds":"50,75,100"}],"style":"","targets":[{"expr":"sum(frontend_code:haproxy_frontend_http_responses_total:irate1m{environment=\"gprd\"}) by (code)","interval":"","legendFormat":"frontend_{{code}}","refId":"A"},{"expr":"sum(backend_code:haproxy_server_http_responses_total:irate1m{environment=\"gprd\", backend=\"$backend\"}) by (code)","interval":"","legendFormat":"backend_{{code}}","refId":"B"}],"thresholds":"500,2000,3000","timeFrom":null,"timeShift":null,"title":"$backend","type":"jdbranham-diagram-panel","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg","valueOptions":["avg","min","max","total","current"]},{"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"composites":[],"content":"graph TD\nfrontend_1xx[frontend 1xx] ==\u003e HAProxy\nfrontend_2xx[frontend 2xx] ==\u003e HAProxy\nfrontend_3xx[frontend 3xx] ==\u003e HAProxy\nfrontend_4xx[frontend 4xx] ==\u003e HAProxy\nfrontend_5xx[frontend 5xx] ==\u003e HAProxy\nfrontend_other[frontend other] ==\u003e HAProxy\n\nHAProxy ==\u003e backend_1xx\nHAProxy ==\u003e backend_2xx\nHAProxy ==\u003e backend_3xx\nHAProxy ==\u003e backend_4xx\nHAProxy ==\u003e backend_5xx\nHAProxy ==\u003e backend_other","datasource":null,"decimals":2,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","graphId":"diagram_3","gridPos":{"h":12,"w":24,"x":0,"y":12},"id":3,"init":{"arrowMarkerAbsolute":true,"cloneCssStyles":true,"flowchart":{"htmlLabels":true,"useMaxWidth":true},"gantt":{"barGap":4,"barHeight":20,"fontFamily":"\"Open-Sans\", \"sans-serif\"","fontSize":11,"gridLineStartPadding":35,"leftPadding":75,"numberSectionStyles":3,"titleTopMargin":25,"topPadding":50},"logLevel":3,"sequenceDiagram":{"actorMargin":50,"bottomMarginAdj":1,"boxMargin":10,"boxTextMargin":5,"diagramMarginX":50,"diagramMarginY":10,"height":65,"messageMargin":35,"mirrorActors":true,"noteMargin":10,"useMaxWidth":true,"width":150},"startOnLoad":false},"legend":{"avg":true,"current":true,"gradient":{"enabled":true,"show":true},"max":true,"min":true,"show":false,"total":true},"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"maxWidth":false,"mermaidServiceUrl":"","metricCharacterReplacements":[],"moddedSeriesVal":0,"mode":"content","nullPointMode":"connected","repeat":null,"repeatDirection":"v","repeatIteration":1601303723096,"repeatPanelId":2,"scopedVars":{"backend":{"selected":true,"text":"api_rate_limit","value":"api_rate_limit"}},"seriesOverrides":[],"style":"","targets":[{"expr":"sum(frontend_code:haproxy_frontend_http_responses_total:irate1m{environment=\"gprd\",type=~\"$type\"}) by (code)","interval":"","legendFormat":"frontend_{{code}}","refId":"A"},{"expr":"sum(backend_code:haproxy_server_http_responses_total:irate1m{environment=\"gprd\", backend=\"$backend\"}) by (code)","interval":"","legendFormat":"backend_{{code}}","refId":"B"}],"thresholds":"0,10","timeFrom":null,"timeShift":null,"title":"Panel Title","type":"jdbranham-diagram-panel","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg","valueOptions":["avg","min","max","total","current"]},{"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"composites":[],"content":"graph TD\nfrontend_1xx[frontend 1xx] ==\u003e HAProxy\nfrontend_2xx[frontend 2xx] ==\u003e HAProxy\nfrontend_3xx[frontend 3xx] ==\u003e HAProxy\nfrontend_4xx[frontend 4xx] ==\u003e HAProxy\nfrontend_5xx[frontend 5xx] ==\u003e HAProxy\nfrontend_other[frontend other] ==\u003e HAProxy\n\nHAProxy ==\u003e backend_1xx\nHAProxy ==\u003e backend_2xx\nHAProxy ==\u003e backend_3xx\nHAProxy ==\u003e backend_4xx\nHAProxy ==\u003e backend_5xx\nHAProxy ==\u003e backend_other","datasource":null,"decimals":2,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","graphId":"diagram_4","gridPos":{"h":12,"w":24,"x":0,"y":24},"id":4,"init":{"arrowMarkerAbsolute":true,"cloneCssStyles":true,"flowchart":{"htmlLabels":true,"useMaxWidth":true},"gantt":{"barGap":4,"barHeight":20,"fontFamily":"\"Open-Sans\", \"sans-serif\"","fontSize":11,"gridLineStartPadding":35,"leftPadding":75,"numberSectionStyles":3,"titleTopMargin":25,"topPadding":50},"logLevel":3,"sequenceDiagram":{"actorMargin":50,"bottomMarginAdj":1,"boxMargin":10,"boxTextMargin":5,"diagramMarginX":50,"diagramMarginY":10,"height":65,"messageMargin":35,"mirrorActors":true,"noteMargin":10,"useMaxWidth":true,"width":150},"startOnLoad":false},"legend":{"avg":true,"current":true,"gradient":{"enabled":true,"show":true},"max":true,"min":true,"show":false,"total":true},"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"maxWidth":false,"mermaidServiceUrl":"","metricCharacterReplacements":[],"moddedSeriesVal":0,"mode":"content","nullPointMode":"connected","repeat":null,"repeatDirection":"v","repeatIteration":1601303723096,"repeatPanelId":2,"scopedVars":{"backend":{"selected":true,"text":"web","value":"web"}},"seriesOverrides":[],"style":"","targets":[{"expr":"sum(frontend_code:haproxy_frontend_http_responses_total:irate1m{environment=\"gprd\",type=~\"$type\"}) by (code)","interval":"","legendFormat":"frontend_{{code}}","refId":"A"},{"expr":"sum(backend_code:haproxy_server_http_responses_total:irate1m{environment=\"gprd\", backend=\"$backend\"}) by (code)","interval":"","legendFormat":"backend_{{code}}","refId":"B"}],"thresholds":"0,10","timeFrom":null,"timeShift":null,"title":"Panel Title","type":"jdbranham-diagram-panel","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg","valueOptions":["avg","min","max","total","current"]},{"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"composites":[],"content":"graph TD\nfrontend_1xx[frontend 1xx] ==\u003e HAProxy\nfrontend_2xx[frontend 2xx] ==\u003e HAProxy\nfrontend_3xx[frontend 3xx] ==\u003e HAProxy\nfrontend_4xx[frontend 4xx] ==\u003e HAProxy\nfrontend_5xx[frontend 5xx] ==\u003e HAProxy\nfrontend_other[frontend other] ==\u003e HAProxy\n\nHAProxy ==\u003e backend_1xx\nHAProxy ==\u003e backend_2xx\nHAProxy ==\u003e backend_3xx\nHAProxy ==\u003e backend_4xx\nHAProxy ==\u003e backend_5xx\nHAProxy ==\u003e backend_other","datasource":null,"decimals":2,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"format":"none","graphId":"diagram_5","gridPos":{"h":12,"w":24,"x":0,"y":36},"id":5,"init":{"arrowMarkerAbsolute":true,"cloneCssStyles":true,"flowchart":{"htmlLabels":true,"useMaxWidth":true},"gantt":{"barGap":4,"barHeight":20,"fontFamily":"\"Open-Sans\", \"sans-serif\"","fontSize":11,"gridLineStartPadding":35,"leftPadding":75,"numberSectionStyles":3,"titleTopMargin":25,"topPadding":50},"logLevel":3,"sequenceDiagram":{"actorMargin":50,"bottomMarginAdj":1,"boxMargin":10,"boxTextMargin":5,"diagramMarginX":50,"diagramMarginY":10,"height":65,"messageMargin":35,"mirrorActors":true,"noteMargin":10,"useMaxWidth":true,"width":150},"startOnLoad":false},"legend":{"avg":true,"current":true,"gradient":{"enabled":true,"show":true},"max":true,"min":true,"show":false,"total":true},"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"maxWidth":false,"mermaidServiceUrl":"","metricCharacterReplacements":[],"moddedSeriesVal":0,"mode":"content","nullPointMode":"connected","repeat":null,"repeatDirection":"v","repeatIteration":1601303723096,"repeatPanelId":2,"scopedVars":{"backend":{"selected":true,"text":"https_git","value":"https_git"}},"seriesOverrides":[],"style":"","targets":[{"expr":"sum(frontend_code:haproxy_frontend_http_responses_total:irate1m{environment=\"gprd\",type=~\"$type\"}) by (code)","interval":"","legendFormat":"frontend_{{code}}","refId":"A"},{"expr":"sum(backend_code:haproxy_server_http_responses_total:irate1m{environment=\"gprd\", backend=\"$backend\"}) by (code)","interval":"","legendFormat":"backend_{{code}}","refId":"B"}],"thresholds":"0,10","timeFrom":null,"timeShift":null,"title":"Panel Title","type":"jdbranham-diagram-panel","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg","valueOptions":["avg","min","max","total","current"]}],"schemaVersion":25,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":false,"text":"main + cny","value":["main","cny"]},"hide":0,"includeAll":true,"label":"Stage","multi":true,"name":"stage","options":[{"selected":false,"text":"All","value":"$__all"},{"selected":true,"text":"main","value":"main"},{"selected":true,"text":"cny","value":"cny"}],"query":"main,cny","queryValue":"","skipUrlSync":false,"type":"custom"},{"allValue":null,"current":{"selected":true,"tags":[],"text":"All","value":["$__all"]},"hide":0,"includeAll":true,"label":"Type","multi":true,"name":"Type","options":[{"selected":true,"text":"All","value":"$__all"},{"selected":false,"text":"frontend","value":"frontend"},{"selected":false,"text":"pages","value":"pages"}],"query":"frontend,pages","queryValue":"","skipUrlSync":false,"type":"custom"},{"allValue":null,"current":{"selected":false,"text":"api + api_rate_limit + web + https_git","value":["api","api_rate_limit","web","https_git"]},"hide":0,"includeAll":false,"label":null,"multi":true,"name":"backend","options":[{"selected":true,"text":"api","value":"api"},{"selected":true,"text":"api_rate_limit","value":"api_rate_limit"},{"selected":true,"text":"web","value":"web"},{"selected":true,"text":"https_git","value":"https_git"}],"query":"api,api_rate_limit,web,https_git","queryValue":"","skipUrlSync":false,"type":"custom"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{"refresh_intervals":["10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"Hendrik HAProxy test","uid":"ZLB3HtFMk","version":9}}