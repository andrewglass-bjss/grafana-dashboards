{"meta":{"type":"db","canSave":true,"canEdit":true,"canStar":true,"slug":"geo-status","expires":"0001-01-01T00:00:00Z","created":"2018-05-01T15:51:30Z","updated":"2018-05-01T15:51:30Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":1},"dashboard":{"__requires":[{"id":"grafana","name":"Grafana","type":"grafana","version":"5.0.4"},{"id":"graph","name":"Graph","type":"panel","version":"5.0.0"},{"id":"prometheus","name":"Prometheus","type":"datasource","version":"5.0.0"},{"id":"singlestat","name":"Singlestat","type":"panel","version":"5.0.0"}],"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"links":[],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus on prometheus-app-01","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":0},"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"min(geo_repositories_failed) by (environment)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"Repositories","refId":"A"},{"expr":"min(geo_wikis_failed) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Wikis","refId":"B"},{"expr":"min(geo_lfs_objects_failed) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"LFS objects","refId":"C"},{"expr":"min(geo_attachments_failed) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Attachments","refId":"D"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Failures","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus on prometheus-app-01","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":0},"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"max(geo_repositories - geo_repositories_synced - geo_repositories_failed)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"Repositories","refId":"A"},{"expr":"max(geo_wikis - geo_wikis_synced - geo_wikis_failed)","format":"time_series","intervalFactor":2,"legendFormat":"Wikis","refId":"B"},{"expr":"max(geo_lfs_objects - geo_lfs_objects_synced - geo_lfs_objects_failed)","format":"time_series","intervalFactor":2,"legendFormat":"LFS objects","refId":"C"},{"expr":"max(geo_attachments - geo_attachments_synced - geo_attachments_failed)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"Attachments","refId":"D"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Out of Sync","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","format":"none","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":5,"x":0,"y":7},"id":15,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"min(geo_repositories_failed) by (environment)","format":"time_series","intervalFactor":2,"refId":"A"}],"thresholds":"0,0","title":"Repository Failures","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","description":"","format":"none","gauge":{"maxValue":1000,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":5,"x":5,"y":7},"id":14,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"min(geo_repositories - geo_repositories_synced - geo_repositories_failed)","format":"time_series","intervalFactor":2,"refId":"A"}],"thresholds":"100,1000","title":"Repositories Out of Sync","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus on prometheus-app-01","fill":1,"gridPos":{"h":6,"w":14,"x":10,"y":7},"id":9,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":true,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"min(geo_repositories_synced) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Synced","refId":"A"},{"expr":"min(geo_repositories_failed) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Failed","refId":"B"},{"expr":"min(geo_repositories - geo_repositories_synced - geo_repositories_failed) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Out of sync","refId":"C"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Repositories","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":"100","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","format":"none","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":5,"x":0,"y":13},"id":16,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"min(geo_wikis_failed) by (environment)","format":"time_series","intervalFactor":2,"refId":"A"}],"thresholds":"0,0","title":"Wiki Failures","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","description":"","format":"none","gauge":{"maxValue":1000,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":5,"x":5,"y":13},"id":17,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"min(geo_wikis - geo_wikis_synced - geo_wikis_failed)","format":"time_series","intervalFactor":2,"refId":"A"}],"thresholds":"100,1000","title":"Wikis Out of Sync","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus on prometheus-app-01","fill":1,"gridPos":{"h":6,"w":14,"x":10,"y":13},"id":10,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":true,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"min(geo_wikis_synced) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Synced","refId":"A"},{"expr":"min(geo_wikis_failed) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Failed","refId":"B"},{"expr":"min(geo_wikis - geo_wikis_failed - geo_wikis_synced) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Out of sync","refId":"C"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Wikis","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":"100","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","format":"none","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":5,"x":0,"y":19},"id":22,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"min(geo_attachments_failed)  by (environment)","format":"time_series","intervalFactor":2,"refId":"A"}],"thresholds":"0,0","title":"Attachment Sync Failures","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","description":"","format":"none","gauge":{"maxValue":1000,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":5,"x":5,"y":19},"id":23,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"max(geo_attachments - geo_attachments_synced - geo_attachments_failed)","format":"time_series","intervalFactor":2,"refId":"A"}],"thresholds":"100,1000","title":"Attachments Out of Sync","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus on prometheus-app-01","fill":1,"gridPos":{"h":6,"w":14,"x":10,"y":19},"id":19,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":true,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"min(geo_attachments_synced) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Synced","refId":"A"},{"expr":"min(geo_attachments_failed) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Failed","refId":"B"},{"expr":"min(geo_attachments - (geo_attachments_failed + geo_attachments_synced)) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Out of sync","refId":"C"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Attachments","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":"100","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","format":"none","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":5,"x":0,"y":25},"id":24,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"min(geo_lfs_objects_failed) by (environment)","format":"time_series","intervalFactor":2,"refId":"A"}],"thresholds":"0,0","title":"LFS Failures","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","description":"","format":"none","gauge":{"maxValue":1000,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":5,"x":5,"y":25},"id":25,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"min(geo_lfs_objects - geo_lfs_objects_synced - geo_lfs_objects_failed)","format":"time_series","intervalFactor":2,"refId":"A"}],"thresholds":"100,1000","title":"LFS Out of Sync","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus on prometheus-app-01","fill":1,"gridPos":{"h":6,"w":14,"x":10,"y":25},"id":11,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":true,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"min(geo_lfs_objects_synced) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Synced","refId":"A"},{"expr":"min(geo_lfs_objects_failed) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Failed","refId":"B"},{"expr":"min(geo_lfs_objects - geo_lfs_objects_failed - geo_lfs_objects_synced) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Out of sync","refId":"C"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"LFS objects","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":"100","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","format":"none","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":5,"x":0,"y":31},"id":26,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"min(geo_job_artifacts_failed) by (environment)","format":"time_series","intervalFactor":2,"refId":"A"}],"thresholds":"0,0","title":"Artifact Failures","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","description":"","format":"none","gauge":{"maxValue":1000,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":5,"x":5,"y":31},"id":27,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"min(geo_job_artifacts - geo_job_artifacts_synced - geo_job_artifacts_failed)","format":"time_series","intervalFactor":2,"refId":"A"}],"thresholds":"100,1000","title":"Artifacts Out of Sync","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus on prometheus-app-01","fill":1,"gridPos":{"h":6,"w":14,"x":10,"y":31},"id":12,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":true,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"min(geo_job_artifacts_synced) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Synced","refId":"A"},{"expr":"min(geo_job_artifacts_failed) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Failed","refId":"B"},{"expr":"min(geo_job_artifacts - (geo_job_artifacts_failed + geo_job_artifacts_synced)) by (environment)","format":"time_series","intervalFactor":2,"legendFormat":"Out of sync","refId":"C"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Job artifacts","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"","logBase":1,"max":"100","min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus on prometheus-app-01","description":"Number of events per hour","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":37},"id":3,"interval":"1h","legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(delta(geo_event_log_max_id[$__interval])) by (environment)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"Total","refId":"A"},{"expr":"sum(delta(geo_repository_updated_max_id[$__interval])) by (environment)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"Updated","refId":"B"},{"expr":"sum(delta(geo_repository_created_max_id[$__interval])) by (environment)","format":"time_series","hide":false,"instant":false,"intervalFactor":2,"legendFormat":"Created","refId":"C"},{"expr":"sum(delta(geo_repository_renamed_max_id[$__interval])) by (environment)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"Renamed","refId":"E"},{"expr":"sum(delta(geo_repository_deleted_max_id[$__interval])) by (environment)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"Deleted","refId":"D"},{"expr":"sum(delta(hashed_storage_migrated_max_id[$__interval])) by (environment)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"Hashed migrated","refId":"F"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Geo repository events","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus on prometheus-app-01","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":37},"id":4,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(delta(geo_lfs_object_deleted_max_id[1h])) by (evironment)","format":"time_series","intervalFactor":2,"legendFormat":"LFS objects deleted","refId":"A"},{"expr":"sum(delta(geo_job_artifact_deleted_max_id[1h])) by (evironment)","format":"time_series","intervalFactor":2,"legendFormat":"Job artifacts deleted","refId":"B"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Geo file events","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","format":"s","gauge":{"maxValue":600,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":5,"w":4,"x":0,"y":44},"id":6,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"max(geo_db_replication_lag_seconds)","format":"time_series","intervalFactor":2,"refId":"A"}],"thresholds":"120,300","title":"Geo db replication lag","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus on prometheus-app-01","fill":1,"gridPos":{"h":5,"w":12,"x":4,"y":44},"id":21,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"max(geo_db_replication_lag_seconds) by (geo_role)","format":"time_series","intervalFactor":2,"legendFormat":"DB replication lag ({{ geo_role }})","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"DB Replication Lag","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":1,"format":"dtdurations","label":"","logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","decimals":null,"format":"s","gauge":{"maxValue":600,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":5,"w":4,"x":16,"y":44},"id":7,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"min(- geo_last_event_timestamp + geo_cursor_last_event_timestamp)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"","refId":"A"}],"thresholds":"120,300","title":"Geo event log lag","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"Prometheus on prometheus-app-01","format":"short","gauge":{"maxValue":500,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":5,"w":4,"x":20,"y":44},"id":8,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"expr":"sum(-geo_last_event_id + geo_cursor_last_event_id)","format":"time_series","hide":false,"intervalFactor":2,"refId":"B"}],"thresholds":"100,200","title":"Geo event count lag","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":49},"id":13,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(sidekiq_running_jobs_count) by (name)","format":"time_series","intervalFactor":2,"legendFormat":"{{name}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Sidekiq running jobs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":49},"id":18,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(sidekiq_queue_size{name=~\".*geo.*\"}) by (name)","format":"time_series","intervalFactor":2,"legendFormat":"{{name}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Sidekiq queue size","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus on prometheus-app-01","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":56},"id":20,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"max(geo_repositories_verified) by (geo_role)","format":"time_series","intervalFactor":2,"legendFormat":"geo_repositories_verified ({{ geo_role }})","refId":"A"},{"expr":"max(geo_repositories_verification_failed) by (geo_role)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"geo_repositories_verification_failed ({{ geo_role }})","refId":"B"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Verification Status","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus in Azure","fill":1,"gridPos":{"h":9,"w":12,"x":12,"y":56},"id":29,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"grpc_client_msg_received_total","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{fqdn}} - {{ grpc_method }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Gitaly Method Calls","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}]}],"refresh":false,"schemaVersion":16,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-7d","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Geo Status","uid":"l8ifheiik","version":1}}