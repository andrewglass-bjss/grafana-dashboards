{"meta":{"type":"db","canSave":false,"canEdit":true,"canAdmin":false,"canStar":true,"slug":"delivery-kubernetes-migration-overview","url":"/d/delivery-k8s_migration_overview/delivery-kubernetes-migration-overview","expires":"0001-01-01T00:00:00Z","created":"2020-08-04T19:36:32Z","updated":"2021-04-09T08:46:57Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":716,"hasAcl":false,"isFolder":false,"folderId":1346,"folderTitle":"delivery","folderUrl":"/dashboards/f/delivery/delivery","provisioned":false,"provisionedExternalId":""},"dashboard":{"__inputs":[],"__requires":[],"annotations":{"list":[]},"description":"Uploaded by https://gitlab.com/gitlab-com/runbooks/-/jobs/1165592940 at Fri Apr  9 08:46:56 UTC 2021","editable":true,"gnetId":null,"graphTooltip":1,"hideControls":false,"id":null,"links":[],"panels":[{"content":"This dashboard shows a summary of resource utilization between virtual machines and the Kubernetes clusters for GitLab.com.\nFor a summary of the current migration status see [the tracking epic for the migration](https://gitlab.com/groups/gitlab-com/gl-infra/-/epics/112)\nThis dashboard focuses on the following resources during the migration to help track utilization and cost as services are brought over into the cluster. This only includes services that will be migrated and excludes others that will remain on virtual machines.\n\n**It does not include the following services:**\n  * Pages\n  * Patroni\n  * Redis\n  * Gitaly\n  * Praefect\n\n","datasource":null,"gridPos":{"h":7,"w":24,"x":0,"y":1},"id":2,"mode":"markdown","title":"Kubernetes Migration Summary Explainer","type":"text"},{"collapse":false,"collapsed":false,"gridPos":{"h":12,"w":24,"x":0,"y":1},"id":3,"panels":[],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"üñ• Virtual Machines","titleSize":"h6","type":"row"},{"description":"Total number of cores","fieldConfig":{"defaults":{"decimals":0,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":""},"values":false},"gridPos":{"h":6,"w":6,"x":0,"y":1},"id":4,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"]}},"pluginVersion":"7.0.3","targets":[{"expr":"sum(instance:node_cpus:count{env=\"$environment\",type!~\"web-pages|praefect|camoproxy\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":""}],"title":"Available cores","type":"stat"},{"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"$PROMETHEUS_DS","format":"percentunit","gauge":{"maxValue":1,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":6,"x":6,"y":1},"id":5,"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"avg(instance:node_cpu_utilization:ratio{type!~\"web-pages|praefect|camoproxy\"})","format":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":"","title":"CPU utilization","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"description":"Total memory","fieldConfig":{"defaults":{"decimals":0,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"bytes"},"values":false},"gridPos":{"h":6,"w":6,"x":12,"y":1},"id":6,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"]}},"pluginVersion":"7.0.3","targets":[{"expr":"sum(node_memory_MemTotal_bytes{type!~\"web-pages|praefect|camoproxy\", env=\"$environment\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":""}],"title":"Available Memory","type":"stat"},{"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"$PROMETHEUS_DS","format":"percentunit","gauge":{"maxValue":1,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":6,"x":18,"y":1},"id":7,"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"avg(instance:node_memory_utilization:ratio{type!~\"web-pages|praefect|camoproxy\", env=\"$environment\"})","format":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":"","title":"Avg Memory Utilization","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"collapse":false,"collapsed":false,"gridPos":{"h":12,"w":24,"x":0,"y":2},"id":8,"panels":[],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"‚ò∏Ô∏èKubernetes Cluster","titleSize":"h6","type":"row"},{"description":"Total number of cores","fieldConfig":{"defaults":{"decimals":0,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":""},"values":false},"gridPos":{"h":6,"w":6,"x":0,"y":2},"id":9,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"]}},"pluginVersion":"7.0.3","targets":[{"expr":"sum(instance:node_cpus:count{cluster!=\"\", env=\"$environment\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":""}],"title":"Available cores","type":"stat"},{"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"$PROMETHEUS_DS","format":"percentunit","gauge":{"maxValue":1,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":6,"x":6,"y":2},"id":10,"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"avg(instance:node_cpu_utilization:ratio{cluster!=\"\", env=\"$environment\"})","format":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":"","title":"Avg CPU utilization","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"description":"Total memory","fieldConfig":{"defaults":{"decimals":0,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green"}]},"unit":"bytes"},"values":false},"gridPos":{"h":6,"w":6,"x":12,"y":2},"id":11,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"]}},"pluginVersion":"7.0.3","targets":[{"expr":"sum(node_memory_MemTotal_bytes{cluster!=\"\", env=\"$environment\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":""}],"title":"Available Memory","type":"stat"},{"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"$PROMETHEUS_DS","format":"percentunit","gauge":{"maxValue":1,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":6,"x":18,"y":2},"id":12,"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"avg(instance:node_memory_utilization:ratio{cluster!=\"\", env=\"$environment\"})","format":true,"interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":"","title":"Avg Memory Utilization","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"collapse":false,"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":3},"id":13,"panels":[],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"‚ò∏Ô∏èPods: replicas, CPUs and Memory in use by Service","titleSize":"h6","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":3},"id":14,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-gitlab-shell.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"gitlab-shell: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":3},"id":15,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-gitlab-shell.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"gitlab-shell: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":3},"id":16,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-gitlab-shell.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"gitlab-shell: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":8},"id":17,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-registry.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"registry: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":8},"id":18,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-registry.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"registry: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":8},"id":19,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-registry.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"registry: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":13},"id":20,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-mailroom.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"mailroom: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":13},"id":21,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-mailroom.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"mailroom: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":13},"id":22,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-mailroom.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"mailroom: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":18},"id":23,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-sidekiq-catchall.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-catchall: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":18},"id":24,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-sidekiq-catchall.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-catchall: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":18},"id":25,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-sidekiq-catchall.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-catchall: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":23},"id":26,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-sidekiq-memory-bound.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-memory-bound: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":23},"id":27,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-sidekiq-memory-bound.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-memory-bound: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":23},"id":28,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-sidekiq-memory-bound.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-memory-bound: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":28},"id":29,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-sidekiq-elasticsearch.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-elasticsearch: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":28},"id":30,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-sidekiq-elasticsearch.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-elasticsearch: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":28},"id":31,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-sidekiq-elasticsearch.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-elasticsearch: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":33},"id":32,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-sidekiq-low-urgency-cpu-bound.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-low-urgency-cpu-bound: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":33},"id":33,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-sidekiq-low-urgency-cpu-bound.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-low-urgency-cpu-bound: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":33},"id":34,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-sidekiq-low-urgency-cpu-bound.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-low-urgency-cpu-bound: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":38},"id":35,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-sidekiq-urgent-other.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-urgent-other: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":38},"id":36,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-sidekiq-urgent-other.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-urgent-other: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":38},"id":37,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-sidekiq-urgent-other.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-urgent-other: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":43},"id":38,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-sidekiq-database-throttled.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-database-throttled: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":43},"id":39,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-sidekiq-database-throttled.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-database-throttled: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":43},"id":40,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-sidekiq-database-throttled.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-database-throttled: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":48},"id":41,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-sidekiq-gitaly-throttled.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-gitaly-throttled: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":48},"id":42,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-sidekiq-gitaly-throttled.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-gitaly-throttled: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":48},"id":43,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-sidekiq-gitaly-throttled.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-gitaly-throttled: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":53},"id":44,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-sidekiq-urgent-cpu-bound.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-urgent-cpu-bound: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":53},"id":45,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-sidekiq-urgent-cpu-bound.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-urgent-cpu-bound: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":53},"id":46,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-sidekiq-urgent-cpu-bound.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"sidekiq-urgent-cpu-bound: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":0,"y":58},"id":47,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_replicaset_spec_replicas{replicaset=~\"^gitlab-webservice.*\", cluster=~\"${environment}.*\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"webservice: Replicas","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"replicas","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":8,"y":58},"id":48,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{env=~\"$environment\", pod=~\"gitlab-webservice.*\"}[1m]))","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"webservice: CPUs","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":"cpus","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":1,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$PROMETHEUS_DS","decimals":3,"fill":0,"gridPos":{"h":5,"w":8,"x":16,"y":58},"id":49,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":true,"show":false,"sideWidth":null,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_working_set_bytes{env=~\"gprd\", node=~\"^.*$\", id!=\"\", container!=\"POD\", pod=~\"^gitlab-webservice.*$\", container!=\"\"})","format":"time_series","interval":"1m","intervalFactor":3,"legendFormat":"","refId":"A"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"webservice: Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":1,"min":0,"show":false}]}],"refresh":"5m","rows":[],"schemaVersion":16,"style":"light","tags":["managed","delivery","release"],"templating":{"list":[{"current":{"text":"Global","value":"Global"},"hide":0,"label":null,"name":"PROMETHEUS_DS","options":[],"query":"prometheus","refresh":1,"regex":"/(.*-gprd|Frank|Global|gprd-.*)/","type":"datasource"},{"allValue":null,"current":{"text":"gprd","value":"gprd"},"datasource":"$PROMETHEUS_DS","hide":0,"includeAll":false,"label":null,"multi":false,"name":"environment","options":[],"query":"label_values(gitlab_service_ops:rate, environment)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-6h/m","to":"now/m"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"utc","title":"delivery: Kubernetes Migration Overview","uid":"delivery-k8s_migration_overview","version":716}}