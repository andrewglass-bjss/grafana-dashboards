{"meta":{"type":"db","canSave":false,"canEdit":true,"canAdmin":false,"canStar":true,"slug":"host-stats","url":"/d/bd2Kl9Imk/host-stats","expires":"0001-01-01T00:00:00Z","created":"2018-06-12T13:13:51Z","updated":"2021-02-22T15:59:32Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":55,"hasAcl":false,"isFolder":false,"folderId":0,"folderTitle":"General","folderUrl":"","provisioned":false,"provisionedExternalId":""},"dashboard":{"annotations":{"list":[{"$$hashKey":"object:909","builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":1,"id":null,"iteration":1610976470569,"links":[],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":28,"panels":[],"title":"CPU and Load Average","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Global","description":"Percentage of all CPU cores/hyperthreads","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":0,"y":1},"hiddenSeries":false,"id":8,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"avg by (mode) (\n  rate(node_cpu_seconds_total{env=\"$env\",fqdn=\"$node\",mode!=\"idle\"}[$__rate_interval])\n)","format":"time_series","hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"{{mode}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU usage","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:492","decimals":null,"format":"percentunit","label":"% of all CPUs","logBase":1,"max":"1","min":"0","show":true},{"$$hashKey":"object:493","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":8,"y":1},"hiddenSeries":false,"id":10,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_context_switches_total{env=\"$env\",fqdn=\"$node\"}[$__rate_interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"15s","intervalFactor":1,"legendFormat":"Context switches","metric":"node_context_switches","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Context Switches","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:651","format":"short","label":"CS per second","logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:652","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":16,"y":1},"hiddenSeries":false,"id":9,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"avg_over_time(node_load1{env=\"$env\",fqdn=\"$node\"}[$__interval]) / instance:node_cpus:count","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"30s","intervalFactor":1,"legendFormat":"load","metric":"node_load1","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":120,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Load per CPU","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:939","format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:940","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"Are soft-interrupts distributed evenly across vCPUs?\n\nShows percentage of CPU time spent by each vCPU on softirq handling.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":0,"y":8},"hiddenSeries":false,"id":41,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"rate(node_cpu_seconds_total{env=\"$env\",fqdn=\"$node\",mode=\"softirq\"}[$__rate_interval])","format":"time_series","hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"CPU {{cpu}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Per-core CPU usage for soft-interrupt handling","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1020","decimals":null,"format":"short","label":"# of vCPUs used","logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:1021","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"Is workload unevenly distributed among vCPUs?\n\nNote that imbalance may be intentional (e.g. a process or container may be restricted to using only a limited number or set of vCPUs).  Unexpected imbalance may be worth investigating.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":8,"y":8},"hiddenSeries":false,"id":42,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"rate(node_cpu_seconds_total{env=\"$env\",fqdn=\"$node\",mode=\"user\"}[$__rate_interval])","format":"time_series","hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"CPU {{cpu}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Per-core CPU usage for user-mode execution context","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1101","decimals":null,"format":"short","label":"# of vCPUs used","logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:1102","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"Is workload unevenly distributed among vCPUs?\n\nNote that imbalance may be intentional (e.g. a process or container may be restricted to using only a limited number or set of vCPUs).  Unexpected imbalance may be worth investigating.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":16,"y":8},"hiddenSeries":false,"id":43,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"rate(node_cpu_seconds_total{env=\"$env\",fqdn=\"$node\",mode=\"system\"}[$__rate_interval])","format":"time_series","hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"CPU {{cpu}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Per-core CPU usage for kernel-mode execution context","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1182","decimals":null,"format":"short","label":"# of vCPUs used","logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:1183","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":15},"id":26,"panels":[],"title":"Memory","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":0,"y":16},"hiddenSeries":false,"id":7,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"$$hashKey":"object:155","alias":"/.*Total/","dashes":true}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"avg_over_time(node_memory_MemTotal_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval]) - avg_over_time(node_memory_MemAvailable_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","hide":false,"interval":"30s","intervalFactor":1,"legendFormat":"Used","refId":"E"},{"expr":"avg_over_time(node_memory_SwapTotal_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval]) - avg_over_time(node_memory_SwapFree_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","interval":"30s","intervalFactor":1,"legendFormat":"Swap","refId":"F"},{"expr":"avg_over_time(node_memory_MemTotal_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","interval":"30s","intervalFactor":1,"legendFormat":"Total","refId":"G"},{"expr":"avg_over_time(node_memory_SwapTotal_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","interval":"30s","intervalFactor":1,"legendFormat":"Swap Total","refId":"H"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Overview","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:162","decimals":0,"format":"bytes","label":null,"logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:163","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":8,"y":16},"hiddenSeries":false,"id":39,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"$$hashKey":"object:1505","alias":"/write.*/","transform":"negative-Y"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"avg_over_time(node_memory_AnonPages_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"30s","intervalFactor":1,"legendFormat":"AnonPages","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"dsType":"influxdb","expr":"avg_over_time(node_memory_Buffers_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"30s","intervalFactor":1,"legendFormat":"Buffers","metric":"","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"dsType":"influxdb","expr":"avg_over_time(node_memory_Slab_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"30s","intervalFactor":1,"legendFormat":"Slab","metric":"","policy":"default","refId":"C","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"dsType":"influxdb","expr":"avg_over_time(node_memory_Cached_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"30s","intervalFactor":1,"legendFormat":"Cached","metric":"","policy":"default","refId":"D","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory usage by type","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1512","decimals":0,"format":"bytes","label":null,"logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:1513","decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"Most normal (4 KB) memory pages are either:\n* anonymous memory (allocated by a process)\n* file-backed (cached copy of an on-disk block)\n\nWhen something needs a page of memory, typically another page needs to be evicted.  The memory manager has a 2-strikes policy: 1st strike bumps the page from Active to Inactive.  If a page on the Inactive list is not touched, it remains a candidate for eviction.  The kernel tries to keep enough pages on the Inactive list to satisfy memory demands.\n\nTypically the kernel prefers to evict file-backed pages, but if swap is enabled, it can also swap-out anonymous pages.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":10,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":16,"y":16},"hiddenSeries":false,"id":40,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"avg_over_time(node_memory_Active_anon_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"30s","intervalFactor":1,"legendFormat":"Active anonymous","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"dsType":"influxdb","expr":"avg_over_time(node_memory_Active_file_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"30s","intervalFactor":1,"legendFormat":"Active file-backed","metric":"","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"dsType":"influxdb","expr":"avg_over_time(node_memory_Inactive_anon_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"30s","intervalFactor":1,"legendFormat":"Inactive anonymous","metric":"","policy":"default","refId":"C","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"dsType":"influxdb","expr":"avg_over_time(node_memory_Inactive_file_bytes{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"30s","intervalFactor":1,"legendFormat":"Inactive file-backed","metric":"","policy":"default","refId":"D","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Page cache","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1593","decimals":0,"format":"bytes","label":null,"logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:1594","decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"Physical I/O to/from any active swap file or partition.  Some hosts have swap disabled (see /proc/swaps on the host), in which case this metric will always be zero even when the host is under memory pressure.\n\nRaw metric uses a unit size of one 4 KB page, so we multiply by 4096 to convert to bytes.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":0,"y":23},"hiddenSeries":false,"id":15,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"$$hashKey":"object:1673","alias":"/write.*/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_vmstat_pswpin{env=\"$env\",fqdn=\"$node\"}[$__rate_interval]) * 4096","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"swap in from disk","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"dsType":"influxdb","expr":"rate(node_vmstat_pswpout{env=\"$env\",fqdn=\"$node\"}[$__rate_interval]) * 4096","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"swap out to disk","metric":"","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Swap IO","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1680","decimals":0,"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:1681","decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":30},"id":24,"panels":[],"title":"Disk Performance","type":"row"},{"cards":{"cardPadding":null,"cardRound":null},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateCool","exponent":0.5,"mode":"spectrum"},"dataFormat":"tsbuckets","datasource":null,"description":"This histogram counts disk read ops per second that have a latency falling into each histogram bucket.  Buckets use powers-of-2 sizing, so we have fine-grained measures of low latency events and coarse-grained measures of high latency events.\n\nUnlike the graph of mean latency, this histogram sums across all disks.  If you need to see the latency for a specific disk, you can manually edit the \"device\" label filter.\n\nGood latency should be a few milliseconds; if the graph's scale is in seconds, you have a problem!\n\nHigh read latency and deep I/O queues often occur together.  They can be caused by either increased service time from the block device (slower physical I/O) or increased demand (request arrival rate).  Note that writes can sometimes stall reads.","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":11,"w":12,"x":0,"y":31},"heatmap":{},"hideZeroBuckets":true,"highlightCards":true,"id":46,"legend":{"show":true},"links":[],"reverseYBuckets":false,"targets":[{"dsType":"influxdb","expr":"sum by (le) (rate(ebpf_exporter_bio_latency_seconds_bucket{env=\"$env\",fqdn=\"$node\", operation=\"read\", device=~\"sd.*\"}[$__rate_interval]))","format":"heatmap","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"instant":false,"interval":"30s","intervalFactor":2,"legendFormat":"{{le}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"timeFrom":null,"timeShift":null,"title":"Disk Read Latency - Histogram","tooltip":{"show":true,"showHistogram":true},"tooltipDecimals":2,"type":"heatmap","xAxis":{"show":true},"xBucketNumber":null,"xBucketSize":null,"yAxis":{"decimals":0,"format":"s","logBase":1,"max":null,"min":null,"show":true,"splitFactor":null},"yBucketBound":"auto","yBucketNumber":null,"yBucketSize":null},{"cards":{"cardPadding":null,"cardRound":null},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateCool","exponent":0.5,"mode":"spectrum"},"dataFormat":"tsbuckets","datasource":null,"description":"This histogram counts disk write ops per second that have a latency falling into each histogram bucket.  Buckets use powers-of-2 sizing, so we have fine-grained measures of low latency events and coarse-grained measures of high latency events.\n\nUnlike the graph of mean latency, this histogram sums across all disks.  If you need to see the latency for a specific disk, you can manually edit the \"device\" label filter.\n\nWrite latency is often slower (due to larger mean operation size) and often runs in the background, so high write latency may not be as serious as read latency.\n\nHowever, writes can stall reads if the reads are not getting promptly scheduled and spending time in the I/O queue.","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":11,"w":12,"x":12,"y":31},"heatmap":{},"hideZeroBuckets":true,"highlightCards":true,"id":47,"legend":{"show":true},"links":[],"reverseYBuckets":false,"targets":[{"dsType":"influxdb","expr":"sum by (le) (rate(ebpf_exporter_bio_latency_seconds_bucket{env=\"$env\",fqdn=\"$node\", operation=\"write\", device=~\"sd.*\"}[$__rate_interval]))","format":"heatmap","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"instant":false,"interval":"30s","intervalFactor":2,"legendFormat":"{{le}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"timeFrom":null,"timeShift":null,"title":"Disk Write Latency - Histogram","tooltip":{"show":true,"showHistogram":true},"tooltipDecimals":2,"type":"heatmap","xAxis":{"show":true},"xBucketNumber":null,"xBucketSize":null,"yAxis":{"decimals":0,"format":"s","logBase":1,"max":null,"min":null,"show":true,"splitFactor":null},"yBucketBound":"auto","yBucketNumber":null,"yBucketSize":null},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This measures the mean duration for each read operation (including time spent in the I/O queue, not just time from Dispatch to Compete).\n\nGood latency should be a few milliseconds; if the graph's scale is in seconds, you have a problem!\n\nHigh read latency and deep I/O queues often occur together.  They can be caused by either increased service time from the block device (slower physical I/O) or increased demand (request arrival rate).  Note that writes can sometimes stall reads.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":42},"hiddenSeries":false,"id":13,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_disk_read_time_seconds_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval]) / rate(node_disk_reads_completed_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval]) \u003e 0","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"{{device}} read latency","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk Read Latency - Mean Duration per Read Op","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2793","format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2794","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This measures the mean duration for each write operation (including time spent in the I/O queue, not just time from Dispatch to Compete).\n\nWrite latency is often slower (due to larger mean operation size) and often runs in the background, so high write latency may not be as serious as read latency.\n\nHowever, writes can stall reads if the reads are not getting promptly scheduled and spending time in the I/O queue.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":42},"hiddenSeries":false,"id":32,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_disk_write_time_seconds_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval]) / rate(node_disk_writes_completed_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"{{device}} write latency","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk Write Latency - Mean Duration per Write Op","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2873","format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2874","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This metric sums the durations of all write IO operations that completed during the sampling interval.  This result is converted to a rate, so the graph shows total IO seconds per wallclock second.\n\nWhen multiple IO requests are concurrently in flight, the sum of IO durations can exceed the wallclock duration -- causing a spike that shows more than 1 second of IO time per second of real time.\n\nFor reference, the underlying raw metric sums the durations of all read or write IO operations that completed since boot.  Kernel exposes these metrics via /proc/diskstats, fields 4 (reads) and 8 (writes).  See kernel source: Documentation/iostats.txt","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":49},"hiddenSeries":false,"id":51,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_disk_read_time_seconds_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"{{device}} summed read durations","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk Read Latency - Total Duration (sum of IO seconds per wallclock second)","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:197","decimals":0,"format":"s","label":null,"logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:198","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This metric sums the durations of all write IO operations that completed during the sampling interval.  This result is converted to a rate, so the graph shows total IO seconds per wallclock second.\n\nWhen multiple IO requests are concurrently in flight, the sum of IO durations can exceed the wallclock duration -- causing a spike that shows more than 1 second of IO time per second of real time.\n\nFor reference, the underlying raw metric sums the durations of all read or write IO operations that completed since boot.  Kernel exposes these metrics via /proc/diskstats, fields 4 (reads) and 8 (writes).  See kernel source: Documentation/iostats.txt","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":49},"hiddenSeries":false,"id":52,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_disk_write_time_seconds_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"{{device}} summed write durations","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk Write Latency - Total Duration (sum of IO seconds per wallclock second)","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:197","decimals":0,"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:198","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This measures the mean count of read operations per wall-clock second from each mounted block device.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":56},"hiddenSeries":false,"id":35,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_disk_reads_completed_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"{{device}} read rate","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk Read Throughput (operations/sec)","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3291","decimals":0,"format":"iops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:3292","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This measures the mean count of write operations per wall-clock second from each mounted block device.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":56},"hiddenSeries":false,"id":36,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_disk_writes_completed_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"{{device}} write rate","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk Write Throughput (operations/sec)","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3371","decimals":0,"format":"iops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:3372","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This measures the mean bytes read per wall-clock second from each mounted block device.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":63},"hiddenSeries":false,"id":33,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_disk_read_bytes_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"{{device}} read rate","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk Read Throughput (bytes/sec)","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3451","decimals":0,"format":"Bps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:3452","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This measures the mean bytes written per wall-clock second from each mounted block device.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":63},"hiddenSeries":false,"id":34,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_disk_written_bytes_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"{{device}} write rate","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk Write Throughput (bytes/sec)","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3531","decimals":0,"format":"Bps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:3532","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This measures the mean size of read operations for each mounted block device.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":0,"y":70},"hiddenSeries":false,"id":37,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_disk_read_bytes_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval]) / rate(node_disk_reads_completed_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"{{device}} read op size","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk Read Operation Size - Mean (bytes/operation)","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:167","decimals":0,"format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:168","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This measures the mean size of write operations for each mounted block device.","editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":12,"x":12,"y":70},"hiddenSeries":false,"id":38,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_disk_written_bytes_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval]) / rate(node_disk_writes_completed_total{env=\"$env\",fqdn=\"$node\", device!~\"dm.*\"}[$__rate_interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"{{device}} write op size","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk Write Operation Size - Mean (bytes/operation)","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:247","decimals":0,"format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:248","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"cards":{"cardPadding":null,"cardRound":null},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateCool","exponent":0.5,"mode":"spectrum"},"dataFormat":"tsbuckets","datasource":null,"description":"This histogram counts disk read ops per second that have a size falling into each histogram bucket.  Buckets use powers-of-2 sizing, so we have fine-grained measures of small op sizes and coarse-grained measures of large op sizes.\n\nUnlike the graph of mean op size, this histogram sums op counters across all disks.  If you need to see the op size histogram for a specific disk, you can manually edit the \"device\" label filter.\n\nCommon patterns:\n* Page size is 4 KB, and many block-devices also set their min I/O size to 4 KB, so that is usually the smallest unit of I/O.  See: /sys/block/sd*/queue/minimum_io_size\n* I/O smaller than 4 KB is an unexpected feature of this histogram.  It may be direct-io (which bypasses the page cache) or journal writes, or it may be measurement error due to 0-byte operations being included in the histogram.  \"biosnoop\" uses kprobes and does not report these.  Research pending.\n* Random I/O tends to form a band starting at the 2-4 KB bucket, because it is typically 1 page (4 KB) or a few contiguous pages.\n* Sequential I/O tends to form a band in the 64-128 KB bucket, because default max read-ahead size is 128 KB (/sys/block/sd*/queue/read_ahead_kb).\n* Some applications have a preferred I/O size.  For example, Postgres uses 8 KB logical blocks (2 kernel pages) for its table and index datafiles, which shows up in the 4-8 KB bucket.","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":11,"w":12,"x":0,"y":77},"heatmap":{},"hideZeroBuckets":true,"highlightCards":true,"id":49,"legend":{"show":true},"links":[],"reverseYBuckets":false,"targets":[{"dsType":"influxdb","expr":"sum by (le) (rate(ebpf_exporter_bio_size_bytes_bucket{env=\"$env\",fqdn=\"$node\", operation=\"read\", device=~\"sd.*\"}[$__rate_interval]))","format":"heatmap","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"instant":false,"interval":"15s","intervalFactor":2,"legendFormat":"{{le}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"timeFrom":null,"timeShift":null,"title":"Disk Read Operation Size - Histogram (bytes/operation)","tooltip":{"show":true,"showHistogram":true},"tooltipDecimals":2,"type":"heatmap","xAxis":{"show":true},"xBucketNumber":null,"xBucketSize":null,"yAxis":{"decimals":0,"format":"bytes","logBase":1,"max":null,"min":null,"show":true,"splitFactor":null},"yBucketBound":"auto","yBucketNumber":null,"yBucketSize":null},{"cards":{"cardPadding":null,"cardRound":null},"color":{"cardColor":"#b4ff00","colorScale":"sqrt","colorScheme":"interpolateCool","exponent":0.5,"mode":"spectrum"},"dataFormat":"tsbuckets","datasource":null,"description":"This histogram counts disk write ops per second that have a size falling into each histogram bucket.  Buckets use powers-of-2 sizing, so we have fine-grained measures of small op sizes and coarse-grained measures of large op sizes.\n\nUnlike the graph of mean op size, this histogram sums op counters across all disks.  If you need to see the op size histogram for a specific disk, you can manually edit the \"device\" label filter.\n\nCommon patterns:\n* Page size is 4 KB, and many block-devices also set their min I/O size to 4 KB, so that is usually the smallest unit of I/O.  See: /sys/block/sd*/queue/minimum_io_size\n* I/O smaller than 4 KB is an unexpected feature of this histogram.  It may be direct-io (which bypasses the page cache) or journal writes, or it may be measurement error due to 0-byte operations being included in the histogram.  \"biosnoop\" uses kprobes and does not report these.  Research pending.\n* Random I/O tends to form a band starting at the 2-4 KB bucket, because it is typically 1 page (4 KB) or a few contiguous pages.\n* Sequential I/O tends to form a band in the 64-128 KB bucket, because default max read-ahead size is 128 KB (/sys/block/sd*/queue/read_ahead_kb).\n* Some applications have a preferred I/O size.  For example, Postgres uses 8 KB logical blocks (2 kernel pages) for its table and index datafiles, which shows up in the 4-8 KB bucket.","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":11,"w":12,"x":12,"y":77},"heatmap":{},"hideZeroBuckets":true,"highlightCards":true,"id":48,"legend":{"show":true},"links":[],"reverseYBuckets":false,"targets":[{"dsType":"influxdb","expr":"sum by (le) (rate(ebpf_exporter_bio_size_bytes_bucket{env=\"$env\",fqdn=\"$node\", operation=\"write\", device=~\"sd.*\"}[$__rate_interval]))","format":"heatmap","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"instant":false,"interval":"15s","intervalFactor":2,"legendFormat":"{{le}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"timeFrom":null,"timeShift":null,"title":"Disk Write Operation Size - Histogram (bytes/operation)","tooltip":{"show":true,"showHistogram":true},"tooltipDecimals":2,"type":"heatmap","xAxis":{"show":true},"xBucketNumber":null,"xBucketSize":null,"yAxis":{"decimals":0,"format":"bytes","logBase":1,"max":null,"min":null,"show":true,"splitFactor":null},"yBucketBound":"auto","yBucketNumber":null,"yBucketSize":null},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":88},"hiddenSeries":false,"id":18,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_vmstat_pgmajfault{env=\"$env\",fqdn=\"$node\"}[$__rate_interval])","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"15s","intervalFactor":2,"legendFormat":"Major Faults","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[{"$$hashKey":"object:478","colorMode":"critical","fill":true,"line":true,"op":"gt","value":1000,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Major Page Faults","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:450","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:451","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":95},"id":22,"panels":[],"title":"Disk Usage","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":0,"y":96},"hiddenSeries":false,"id":14,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"avg_over_time(instance:node_filesystem_avail:ratio{env=\"$env\",fqdn=\"$node\", fstype=~\"ext.|xfs\"}[$__interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"60s","intervalFactor":1,"legendFormat":"{{mountpoint}}","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Available Filesystem Space by Mountpoint","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:536","format":"percentunit","label":null,"logBase":1,"max":"1","min":0,"show":true},{"$$hashKey":"object:537","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":8,"y":96},"hiddenSeries":false,"id":16,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"$$hashKey":"object:616","alias":"Max","dashes":true}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"avg_over_time(node_filefd_allocated{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"30s","intervalFactor":1,"legendFormat":"Allocated","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"expr":"avg_over_time(node_filefd_maximum{env=\"$env\",fqdn=\"$node\"}[$__interval])","format":"time_series","interval":"30s","intervalFactor":1,"legendFormat":"Max","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Allocated file descriptors","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:623","format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"$$hashKey":"object:624","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":103},"id":30,"panels":[],"title":"Network","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":0,"y":104},"hiddenSeries":false,"id":12,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(node_network_transmit_bytes_total{env=\"$env\",device!=\"lo\", fqdn=\"$node\"}[$__rate_interval])","format":"time_series","hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"Outgoing on interface {{device}}","refId":"D"},{"expr":"rate(node_network_receive_bytes_total{env=\"$env\",device!=\"lo\", fqdn=\"$node\"}[$__rate_interval])","format":"time_series","hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"Incoming on interface {{device}}","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Network Throughput (bytes/s)","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:703","format":"Bps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:704","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"grid":{},"gridPos":{"h":7,"w":8,"x":8,"y":104},"hiddenSeries":false,"id":50,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"rate(node_network_receive_packets_total{env=\"$env\",device!=\"lo\", fqdn=\"$node\"}[$__rate_interval])","format":"time_series","hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"Outgoing on interface {{device}}","refId":"D"},{"expr":"rate(node_network_receive_packets_total{env=\"$env\",device!=\"lo\", fqdn=\"$node\"}[$__rate_interval])","format":"time_series","hide":false,"interval":"15s","intervalFactor":1,"legendFormat":"Incoming on interface {{device}}","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Network Throughput (packets/s)","tooltip":{"msResolution":false,"shared":true,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:243","format":"pps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:244","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"Shows point-in-time count of open TCP connections.\n\nNote that there could be microbursts occuring on a smaller time scale than our metrics-polling interval.  To check for this, look for spikes in the nearby counter-based graphs of new incoming and outgoing connections.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":16,"y":104},"hiddenSeries":false,"id":17,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"avg_over_time(node_netstat_Tcp_CurrEstab{env=\"$env\",fqdn=~\"$node\"}[$__interval])","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"30s","intervalFactor":1,"legendFormat":"current connections","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Count of established TCP connections","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:862","format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:863","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"Show this host's new TCP connection rate, split into:\n* Outgoing connections when acting as a client\n* Incoming connections when acting as a server\n\nThese kernel counters are incremented for each newly established outgoing (\"active\") or incoming (\"passive\") TCP connection.  This graph converts the counter to a rate to show the trend.\n\nFor reference, an \"active\" (outgoing) connection is where we are the client sending the initial SYN.  A \"passive\" (incoming) connection is where we are the server-side listener receiving the initial SYN.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":0,"y":111},"hiddenSeries":false,"id":45,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_netstat_Tcp_ActiveOpens{fqdn=~\"$node\"}[$__rate_interval]) * 60","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"15s","intervalFactor":1,"legendFormat":"Outgoing TCP connections / minute","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"dsType":"influxdb","expr":"rate(node_netstat_Tcp_PassiveOpens{fqdn=~\"$node\"}[$__rate_interval]) * 60","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"15s","intervalFactor":1,"legendFormat":"Incoming TCP connections / minute","orderByTime":"ASC","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Rate of new outgoing and incoming TCP connections (per min)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:943","format":"short","label":"","logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:944","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This kernel counter indicates the number of times an outgoing TCP SYN packet had to be retransmitted.\n\nThis is not a hard failure (the retry may succeed).  But it always indicates slowness (e.g. the 1st retry occurs after 1 second delay, and each subsequent retry uses exponential backoff).\n\nSpikes could hint at any of:\n* Packet loss along the network path (in either direction, dropping the outgoing SYN or the incoming SYN-ACK)\n* Connection rate-limiting by the remote peer (e.g. firewall, DDoS protection)\n* Saturation on the remote listener, having too many pending connection requests already waiting on is backlog","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":8,"y":111},"hiddenSeries":false,"id":44,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_netstat_TcpExt_TCPSynRetrans{env=\"$env\",fqdn=~\"$node\"}[$__rate_interval]) * 60","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"15s","intervalFactor":1,"legendFormat":"TCP SYN retransmits / minute","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"As a client: Retry rate for new outgoing TCP connection requests (per min)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1024","format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:1025","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"This kernel counter indicates the number of times an incoming TCP SYN packet had to be dropped by the kernel due to the TCP listener's request backlog already being full.\n\nThis is a hard failure.  The TCP client connecting to this host will see this as a failed connection attempt.  The client may or may not implement retry logic to handle this error.","fieldConfig":{"defaults":{"custom":{},"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":16,"y":111},"hiddenSeries":false,"id":19,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.2.0","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_netstat_TcpExt_ListenOverflows{env=\"$env\",fqdn=~\"$node\"}[$__rate_interval]) * 60","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"15s","intervalFactor":1,"legendFormat":"TCP SYN drops / minute","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"As a server: Drop rate for new incoming TCP connection requests (per min)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1184","format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:1185","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":false,"schemaVersion":27,"style":"dark","tags":["host","drilldown","unmanaged"],"templating":{"list":[{"allValue":null,"current":{"selected":false,"text":"gprd","value":"gprd"},"datasource":"Global","definition":"label_values(prometheus_build_info, env)","hide":0,"includeAll":false,"label":null,"multi":false,"name":"env","options":[],"query":"label_values(prometheus_build_info, env)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":false,"text":"thanos-compact-01-inf-gprd.c.gitlab-production.internal","value":"thanos-compact-01-inf-gprd.c.gitlab-production.internal"},"datasource":"Global","definition":"label_values(up{env=\"$env\",job=~\"node(-exporter)?\"}, fqdn)","hide":0,"includeAll":false,"label":"Host","multi":false,"name":"node","options":[],"query":"label_values(up{env=\"$env\",job=~\"node(-exporter)?\"}, fqdn)","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"utc","title":"Host Stats","uid":"bd2Kl9Imk","version":55}}