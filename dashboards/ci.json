{"meta":{"type":"db","canSave":false,"canEdit":false,"canAdmin":false,"canStar":true,"slug":"ci","url":"/d/000000159/ci","expires":"0001-01-01T00:00:00Z","created":"2018-08-17T13:57:37Z","updated":"2019-03-08T09:38:38Z","updatedBy":"ops-contact@gitlab.com","createdBy":"ops-contact@gitlab.com","version":40,"hasAcl":false,"isFolder":false,"folderId":191,"folderTitle":"CI Runners Service","folderUrl":"/dashboards/f/bpcbFeIiz/ci-runners-service","provisioned":false},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":1,"id":null,"iteration":1552037894332,"links":[{"asDropdown":true,"icon":"external link","keepTime":true,"tags":["ci"],"targetBlank":true,"title":"CI dashboards","type":"dashboards"}],"panels":[{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#d44a3a","rgba(237, 129, 40, 0.89)","#299c46"],"datasource":"prometheus-01-inf-gprd","format":"none","gauge":{"maxValue":5,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":2,"w":6,"x":0,"y":0},"id":75,"interval":null,"links":[],"mappingType":2,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"NULL","text":"DOWN","to":"NULL"},{"from":"0","text":"DOWN","to":"0.9"},{"from":"1","text":"PARTIALLY DOW","to":"4.9"},{"from":"5","text":"UP","to":"5.9"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"#5195ce","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(up{job=\"private-runners\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":"1,4.9","title":"private-runners state","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"DOWN","value":"null"},{"op":"=","text":"DOWN","value":"0"},{"op":"=","text":"PARTIALLY DOWN","value":"1"},{"op":"=","text":"PARTIALLY DOWN","value":"2"},{"op":"=","text":"UP","value":"3"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#d44a3a","rgba(237, 129, 40, 0.89)","#299c46"],"datasource":"prometheus-01-inf-gprd","format":"none","gauge":{"maxValue":5,"minValue":0,"show":false,"thresholdLabels":true,"thresholdMarkers":true},"gridPos":{"h":2,"w":6,"x":6,"y":0},"id":76,"interval":null,"links":[],"mappingType":2,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"DOWN","to":"null"},{"from":"0","text":"DOWN","to":"0.9"},{"from":"1","text":"PARTIALLY DOWN","to":"5.9"},{"from":"6","text":"UP","to":"6.9"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"#5195ce","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(up{job=\"shared-runners\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":"0.9,5.9","title":"shared-runners state","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"DOWN","value":"null"},{"op":"=","text":"DOWN","value":"0"},{"op":"=","text":"PARTIALLY DOWN","value":"1"},{"op":"=","text":"PARTIALLY DOWN","value":"2"},{"op":"=","text":"PARTIALLY DOWN","value":"3"},{"op":"=","text":"UP","value":"4"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#d44a3a","rgba(237, 129, 40, 0.89)","#299c46"],"datasource":"prometheus-01-inf-gprd","format":"none","gauge":{"maxValue":4,"minValue":0,"show":false,"thresholdLabels":true,"thresholdMarkers":true},"gridPos":{"h":2,"w":6,"x":12,"y":0},"id":77,"interval":null,"links":[],"mappingType":2,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"DOWN","to":"null"},{"from":"0","text":"DOWN","to":"0.9"},{"from":"1","text":"PARTIALLY DOWN","to":"5.9"},{"from":"6","text":"UP","to":"6.9"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"#5195ce","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(up{job=\"shared-runners-gitlab-org\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":"0.9,5.9","title":"shared-runners-gitlab-org state","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"DOWN","value":"null"},{"op":"=","text":"DOWN","value":"0"},{"op":"=","text":"PARTIALLY DOWN","value":"1"},{"op":"=","text":"PARTIALLY DOWN","value":"2"},{"op":"=","text":"PARTIALLY DOWN","value":"3"},{"op":"=","text":"UP","value":"4"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#d44a3a","rgba(237, 129, 40, 0.89)","#299c46"],"datasource":"prometheus-01-inf-gprd","format":"none","gauge":{"maxValue":4,"minValue":0,"show":false,"thresholdLabels":true,"thresholdMarkers":true},"gridPos":{"h":2,"w":6,"x":18,"y":0},"id":78,"interval":null,"links":[],"mappingType":2,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"DOWN","to":"null"},{"from":"0","text":"DOWN","to":"0.9"},{"from":"1","text":"PARTIALLY DOWN","to":"1.9"},{"from":"2","text":"UP","to":"2.9"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"#5195ce","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(up{job=\"staging-shared-runners\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":"0.9,1.9","title":"staging-shared-runners state","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"DOWN","value":"null"},{"op":"=","text":"DOWN","value":"0"},{"op":"=","text":"PARTIALLY DOWN","value":"1"},{"op":"=","text":"PARTIALLY DOWN","value":"2"},{"op":"=","text":"PARTIALLY DOWN","value":"3"},{"op":"=","text":"UP","value":"4"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"prometheus-01-inf-gprd","decimals":2,"format":"percentunit","gauge":{"maxValue":1,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":5,"w":6,"x":0,"y":2},"id":72,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(gitlab_runner_jobs{job=\"private-runners\"}) / sum(gitlab_runner_concurrent{job=\"private-runners\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":"0.75,0.9","title":"Jobs on private-runners","transparent":false,"type":"singlestat","valueFontSize":"50%","valueMaps":[{"op":"=","text":"0","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"prometheus-01-inf-gprd","decimals":2,"format":"percentunit","gauge":{"maxValue":1,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":5,"w":6,"x":6,"y":2},"id":73,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(gitlab_runner_jobs{job=\"shared-runners\"}) / sum(gitlab_runner_concurrent{job=\"shared-runners\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":"0.75,0.9","title":"Jobs on shared-runners","type":"singlestat","valueFontSize":"50%","valueMaps":[{"op":"=","text":"0","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"prometheus-01-inf-gprd","decimals":2,"format":"percentunit","gauge":{"maxValue":1,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":5,"w":6,"x":12,"y":2},"id":74,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(gitlab_runner_jobs{job=\"shared-runners-gitlab-org\"}) / sum(gitlab_runner_concurrent{job=\"shared-runners-gitlab-org\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":"0.75,0.9","title":"Jobs on shared-runners-gitlab-org","type":"singlestat","valueFontSize":"50%","valueMaps":[{"op":"=","text":"0","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"prometheus-01-inf-gprd","decimals":2,"format":"percentunit","gauge":{"maxValue":1,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":5,"w":6,"x":18,"y":2},"id":79,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(gitlab_runner_jobs{job=\"staging-shared-runners\"})  / sum(gitlab_runner_concurrent{job=\"staging-shared-runners\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":"0.75,0.9","title":"Jobs on staging-shared-runners","type":"singlestat","valueFontSize":"50%","valueMaps":[{"op":"=","text":"0","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"prometheus-01-inf-gprd","format":"none","gauge":{"maxValue":1000,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":0,"y":7},"id":62,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"120%","prefix":"","prefixFontSize":"120%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(max (digitalocean_droplets_count{job=~\"digitalocean_gitlab_bv|digitalocean_gitlab_ci\",region=~\"(nyc1|sfo1)\",tags=~\".*(shared_runners|private_runners|ce_ee_runners).*\"}) without (instance))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":240,"tags":[]}],"thresholds":"","title":"Digital Ocean Droplets","transparent":false,"type":"singlestat","valueFontSize":"120%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"prometheus-01-inf-gprd","format":"none","gauge":{"maxValue":1000,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":4,"y":7},"id":80,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"120%","prefix":"","prefixFontSize":"120%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(max(gcp_exporter_instances_count{project=\"gitlab-ci-155816\",tags=~\".*docker-machine.*\"}) without (instance))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":240,"tags":[]}],"thresholds":"","title":"GCP Machines","transparent":false,"type":"singlestat","valueFontSize":"120%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"prometheus-01-inf-gprd","decimals":null,"format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":8,"y":7},"height":"","id":65,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(hanging_droplets_cleaner_remove_droplets_total{instance=~\"$hanging_droplets_cleaner\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":1,"legendFormat":"","metric":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":120,"tags":[]}],"thresholds":"","title":"Hanging droplets removed","transparent":false,"type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"delta"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"prometheus-01-inf-gprd","decimals":null,"format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":12,"y":7},"height":"","id":68,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(droplet_zero_machines_cleaner_removed_machines_total{instance=~\"$droplet_zero_machines_cleaner\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":1,"legendFormat":"","metric":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":120,"tags":[]}],"thresholds":"","title":"Droplet zero machines removed","transparent":false,"type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"delta"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"prometheus-app-01-inf-gprd","description":"Total of jobs that were started on GitLab.com","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":16,"y":7},"id":127,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":true,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(increase(job_register_attempts_total[$__interval]) - increase(job_register_attempts_failed_total[$__interval]))","format":"time_series","interval":"","intervalFactor":2,"refId":"A"}],"thresholds":"","title":"Started jobs","type":"singlestat","valueFontSize":"70%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"total"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["#d44a3a","rgba(237, 129, 40, 0.89)","#299c46"],"datasource":"prometheus-01-inf-gprd","format":"percentunit","gauge":{"maxValue":1,"minValue":0.8,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":20,"y":7},"id":129,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"1 - sum(gitlab_runner_jobs{stage=~\"(archive|restore)_cache\"}) / sum(gitlab_runner_jobs)","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"0.85,0.9","title":"Cache performance","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","decimals":null,"editable":true,"error":false,"fill":0,"grid":{},"gridPos":{"h":12,"w":24,"x":0,"y":10},"id":2,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(ci_pending_builds{fqdn=~\"$gl_monitor_fqdn\", shared_runners=\"yes\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"pending jobs for project with shared runners enabled","metric":"ci_builds_","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"dsType":"influxdb","expr":"sum(ci_pending_builds{fqdn=~\"$gl_monitor_fqdn\", shared_runners=\"no\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"pending jobs for project without shared runners enabled","metric":"ci_builds_","policy":"default","refId":"C","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"dsType":"influxdb","expr":"sum(ci_running_builds{fqdn=~\"$gl_monitor_fqdn\", shared_runner=\"yes\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"running jobs on shared runners","metric":"ci_builds_","policy":"default","refId":"D","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"dsType":"influxdb","expr":"sum(ci_running_builds{fqdn=~\"$gl_monitor_fqdn\", shared_runner=\"no\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"","intervalFactor":2,"legendFormat":"running jobs on specific runners","metric":"ci_builds_","policy":"default","refId":"E","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]},{"expr":"sum(ci_stale_builds{fqdn=~\"$gl_monitor_fqdn\"})","format":"time_series","intervalFactor":2,"legendFormat":"stale jobs","refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Jobs at GitLab.com","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"cumulative"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":22},"id":96,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","description":"","fill":0,"gridPos":{"h":9,"w":12,"x":0,"y":23},"id":89,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"sort":"current","sortDesc":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":1,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"histogram_quantile(0.5, sum(rate(job_queue_duration_seconds_bucket{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\"}[5m])) by (shared_runner, jobs_running_for_project, le))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"shared: {{shared_runner}} - running_jobs: {{jobs_running_for_project}} - 50th","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"histogram_quantile(0.9, sum(rate(job_queue_duration_seconds_bucket{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\"}[5m])) by (shared_runner, jobs_running_for_project, le))","format":"time_series","intervalFactor":2,"legendFormat":"shared: {{shared_runner}} - running_jobs: {{jobs_running_for_project}} - 90th","refId":"B"},{"expr":"histogram_quantile(0.95, sum(rate(job_queue_duration_seconds_bucket{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\"}[5m])) by (shared_runner, jobs_running_for_project, le))","format":"time_series","intervalFactor":2,"legendFormat":"shared: {{shared_runner}} - running_jobs: {{jobs_running_for_project}} - 95th","refId":"C"},{"expr":"histogram_quantile(0.99, sum(rate(job_queue_duration_seconds_bucket{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\"}[5m])) by (shared_runner, jobs_running_for_project, le))","format":"time_series","intervalFactor":2,"legendFormat":"shared: {{shared_runner}} - running_jobs: {{jobs_running_for_project}} - 99th","refId":"D"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":10}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Job queue duration histogram percentiles (5m rate)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","description":"The bigger value for all lines, the better it is.\n\n10s line on level 40% means: less than 40% of jobs was queued in less than 10s. So having 1s line at the level of 100% is what would be the best.","fill":0,"gridPos":{"h":9,"w":12,"x":12,"y":23},"id":84,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":1,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(increase(job_queue_duration_seconds_bucket{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\", le=\"1\"}[5m])) by (shared_runner, jobs_running_for_project) / sum(increase(job_queue_duration_seconds_count{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\"}[5m])) by (shared_runner, jobs_running_for_project)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"shared: {{shared_runner}} - running_jobs: {{jobs_running_for_project}} - 1s","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"sum(increase(job_queue_duration_seconds_bucket{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\", le=\"3\"}[5m])) by (shared_runner, jobs_running_for_project) / sum(increase(job_queue_duration_seconds_count{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\"}[5m])) by (shared_runner, jobs_running_for_project)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"shared: {{shared_runner}} - running_jobs: {{jobs_running_for_project}} - 3s","refId":"B"},{"expr":"sum(increase(job_queue_duration_seconds_bucket{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\", le=\"10\"}[5m])) by (shared_runner, jobs_running_for_project) / sum(increase(job_queue_duration_seconds_count{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\"}[5m])) by (shared_runner, jobs_running_for_project)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"shared: {{shared_runner}} - running_jobs: {{jobs_running_for_project}} - 10s","refId":"C"},{"expr":"sum(increase(job_queue_duration_seconds_bucket{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\", le=\"30\"}[5m])) by (shared_runner, jobs_running_for_project) / sum(increase(job_queue_duration_seconds_count{environment=~\"$gitlab_env\", jobs_running_for_project=~\"$jobs_running_for_project\"}[5m])) by (shared_runner, jobs_running_for_project)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"shared: {{shared_runner}} - running_jobs: {{jobs_running_for_project}} - 30s","refId":"D"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"lt","value":0.8,"yaxis":"left"}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Job queue duration histogram (5m increase)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Job queue timings","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":23},"id":97,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":6,"w":6,"x":0,"y":24},"id":85,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[{"dashUri":"db/sidekiq-stats","dashboard":"Sidekiq Stats","keepTime":true,"targetBlank":true,"title":"Sidekiq Stats","type":"dashboard"}],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sidekiq_queue_size{environment=~\"$gitlab_env\",name=~\"pipeline.*\"} and on (fqdn) gitlab:redis_master","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{name}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Sidekiq Queues","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":6,"w":6,"x":6,"y":24},"id":88,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"sort":"max","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[{"dashUri":"db/fleet-overview","dashboard":"Fleet Overview","keepTime":true,"targetBlank":true,"title":"Fleet Overview","type":"dashboard"}],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/AVG/","color":"#e0f9d7","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{tier=\"sv\", environment=\"$gitlab_env\", type=\"api\"}","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"avg(node_load1{tier=\"sv\", environment=\"$gitlab_env\", type=\"api\"})","format":"time_series","intervalFactor":2,"legendFormat":"AVG","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"API Workers Load1","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","fill":0,"gridPos":{"h":6,"w":6,"x":12,"y":24},"id":90,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(increase(gitlab_workhorse_http_request_duration_seconds_count{environment=\"$gitlab_env\", route=~\".*/api/v4/jobs/request.*\"}[5m]))","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"amount","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"`jobs/request` requests","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":true,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":6,"w":6,"x":18,"y":24},"id":91,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":false,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(increase(gitlab_runner_api_request_statuses_total{instance=~\"${runner_managers:pipe}\"}[5m])) by (job, status, endpoint)","format":"time_series","intervalFactor":2,"legendFormat":"{{job}} - {{endpoint}} - {{status}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Job requests on Runners (5m)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Sidekiq \u0026 API","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":24},"id":98,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":9,"w":8,"x":0,"y":25},"id":28,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":null,"sortDesc":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_jobs{instance=~\"${runner_managers:pipe}\"}) by (instance)","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Jobs running on runners owned by GitLab Inc. (by instance)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":1,"grid":{},"gridPos":{"h":9,"w":8,"x":8,"y":25},"id":71,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_jobs{instance=~\"${runner_managers:pipe}\"}) by (instance, runner)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{instance}} - {{runner}}","orderByTime":"ASC","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Jobs running on runners owned by GitLab Inc. (by worker)","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":1,"grid":{},"gridPos":{"h":9,"w":8,"x":16,"y":25},"id":1,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_jobs{instance=~\"${runner_managers:pipe}\"}) by (job)","format":"time_series","intervalFactor":2,"legendFormat":"{{job}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Jobs running on runners owned by GitLab Inc. (by runner type)","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Jobs running on runners owned by GitLab Inc. (part I)","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":25},"id":99,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":1,"gridPos":{"h":9,"w":8,"x":0,"y":26},"id":45,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_jobs{instance=~\"${runner_managers:pipe}\"}) by (state)","format":"time_series","intervalFactor":2,"legendFormat":"{{state}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Jobs running on runners owned by GitLab Inc. (by Runner's state)","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":1,"gridPos":{"h":9,"w":8,"x":8,"y":26},"id":6,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_jobs{instance=~\"${runner_managers:pipe}\"}) by (stage)","format":"time_series","intervalFactor":2,"legendFormat":"{{stage}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Jobs running on runners owned by GitLab Inc. (by Runner's stage)","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":1,"gridPos":{"h":9,"w":8,"x":16,"y":26},"id":46,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_jobs{instance=~\"${runner_managers:pipe}\"}) by (executor_stage)","format":"time_series","intervalFactor":2,"legendFormat":"{{executor_stage}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Jobs running on runners owned by GitLab Inc. (by Runner's executor_stage)","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Jobs running on runners owned by GitLab Inc. (part II)","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":26},"id":151,"panels":[{"aliasColors":{},"bars":true,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":11,"w":24,"x":0,"y":60},"id":149,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":false,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(increase(gitlab_runner_jobs_total{instance=~\"${runner_managers:pipe}\"}[1m])) by (job)","format":"time_series","instant":false,"intervalFactor":4,"legendFormat":"{{job}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Jobs started on Runners","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"opm","label":"","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"pending jobs","logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}}],"title":"Jobs started on Runners owned by GitLab Inc.","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":27},"id":138,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":11,"w":8,"x":0,"y":28},"id":146,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":1,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_jobs{instance=~\"${runner_managers:pipe}\"}) by (job) / sum(gitlab_runner_concurrent{instance=~\"${runner_managers:pipe}\"}) by (job)","format":"time_series","intervalFactor":1,"legendFormat":"{{job}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Concurrent by job","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":11,"w":8,"x":8,"y":28},"id":136,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":1,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_jobs{instance=~\"${runner_managers:pipe}\"}) by (instance) / sum(gitlab_runner_concurrent{instance=~\"${runner_managers:pipe}\"}) by (instance)","format":"time_series","intervalFactor":1,"legendFormat":"{{instance}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Concurrent by instance","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":11,"w":8,"x":16,"y":28},"id":139,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":1,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_jobs{instance=~\"${runner_managers:pipe}\"}) by (instance, runner) / sum(gitlab_runner_limit{instance=~\"${runner_managers:pipe}\"}) by (instance, runner)","format":"time_series","intervalFactor":1,"legendFormat":"{{instance}} - {{runner}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Limit by worker","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"title":"Runner limits","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":28},"id":100,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":14,"w":12,"x":0,"y":73},"id":82,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"avg","color":"#cffaff","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(irate(gitlab_runner_failed_jobs_total{instance=~\"${runner_managers:pipe}\",failure_reason=~\"$runner_job_failure_reason\"}[1m])) by (instance, failure_reason)","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}} - {{failure_reason}}","refId":"C"},{"expr":"AVG(irate(gitlab_runner_failed_jobs_total{instance=~\"${runner_managers:pipe}\",failure_reason=~\"$runner_job_failure_reason\"}[1m]))","format":"time_series","intervalFactor":2,"legendFormat":"avg","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Jobs failures on Runners (by instance)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":14,"w":12,"x":12,"y":73},"id":83,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"avg","color":"#cffaff","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(irate(gitlab_runner_failed_jobs_total{instance=~\"${runner_managers:pipe}\",failure_reason=~\"$runner_job_failure_reason\"}[1m])) by (job, failure_reason)","format":"time_series","intervalFactor":2,"legendFormat":"{{job}} - {{failure_reason}}","refId":"C"},{"expr":"AVG(irate(gitlab_runner_failed_jobs_total{instance=~\"${runner_managers:pipe}\",failure_reason=~\"$runner_job_failure_reason\"}[1m]))","format":"time_series","intervalFactor":2,"legendFormat":"avg","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Jobs failures on Runners (by Runner type)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Jobs failures on Runners","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":29},"id":101,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","decimals":null,"editable":true,"error":false,"fill":0,"gridPos":{"h":8,"w":12,"x":0,"y":74},"id":3,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_autoscaling_machine_states{executor=\"docker+machine\", instance=~\"${runner_managers:pipe}\"}) by (job, state)","format":"time_series","intervalFactor":2,"legendFormat":"{{job}}: {{state}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Auto-scale machines states","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":1,"gridPos":{"h":8,"w":12,"x":12,"y":74},"id":4,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_autoscaling_machine_states{executor=\"docker+machine\", instance=~\"${runner_managers:pipe}\"}) by (job, instance)","format":"time_series","intervalFactor":2,"legendFormat":"{{job}}: {{instance}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Auto-scaled machines","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Auto-scale machines","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":30},"id":102,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","decimals":2,"editable":true,"error":false,"fill":1,"gridPos":{"h":9,"w":8,"x":0,"y":31},"id":5,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(gitlab_runner_autoscaling_actions_total{executor=\"docker+machine\", instance=~\"${runner_managers:pipe}\"}[1m])) by (job, action)","format":"time_series","intervalFactor":2,"legendFormat":"{{job}}: {{action}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Rate of machine creation / deletion","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","decimals":2,"editable":true,"error":false,"fill":0,"gridPos":{"h":9,"w":8,"x":8,"y":31},"id":47,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"show":true,"sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"histogram_quantile(0.50, sum(rate(gitlab_runner_autoscaling_machine_creation_duration_seconds_bucket{executor=\"docker+machine\",instance=~\"${runner_managers:pipe}\"}[$__interval])) by (job,le))","format":"time_series","intervalFactor":2,"legendFormat":"{{job}}: 50th","refId":"D"},{"expr":"histogram_quantile(0.90, sum(rate(gitlab_runner_autoscaling_machine_creation_duration_seconds_bucket{executor=\"docker+machine\",instance=~\"${runner_managers:pipe}\"}[$__interval])) by (job,le))","format":"time_series","intervalFactor":2,"legendFormat":"{{job}}: 90th","refId":"E"},{"expr":"histogram_quantile(0.99, sum(rate(gitlab_runner_autoscaling_machine_creation_duration_seconds_bucket{executor=\"docker+machine\",instance=~\"${runner_managers:pipe}\"}[$__interval])) by (job,le))","format":"time_series","intervalFactor":2,"legendFormat":"{{job}}: 99th","refId":"F"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Machines creation timing","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":1,"gridPos":{"h":9,"w":8,"x":16,"y":31},"id":19,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_jobs{stage=~\"canceled|timedout\",instance=~\"${runner_managers:pipe}\"}) by (instance, stage)","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}: {{stage}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Stuck machines","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Machine operations rates and stuck machines count","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":31},"id":103,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","description":"May not count all droplets at this moment","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":85},"id":61,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"max(sum(label_replace(digitalocean_droplets_count{job=~\"digitalocean_gitlab_bv|digitalocean_gitlab_ci\",region=~\"(nyc1|sfo1)\",tags=~\".*(shared_runners|private_runners|ce_ee_runners).*\"}, \"runner_group\", \"$2\", \"tags\", \"(.*,)?(shared_runners|private_runners|ce_ee_runners)(,.*)?\")) by (runner_group, instance)) by (runner_group)","format":"time_series","intervalFactor":2,"legendFormat":"{{runner_group}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Digital Ocean Droplets by Tag","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":85},"id":81,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(max(label_replace(label_replace(label_replace(gcp_exporter_instances_count{project=\"gitlab-ci-155816\"}, \"runner_group\", \"$2\", \"tags\", \"(.*,)?(srm|prm|gsrm)(,.*)?\"), \"gitlab_instance\", \"$2\", \"tags\", \"(.*,)?(gitlab-com|dev-gitlab-org)(,.*)?\"), \"runner_subgroup\", \"$2\", \"tags\", \"(.*,)?((.*)-group)(,.*)?\")) by (zone, runner_group, gitlab_instance, runner_subgroup)) by (runner_group)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{runner_group}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"GCP Machines","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Autoscale providers","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":32},"id":145,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":12,"w":12,"x":0,"y":86},"id":143,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"histogram_quantile(0.25, sum(rate(gitlab_runner_job_duration_seconds_bucket{instance=~\"${runner_managers:pipe}\"}[5m])) by (job, le))","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"25th: {{job}}","refId":"F"},{"expr":"histogram_quantile(0.5, sum(rate(gitlab_runner_job_duration_seconds_bucket{instance=~\"${runner_managers:pipe}\"}[5m])) by (job, le))","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"50th: {{job}}","refId":"A"},{"expr":"histogram_quantile(0.75, sum(rate(gitlab_runner_job_duration_seconds_bucket{instance=~\"${runner_managers:pipe}\"}[5m])) by (job, le))","format":"time_series","intervalFactor":1,"legendFormat":"75th: {{job}}","refId":"E"},{"expr":"histogram_quantile(0.9, sum(rate(gitlab_runner_job_duration_seconds_bucket{instance=~\"${runner_managers:pipe}\"}[4m])) by (job, le))","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"90th: {{job}} ","refId":"B"},{"expr":"histogram_quantile(0.95, sum(rate(gitlab_runner_job_duration_seconds_bucket{instance=~\"${runner_managers:pipe}\"}[5m])) by (job, le))","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"95th: {{job}}","refId":"C"},{"expr":"histogram_quantile(0.99, sum(rate(gitlab_runner_job_duration_seconds_bucket{instance=~\"${runner_managers:pipe}\"}[5m])) by (job, le))","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"99th: {{job}}","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Job durations histogram by runner type","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":12,"w":12,"x":12,"y":86},"id":147,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"histogram_quantile(0.5, sum(rate(gitlab_runner_job_duration_seconds_bucket{instance=~\"${runner_managers:pipe}\"}[5m])) by (job, runner, le))","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"50th: {{job}} - {{runner}}","refId":"A"},{"expr":"histogram_quantile(0.9, sum(rate(gitlab_runner_job_duration_seconds_bucket{instance=~\"${runner_managers:pipe}\"}[4m])) by (job, runner, le))","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"90th: {{job}} - {{runner}}","refId":"B"},{"expr":"histogram_quantile(0.95, sum(rate(gitlab_runner_job_duration_seconds_bucket{instance=~\"${runner_managers:pipe}\"}[5m])) by (job, runner, le))","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"95th: {{job}} - {{runner}}","refId":"C"},{"expr":"histogram_quantile(0.99, sum(rate(gitlab_runner_job_duration_seconds_bucket{instance=~\"${runner_managers:pipe}\"}[5m])) by (job, runner, le))","format":"time_series","instant":false,"intervalFactor":1,"legendFormat":"99th: {{job}} - {{runner}}","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Job durations histogram by worker","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"title":"Job durations","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":33},"id":104,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","description":"What triggered the job, and how many of these are there?","editable":true,"error":false,"fill":1,"gridPos":{"h":9,"w":12,"x":0,"y":87},"id":13,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(ci_running_builds{shared_runner=\"yes\",fqdn=~\"$gl_monitor_fqdn\",mirror=\"yes\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Mirror","metric":"ci_builds_per_runner","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]},{"dsType":"influxdb","expr":"sum(ci_running_builds{shared_runner=\"yes\",fqdn=~\"$gl_monitor_fqdn\",triggered=\"yes\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Trigger Request","metric":"ci_builds_per_runner","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]},{"dsType":"influxdb","expr":"sum(ci_running_builds{shared_runner=\"yes\",fqdn=~\"$gl_monitor_fqdn\",scheduled=\"yes\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Scheduled","metric":"ci_builds_per_runner","policy":"default","refId":"C","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]},{"dsType":"influxdb","expr":"sum(ci_running_builds{shared_runner=\"yes\",fqdn=~\"$gl_monitor_fqdn\",scheduled!=\"yes\",triggered!=\"yes\",mirror!=\"yes\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Push","metric":"ci_builds_per_runner","policy":"default","refId":"D","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Shared Runners - Running Jobs Origin","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","description":"What triggered the job, and how many of these are there?","fill":1,"gridPos":{"h":9,"w":12,"x":12,"y":87},"id":51,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(ci_running_builds{shared_runner=\"no\",triggered=\"yes\",fqdn=~\"$gl_monitor_fqdn\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Triggered","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]},{"dsType":"influxdb","expr":"sum(ci_running_builds{shared_runner=\"no\",scheduled=\"yes\",fqdn=~\"$gl_monitor_fqdn\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Scheduled","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]},{"dsType":"influxdb","expr":"sum(ci_running_builds{shared_runner=\"no\",mirror=\"yes\",fqdn=~\"$gl_monitor_fqdn\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Mirroring","policy":"default","refId":"C","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]},{"dsType":"influxdb","expr":"sum(ci_running_builds{shared_runner=\"no\",mirror=\"no\",triggered=\"no\",scheduled=\"no\",fqdn=~\"$gl_monitor_fqdn\",has_minutes=~\"$has_minutes\"})","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Push","policy":"default","refId":"D","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Specific Runners - Running Jobs Origin","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","editable":true,"error":false,"fill":1,"gridPos":{"h":9,"w":24,"x":0,"y":96},"id":14,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(ci_running_builds{shared_runner=\"yes\",fqdn=~\"$gl_monitor_fqdn\",has_minutes=~\"$has_minutes\"}) by (runner)","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"runner {{runner}}","metric":"ci_builds_per_runner","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Shared runners - jobs distribution by runner","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Jobs distribution","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":34},"id":105,"panels":[{"columns":[{"text":"Current","value":"current"},{"text":"Min","value":"min"},{"text":"Max","value":"max"},{"text":"Avg","value":"avg"}],"datasource":"prometheus-app-01-inf-gprd","filterNull":false,"fontSize":"100%","gridPos":{"h":7,"w":12,"x":0,"y":88},"id":33,"links":[],"pageSize":15,"scroll":true,"showHeader":true,"sort":{"col":1,"desc":true},"styles":[{"dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"date"},{"colorMode":"cell","colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"decimals":0,"pattern":"/.*/","thresholds":["400","500"],"type":"number","unit":"none"}],"targets":[{"expr":"sum(ci_pending_builds{fqdn=~\"$gl_monitor_fqdn\", shared_runners=\"yes\",has_minutes=~\"$has_minutes\"}) by (namespace)","format":"time_series","intervalFactor":2,"legendFormat":"Namespace: {{namespace}}","refId":"A","step":30}],"title":"Pending jobs with shared runners enabled","transform":"timeseries_aggregations","type":"table"},{"columns":[{"text":"Current","value":"current"},{"text":"Min","value":"min"},{"text":"Max","value":"max"},{"text":"Avg","value":"avg"}],"datasource":"prometheus-app-01-inf-gprd","filterNull":false,"fontSize":"100%","gridPos":{"h":7,"w":12,"x":12,"y":88},"id":60,"links":[],"pageSize":15,"scroll":true,"showHeader":true,"sort":{"col":1,"desc":true},"styles":[{"dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"date"},{"colorMode":"cell","colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"decimals":0,"pattern":"/.*/","thresholds":["400","500"],"type":"number","unit":"none"}],"targets":[{"expr":"sum(ci_running_builds{fqdn=~\"$gl_monitor_fqdn\", shared_runner=\"yes\",has_minutes=~\"$has_minutes\"}) by (namespace)","format":"time_series","intervalFactor":2,"legendFormat":"Namespace: {{namespace}}","refId":"A","step":30}],"title":"Running jobs on Shared Runners","transform":"timeseries_aggregations","type":"table"}],"repeat":null,"title":"Jobs queue","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":35},"id":109,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":0,"gridPos":{"h":14,"w":8,"x":0,"y":89},"id":15,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"instance:node_memory_utilization:ratio{instance=~\"${runner_managers:pipe}\"}","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"{{instance}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory usage","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":0,"gridPos":{"h":14,"w":8,"x":8,"y":89},"id":130,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"instance:node_cpu_utilization:ratio{instance=~\"${runner_managers:pipe}\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{instance}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU usage","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":0,"gridPos":{"h":14,"w":8,"x":16,"y":89},"id":132,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{instance=~\"${runner_managers:pipe}\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"intervalFactor":2,"legendFormat":"{{instance}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Load","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":0,"gridPos":{"h":14,"w":8,"x":0,"y":103},"id":131,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"process_open_fds{instance=~\"${runner_managers:pipe}\"} / process_max_fds{instance=~\"${runner_managers:pipe}\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"hide":false,"intervalFactor":2,"legendFormat":"{{instance}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":10,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"File Descriptors","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":0,"gridPos":{"h":14,"w":8,"x":8,"y":103},"id":133,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"instance:node_filesystem_avail:ratio{instance=~\"${runner_managers:pipe}\",fstype=\"ext4\"}","format":"time_series","intervalFactor":1,"legendFormat":"{{instance}} - {{device}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk available","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"fill":0,"gridPos":{"h":14,"w":8,"x":16,"y":103},"id":134,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/reads/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"instance:node_disk_writes_completed:irate1m{instance=~\"${runner_managers:pipe}\"}","format":"time_series","hide":false,"interval":"1m","intervalFactor":1,"legendFormat":"{{instance}} - writes","refId":"C"},{"expr":"instance:node_disk_reads_completed:irate1m{instance=~\"${runner_managers:pipe}\"}","format":"time_series","hide":false,"interval":"1m","intervalFactor":1,"legendFormat":"{{instance}} - reads","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"IOPS","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"iops","label":"","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Runner manager resources usage","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":36},"id":110,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":90},"id":35,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(gitlab_workhorse_builds_register_handler_requests[5m])) by (status)","format":"time_series","intervalFactor":2,"legendFormat":"{{status}}","refId":"A","step":120}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Requests state counter","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":90},"id":36,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(gitlab_workhorse_builds_register_handler_open) by (state)","format":"time_series","intervalFactor":2,"legendFormat":"{{state}}","refId":"A","step":120}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Requests open in given state","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Workhorse Long polling","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":37},"id":111,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","fill":0,"gridPos":{"h":10,"w":8,"x":0,"y":39},"id":37,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(gitlab_workhorse_queueing_busy{queue_name=\"ci_api_job_requests\",job=\"gitlab-workhorse-api\"})","format":"time_series","intervalFactor":2,"legendFormat":"handled","refId":"B","step":240},{"expr":"sum(gitlab_workhorse_queueing_limit{queue_name=\"ci_api_job_requests\",job=\"gitlab-workhorse-api\"})","format":"time_series","intervalFactor":2,"legendFormat":"handling limit","refId":"C","step":240}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Requests handled","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","fill":0,"gridPos":{"h":10,"w":8,"x":8,"y":39},"id":39,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"max(gitlab_workhorse_queueing_waiting{queue_name=\"ci_api_job_requests\",job=\"gitlab-workhorse-api\"})","format":"time_series","intervalFactor":2,"legendFormat":"max waiting in queue","refId":"A","step":240},{"expr":"max(gitlab_workhorse_queueing_queue_limit{queue_name=\"ci_api_job_requests\",job=\"gitlab-workhorse-api\"})","format":"time_series","intervalFactor":2,"legendFormat":"queueing limit","refId":"D","step":240},{"expr":"avg(gitlab_workhorse_queueing_waiting{queue_name=\"ci_api_job_requests\",job=\"gitlab-workhorse-api\"})","format":"time_series","intervalFactor":2,"legendFormat":"average waiting in queue","refId":"B","step":240}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Requests queued (max)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","fill":0,"gridPos":{"h":10,"w":8,"x":16,"y":39},"id":38,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":1,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"histogram_quantile(0.50, sum(rate(gitlab_workhorse_queueing_waiting_time_bucket{queue_name=\"ci_api_job_requests\",job=\"gitlab-workhorse-api\"}[5m])) by (le))","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"50th","refId":"A","step":240},{"expr":"histogram_quantile(0.75, sum(rate(gitlab_workhorse_queueing_waiting_time_bucket{queue_name=\"ci_api_job_requests\",job=\"gitlab-workhorse-api\"}[5m])) by (le))","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"75th","refId":"B","step":240},{"expr":"histogram_quantile(0.90, sum(rate(gitlab_workhorse_queueing_waiting_time_bucket{queue_name=\"ci_api_job_requests\",job=\"gitlab-workhorse-api\"}[5m])) by (le))","format":"time_series","intervalFactor":2,"legendFormat":"90th","refId":"C"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Request Queueing Time","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"dtdurations","label":"","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Workhorse Queueing","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":38},"id":112,"panels":[{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"prometheus-app-01-inf-gprd","format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":8,"w":2,"x":0,"y":40},"id":41,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(gitlab_workhorse_queueing_limit{job=\"gitlab-workhorse-api\",queue_name=\"ci_api_job_requests\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Handling limit","metric":"gitlab_workhorse_queueing_limit","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":1800,"tags":[]}],"thresholds":"","title":"Requests handling limit","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"prometheus-app-01-inf-gprd","decimals":null,"format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":8,"w":2,"x":2,"y":40},"id":42,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"sum(gitlab_workhorse_queueing_queue_limit{job=\"gitlab-workhorse-api\",queue_name=\"ci_api_job_requests\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Handling limit","metric":"gitlab_workhorse_queueing_limit","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":1800,"tags":[]}],"thresholds":"","title":"Requests queueing limit","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"prometheus-app-01-inf-gprd","decimals":null,"format":"s","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":8,"w":2,"x":4,"y":40},"id":43,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","expr":"max(gitlab_workhorse_queueing_queue_timeout{job=\"gitlab-workhorse-api\",queue_name=\"ci_api_job_requests\"})","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"Queueing timeout","metric":"gitlab_workhorse_queueing_limit","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":1800,"tags":[]}],"thresholds":"","title":"Requests queueing timeout","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","fill":1,"gridPos":{"h":8,"w":18,"x":6,"y":40},"id":44,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(rate(gitlab_workhorse_queueing_errors{queue_name=\"ci_api_job_requests\",job=\"gitlab-workhorse-api\"}[5m])) by (type)","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{type}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":120,"tags":[]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Queueing errors","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Workhorse Queueing errors and limits","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":39},"id":125,"panels":[{"alert":{"conditions":[{"evaluator":{"params":[0.15],"type":"gt"},"operator":{"type":"and"},"query":{"params":["A","5m","now"]},"reducer":{"params":[],"type":"median"},"type":"query"}],"executionErrorState":"keep_state","frequency":"60s","handler":1,"name":"Cache performance alert","noDataState":"no_data","notifications":[]},"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","description":"Relation of jobs in cache archive/restore stage to all jobs.","fill":0,"gridPos":{"h":8,"w":24,"x":0,"y":93},"id":123,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"AVG","color":"#f9e2d2","linewidth":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(gitlab_runner_jobs{stage=~\"(archive|restore)_cache\",instance=~\"${runner_managers:pipe}\"}) by (instance) / sum(gitlab_runner_jobs{instance=~\"${runner_managers:pipe}\"}) by (instance)","format":"time_series","intervalFactor":1,"legendFormat":"{{instance}}","refId":"A"},{"expr":"avg(sum(gitlab_runner_jobs{stage=~\"(archive|restore)_cache\",instance=~\"${runner_managers:pipe}\"}) by (instance) / sum(gitlab_runner_jobs{instance=~\"${runner_managers:pipe}\"}) by (instance))","format":"time_series","intervalFactor":5,"legendFormat":"AVG","refId":"B"}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":0.15}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Cache performance","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":2,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"title":"Cache","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":40},"id":115,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":9,"w":8,"x":0,"y":94},"id":52,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_load1{fqdn=~\"$cache_server\"}","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","metric":"node_load15","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":40,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Load","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":9,"w":8,"x":8,"y":94},"id":53,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"avg(irate(node_cpu_seconds_total{fqdn=~\"$cache_server\",mode=~\"iowait|user|system|steal\"}[1m])) by (fqdn,mode)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}} - {{mode}}","metric":"node_cpu","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":40,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":9,"w":8,"x":16,"y":94},"id":54,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_memory_MemTotal_bytes{fqdn=~\"$cache_server\"}","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}: total","metric":"node_cpu","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":40,"tags":[]},{"expr":"node_memory_MemTotal_bytes{fqdn=~\"$cache_server\"} - node_memory_MemFree_bytes{fqdn=~\"$cache_server\"} - node_memory_Buffers_bytes{fqdn=~\"$cache_server\"} - node_memory_Cached_bytes{fqdn=~\"$cache_server\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{fqdn}}: used","refId":"B","step":40}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":9,"w":8,"x":0,"y":103},"id":55,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*: read/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(rate(node_disk_read_time_seconds_total{fqdn=~\"$cache_server\", device!~\"dm.*|md.*\"}[1m])) by (fqdn,device)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}} - {{device}}: read","metric":"node_cpu","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":40,"tags":[]},{"expr":"sum(rate(node_disk_read_time_seconds_total{fqdn=~\"$cache_server\", device!~\"dm.*|md.*\"}[1m])) by (fqdn,device)","format":"time_series","intervalFactor":2,"legendFormat":"{{fqdn}} - {{device}}: write","refId":"B","step":40}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total IO Wait","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ms","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":9,"w":8,"x":8,"y":103},"id":57,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*: read/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(rate(node_disk_reads_completed_total{fqdn=~\"$cache_server\", device!~\"dm.*|md.*\"}[1m])) by (fqdn,device)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}} - {{device}}: reads","metric":"node_cpu","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":40,"tags":[]},{"expr":"sum(rate(node_disk_writes_completed_total{fqdn=~\"$cache_server\", device!~\"dm.*|md.*\"}[1m])) by (fqdn,device)","format":"time_series","intervalFactor":2,"legendFormat":"{{fqdn}} - {{device}}: writes","refId":"B","step":40}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total IOPS","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"iops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":9,"w":8,"x":16,"y":103},"id":58,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*: read/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node_filesystem_avail_bytes{fqdn=~\"$cache_server\",fstype=~\"ext4|xfs\"}","format":"time_series","intervalFactor":2,"legendFormat":"{{fqdn}} - {{mountpoint}}","metric":"","refId":"C","step":40}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Filesystem","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":9,"w":6,"x":0,"y":112},"id":56,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"node_netstat_Tcp_CurrEstab{fqdn=~\"$cache_server\"}","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","metric":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":40,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Established connections","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":9,"w":6,"x":6,"y":112},"id":59,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*receive/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(node_network_receive_bytes_total{fqdn=~\"$cache_server\",device=~\"eth.*\"}[1m])","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}} - {{device}}: receive","metric":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":40,"tags":[]},{"expr":"rate(node_network_transmit_bytes_total{fqdn=~\"$cache_server\",device=~\"eth.*\"}[1m])","format":"time_series","intervalFactor":2,"legendFormat":"{{fqdn}} - {{device}}: transmit","metric":"","refId":"B","step":40}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Network usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"Bps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":9,"w":6,"x":12,"y":112},"id":66,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(rate(nginx_http_requests_total{fqdn=~\"$cache_server\",job=\"runners-cache-server\"}[1m])) by (fqdn,status)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}} - {{status}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Nginx requests","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":9,"w":6,"x":18,"y":112},"id":67,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(nginx_http_connections{fqdn=~\"$cache_server\",job=\"runners-cache-server\"}) by (fqdn)","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Nginx connections","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":9,"w":8,"x":0,"y":121},"id":119,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"minio_disk_storage_used_bytes{fqdn=~\"$cache_server\"}","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":1,"legendFormat":"{{fqdn}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Storage used by minio server","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":9,"w":8,"x":8,"y":121},"id":120,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/received/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(minio_network_received_bytes_total{fqdn=~\"$cache_server\"}[5m])","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":1,"legendFormat":"{{fqdn}}: received","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"expr":"irate(minio_network_sent_bytes_total{fqdn=~\"$cache_server\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"{{fqdn}}: sent","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Data rate by minio","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"Bps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":0,"gridPos":{"h":9,"w":8,"x":16,"y":121},"id":121,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/sent/","transform":"negative-Y"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(minio_http_requests_duration_seconds_count{fqdn=~\"$cache_server\"}[5m])","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":1,"legendFormat":"{{fqdn}}: {{request_type}}","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Object operations by minio","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"reqps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Cache servers","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":41},"id":113,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":95},"id":48,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(increase(gitlab_runner_errors_total{instance=~\"${runner_managers:pipe}\"}[5m])) by (job,level)","format":"time_series","intervalFactor":2,"legendFormat":"{{job}}: {{level}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Runners error 5m rate (by job\u0026level)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":95},"id":49,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"show":true,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(increase(gitlab_runner_errors_total{instance=~\"${runner_managers:pipe}\"}[5m])) by (instance,level)","format":"time_series","intervalFactor":2,"legendFormat":"{{instance}}: {{level}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Runners error 5m rate (by instance\u0026level)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Runners errors","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":42},"id":114,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","decimals":0,"editable":true,"error":false,"fill":0,"gridPos":{"h":12,"w":12,"x":0,"y":96},"id":18,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"hideZero":false,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":1,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"time() - process_start_time_seconds{instance=~\"${runner_managers:pipe}\",job=~\"${runner_type}\"}","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"intervalFactor":2,"legendFormat":"{{instance}}","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":30,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Runners uptime","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"columns":[],"datasource":"prometheus-01-inf-gprd","editable":true,"error":false,"filterNull":false,"fontSize":"100%","gridPos":{"h":12,"w":12,"x":12,"y":96},"hideTimeOverride":false,"id":12,"links":[],"pageSize":null,"scroll":true,"showHeader":true,"sort":{"col":2,"desc":false},"styles":[{"dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"date"},{"colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"decimals":2,"pattern":"/.*/","thresholds":[],"type":"string","unit":"short"}],"targets":[{"expr":"gitlab_runner_version_info{instance=~\"${runner_managers:pipe}\"}","format":"time_series","interval":"2m","intervalFactor":2,"legendFormat":"{{instance}}: {{version}} ({{revision}})","refId":"B"}],"timeFrom":"1m","title":"Runner versions","transform":"timeseries_aggregations","type":"table"}],"repeat":null,"title":"Runners uptime \u0026 version","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":43},"id":155,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","fill":1,"gridPos":{"h":7,"w":24,"x":0,"y":97},"id":153,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(job_trace_archive_failed_total[$__interval])) by (fqdn)","format":"time_series","interval":"5m","intervalFactor":1,"legendFormat":"{{fqdn}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Trace archiving failures rate","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"title":"Traces archiving","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":44},"id":106,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","editable":true,"error":false,"fill":1,"gridPos":{"h":7,"w":8,"x":0,"y":98},"id":20,"legend":{"alignAsTable":true,"avg":true,"current":false,"max":true,"min":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(increase(gitlab_workhorse_multipart_upload_bytes{type=\"artifacts\"}[1h]))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"1h","intervalFactor":2,"legendFormat":"Uploads size","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":7200,"tags":[]},{"expr":"sum(increase(gitlab_workhorse_sendfile_bytes{type=\"artifacts\"}[1h]))","format":"time_series","interval":"1h","intervalFactor":2,"legendFormat":"Downloads size","refId":"B","step":7200}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Artifacts operations","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","editable":true,"error":false,"fill":1,"gridPos":{"h":7,"w":8,"x":8,"y":98},"id":21,"legend":{"alignAsTable":true,"avg":true,"current":false,"max":true,"min":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(increase(gitlab_workhorse_multipart_upload_requests{type=\"artifacts\"}[1h]))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"1h","intervalFactor":2,"legendFormat":"Uploads","metric":"gtlab_workhorse_multipart_upload_requsts","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":7200,"tags":[]},{"expr":"sum(increase(gitlab_workhorse_sendfile_requests{type=\"artifacts\"}[1h]))","format":"time_series","interval":"1h","intervalFactor":2,"legendFormat":"Downloads","refId":"B","step":7200}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Artifacts operations - requests","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","editable":true,"error":false,"fill":1,"gridPos":{"h":7,"w":8,"x":16,"y":98},"id":27,"legend":{"alignAsTable":true,"avg":true,"current":false,"max":true,"min":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(increase(gitlab_workhorse_multipart_upload_files{type=\"artifacts\"}[1h]))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"1h","intervalFactor":2,"legendFormat":"Uploads","metric":"gtlab_workhorse_multipart_upload_requsts","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":7200,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Artifacts operations - files","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"CI Artifacts operations","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":45},"id":107,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","editable":true,"error":false,"fill":1,"gridPos":{"h":7,"w":12,"x":0,"y":99},"id":22,"legend":{"alignAsTable":true,"avg":true,"current":false,"max":true,"min":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"(sum(increase(gitlab_workhorse_git_http_bytes{agent=\"gitlab-ci\"}[1h])) by (direction))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"1h","intervalFactor":2,"legendFormat":"Size ({{direction}})","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":7200,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Git operations by CI","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","editable":true,"error":false,"fill":1,"gridPos":{"h":7,"w":12,"x":12,"y":99},"id":23,"legend":{"alignAsTable":true,"avg":true,"current":false,"max":true,"min":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(increase(gitlab_workhorse_git_http_requests{agent=\"gitlab-ci\"}[1h]))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"1h","intervalFactor":2,"legendFormat":"Requests","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":7200,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Git operations by CI - requests","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Git operations by CI","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":46},"id":108,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","fill":1,"gridPos":{"h":7,"w":8,"x":0,"y":100},"id":29,"legend":{"alignAsTable":true,"avg":true,"current":false,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(rate(gitlab_workhorse_multipart_upload_bytes{type=\"artifacts\"}[1h])) / sum(rate(gitlab_workhorse_multipart_upload_bytes[1h]))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"1h","intervalFactor":2,"legendFormat":"Artifacts uploads vs. all uploads","metric":"gitlab_workhorse_multipart","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":7200,"tags":[]}],"thresholds":[],"timeFrom":"24h","timeRegions":[],"timeShift":null,"title":"Artifacts uploads vs. all uploads","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","fill":1,"gridPos":{"h":7,"w":8,"x":8,"y":100},"id":30,"legend":{"alignAsTable":true,"avg":true,"current":false,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(rate(gitlab_workhorse_sendfile_bytes{type=\"artifacts\"}[1h])) / sum(rate(gitlab_workhorse_sendfile_bytes[1h]))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"1h","intervalFactor":2,"legendFormat":"Artifacts downloads vs. all downloads","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":7200,"tags":[]}],"thresholds":[],"timeFrom":"24h","timeRegions":[],"timeShift":null,"title":"Artifacts downloads vs. all downloads","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-app-01-inf-gprd","fill":1,"gridPos":{"h":7,"w":8,"x":16,"y":100},"id":31,"legend":{"alignAsTable":true,"avg":true,"current":false,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"sum(rate(gitlab_workhorse_git_http_bytes{agent=\"gitlab-ci\"}[1h])) / sum(rate(gitlab_workhorse_git_http_bytes[1h]))","format":"time_series","groupBy":[{"params":["$interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"1h","intervalFactor":2,"legendFormat":"CI Git HTTP transfer vs. all Git HTTP transfer","metric":"","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":7200,"tags":[]}],"thresholds":[],"timeFrom":"24h","timeRegions":[],"timeShift":null,"title":"CI Git HTTP transfer vs. all Git HTTP transfer","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"CI bandwidth usage","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":47},"id":116,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":13,"w":12,"x":0,"y":101},"id":63,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(hanging_droplets_cleaner_remove_droplets_total{instance=~\"$hanging_droplets_cleaner\"}[15m])","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"15m","intervalFactor":1,"legendFormat":"{{instance}}","metric":"hanging_droplets_cleaner_remove_droplets_total","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":900,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Hanging droplepts remove rate (15m)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":13,"w":12,"x":12,"y":101},"id":64,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(hanging_droplets_cleaner_remove_droplet_errors_total{instance=~\"$hanging_droplets_cleaner\"}[15m])","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"15m","intervalFactor":1,"legendFormat":"{{instance}}","metric":"","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":900,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Hanging droplepts remove errors rate (15m)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Hanging droplets cleaner","type":"row"},{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":48},"id":117,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":12,"w":12,"x":0,"y":49},"id":69,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(droplet_zero_machines_cleaner_removed_machines_total{instance=~\"$droplet_zero_machines_cleaner\"}[15m])","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"15m","intervalFactor":1,"legendFormat":"{{instance}}","metric":"hanging_droplets_cleaner_remove_droplets_total","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":900,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Droplet zero machines remove rate (15m)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"prometheus-01-inf-gprd","fill":1,"gridPos":{"h":12,"w":12,"x":12,"y":49},"id":70,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"dsType":"influxdb","expr":"rate(droplet_zero_machines_cleaner_remove_machine_errors_total{instance=~\"$droplet_zero_machines_cleaner\"}[15m])","format":"time_series","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"interval":"15m","intervalFactor":1,"legendFormat":"{{instance}}","metric":"hanging_droplets_cleaner_remove_droplets_total","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"step":900,"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Droplet zero machines remove errors rate (15m)","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ops","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"repeat":null,"title":"Droplet zero machines cleaner","type":"row"}],"refresh":"5m","schemaVersion":16,"style":"dark","tags":["ci"],"templating":{"list":[{"allValue":null,"current":{"text":"All","value":"$__all"},"datasource":"prometheus-01-inf-gprd","definition":"","hide":0,"includeAll":true,"label":"Runner Type","multi":true,"name":"runner_type","options":[],"query":"gitlab_runner_version_info{job=~\".*\",job!=\"omnibus-runners\"}","refresh":1,"regex":"/job=\"([^\\/]*?)\"/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"text":"All","value":"$__all"},"datasource":"prometheus-01-inf-gprd","definition":"","hide":0,"includeAll":true,"label":"Runner Managers","multi":true,"name":"runner_managers","options":[],"query":"query_result(label_replace(gitlab_runner_version_info{job=~\"$runner_type\"}, \"fqdn\", \"$1.*\", \"instance\", \"(.*):[0-9]+$\"))","refresh":2,"regex":"/fqdn=\"([^\"]+)\"/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"text":"All","value":"$__all"},"datasource":"prometheus-01-inf-gprd","definition":"","hide":0,"includeAll":true,"label":"Cache Server","multi":true,"name":"cache_server","options":[],"query":"label_values(node_boot_time_seconds{fqdn=~\"runners-cache-.*\"}, fqdn)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"text":"postgres-01-db-gprd.c.gitlab-production.internal","value":"postgres-01-db-gprd.c.gitlab-production.internal"},"datasource":"prometheus-app-01-inf-gprd","definition":"","hide":0,"includeAll":false,"label":"GitLab Monitor instance","multi":false,"name":"gl_monitor_fqdn","options":[],"query":"label_values(ci_running_builds{archivereplica!=\"1\"}, fqdn)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":"yes","value":"yes"},"hide":0,"includeAll":true,"label":"Has Shared Runners Minutes","multi":true,"name":"has_minutes","options":[{"selected":false,"text":"All","value":"$__all"},{"selected":true,"text":"yes","value":"yes"},{"selected":false,"text":"no","value":"no"}],"query":"yes,no","skipUrlSync":false,"type":"custom"},{"allValue":null,"current":{"text":"All","value":"$__all"},"datasource":"prometheus-01-inf-gprd","definition":"","hide":0,"includeAll":true,"label":"Hanging doplets cleaner","multi":true,"name":"hanging_droplets_cleaner","options":[],"query":"hanging_droplets_cleaner_remove_droplets_total","refresh":1,"regex":"/instance=\"([^\\/]*?)\"/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"text":"All","value":"$__all"},"datasource":"prometheus-01-inf-gprd","definition":"","hide":0,"includeAll":true,"label":"Droplet zero machines cleaner","multi":true,"name":"droplet_zero_machines_cleaner","options":[],"query":"droplet_zero_machines_cleaner_removed_machines_total","refresh":1,"regex":"/instance=\"([^\\/]*?)\"/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"text":"All","value":"$__all"},"datasource":"prometheus-01-inf-gprd","definition":"","hide":0,"includeAll":true,"label":"Job failure reason","multi":true,"name":"runner_job_failure_reason","options":[],"query":"label_values(gitlab_runner_failed_jobs_total, failure_reason)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"text":"gprd","value":"gprd"},"datasource":"prometheus-app-01-inf-gprd","definition":"","hide":0,"includeAll":false,"label":"GitLab env","multi":false,"name":"gitlab_env","options":[],"query":"job_queue_duration_seconds_sum","refresh":1,"regex":"/environment=\"([^\"]+)\"/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"tags":[],"text":"0","value":["0"]},"datasource":"prometheus-app-01-inf-gprd","definition":"","hide":0,"includeAll":true,"label":"Jobs running for project","multi":true,"name":"jobs_running_for_project","options":[],"query":"job_queue_duration_seconds_sum","refresh":1,"regex":"/jobs_running_for_project=\"([^\"]+)\"/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"utc","title":"CI","uid":"000000159","version":40}}